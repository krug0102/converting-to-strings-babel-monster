{"version":3,"sources":["malli/impl/util.cljc"],"mappings":"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","names":["malli.impl.util/+max-size+","js/Number","malli.impl.util/-tagged","k","v","cljs.core/MapEntry","malli.impl.util/-tagged?","malli.impl.util/-invalid?","x","cljs.core/keyword-identical?","malli.impl.util/-map-valid","f","malli.impl.util/-map-invalid","var_args","G__159065","malli.impl.util/-fail!","js/Error","type","malli.impl.util._fail_BANG_","data","message","cljs.core.ex_info","cljs.core.pr_str","this__4472__auto__","k__4473__auto__","this__4474__auto__","k159070","else__4475__auto__","G__159074","cljs.core/Keyword","path","in","schema","value","cljs.core.get","__extmap","this__4492__auto__","f__4493__auto__","init__4494__auto__","cljs.core.reduce","ret__4495__auto__","p__159077","vec__159078","k__4496__auto__","cljs.core.nth","v__4497__auto__","this__4487__auto__","writer__4488__auto__","opts__4489__auto__","pr-pair__4490__auto__","keyval__4491__auto__","cljs.core/pr-sequential-writer","cljs.core.concat","cljs.core/PersistentVector","G__159069","cljs.core/RecordIter","cljs.core/-iterator","cljs.core/nil-iter","this__4470__auto__","__meta","this__4467__auto__","__hash","this__4476__auto__","cljs.core/count","this__4468__auto__","h__4330__auto__","coll__4469__auto__","cljs.core/hash-unordered-coll","this159071","other159072","cljs.core._EQ_","this__4482__auto__","k__4483__auto__","cljs.core/contains?","cljs.core.dissoc","cljs.core/-with-meta","cljs.core.into","cljs.core/not-empty","this__4479__auto__","G__159086","this__4480__auto__","k__4481__auto__","pred__159087","expr__159088","cljs.core.assoc","this__4485__auto__","cljs.core/seq","this__4471__auto__","this__4477__auto__","entry__4478__auto__","cljs.core/vector?","cljs.core/-nth","cljs.core/-conj","malli.impl.util/SchemaError","this__4516__auto__","cljs.core/List","writer__4517__auto__","cljs.core/-write","G__159073","extmap__4512__auto__","G__159090","cljs.core/record?","malli.impl.util/->SchemaError","malli.impl.util/map->SchemaError","G__159092","malli.impl.util/-error"],"sourcesContent":["(ns malli.impl.util\n  #?(:clj (:import (java.util.concurrent TimeoutException TimeUnit FutureTask)\n                   (clojure.lang MapEntry))))\n\n(def ^:const +max-size+ #?(:clj Long/MAX_VALUE, :cljs (.-MAX_VALUE js/Number)))\n\n(defn -tagged [k v] #?(:clj (MapEntry. k v), :cljs (MapEntry. k v nil)))\n(defn -tagged? [v] (instance? MapEntry v))\n\n(defn -invalid? [x] #?(:clj (identical? x :malli.core/invalid), :cljs (keyword-identical? x :malli.core/invalid)))\n(defn -map-valid [f v] (if (-invalid? v) v (f v)))\n(defn -map-invalid [f v] (if (-invalid? v) (f v) v))\n\n(defn -fail!\n  ([type] (-fail! type nil))\n  ([type data] (-fail! type nil data))\n  ([type message data] (throw (ex-info (str type \" \" (pr-str data) message) {:type type, :data data}))))\n\n(defrecord SchemaError [path in schema value type message])\n\n(defn -error\n  ([path in schema value] (->SchemaError path in schema value nil nil))\n  ([path in schema value type] (->SchemaError path in schema value type nil)))\n\n#?(:clj\n   (defn ^:no-doc -run [^Runnable f ms]\n     (let [task (FutureTask. f), t (Thread. task)]\n       (try\n         (.start t) (.get task ms TimeUnit/MILLISECONDS)\n         (catch TimeoutException _ (.cancel task true) (.stop t) ::timeout)\n         (catch Exception e (.cancel task true) (.stop t) (throw e))))))\n"]}