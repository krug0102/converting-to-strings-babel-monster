{"version":3,"sources":["pinkgorilla/ui/jsrender.cljs"],"mappings":";AAUA,+BAAA,/BAAMA,sEAAMC;AAAZ,AACE,OAAMC,YAAWD;;AAEnB,+CAAA,uDAAAE,tGAAMI;AAAN,AAAA,IAAAH,cAAAD;IAAAC,kBAAA,AAAAC,4BAAAD;QAAA,AAAAE,4CAAAF,gBAAA,hEACWI;WADX,AAAAF,4CAAAF,gBAAA,nEACaK;AADb,AAEE,IAAMC,OAAK,AAACC,iCAAiB,AAACC;AAA9B,AACE,iCAAA,2CAAA,oEAAA,kBAAA,3JAACC,oOAEiB;AAAA,AAAA,0FAAA,mDAAA,2CAAA,kDAAkBH;GAFpC,oFAGuB,WAAKI;AAAL,AAEE,IAAAC,YAAG,AAACE,qBAAqBH;IAAzBE,YAA+BP;AAA/B,AAAA,0EAAAM,UAAAC,yBAAAD,UAAAC,/GAACR,kCAAAA,uDAAAA;GAL1B,sFAWyB,iBAAAU,NAAKJ;AAAL,AAAA,IAAAK,cAAAD;QAAA,AAAAE,4CAAAD,YAAA,IAAA,hEAAWG;IAAXD,cAAA,AAAAD,4CAAAD,YAAA,IAAA;IAAAE,kBAAA,AAAAhB,4BAAAgB;YAAA,AAAAf,4CAAAe,gBAAA,pEAAqBb;eAArB,AAAAF,4CAAAe,gBAAA,vEAAuBZ;AAAvB,AAEE,AAACT,6BAAK,CAAA,oEAA6BS;;AACnC,IAAAc,YAAG,AAACN,qBAAqBH;IAAzBU,YAA+Bf;AAA/B,AAAA,kFAAAc,UAAAC,6BAAAD,UAAAC,3HAAChB,sCAAAA,2DAAAA;;;AAEhC,qCAAA,rCAAMiB,kFAAYhB;AAAlB,AAAA,8HAAA,pCACGiB,uHACCnB,6CAAqBE;;AAEzB,oCAAA,4CAAAkB,hFAAME;AAAN,AAAA,IAAAD,cAAAD;IAAAC,kBAAA,AAAAvB,4BAAAuB;QAAA,AAAAtB,4CAAAsB,gBAAA,hEAAyBpB;WAAzB,AAAAF,4CAAAsB,gBAAA,nEAA2BnB;AAA3B,AACE,cAAA,2CAAA,kDAAA,vGAAMqB,qGAAYtB,uDAAQ,AAACuB,qBAAQtB;AAAnC,AAAA,0FACGgB,mCAAWK","names":["pinkgorilla.ui.jsrender/info","s","js/console","p__161072","map__161073","cljs.core/--destructure-map","cljs.core.get","pinkgorilla.ui.jsrender/render-function-impl","f","data","uuid","cljs-uuid-utils.core/uuid-string","cljs-uuid-utils.core/make-random-uuid","reagent.core/create-class","this","G__161074","G__161075","reagent.dom/dom-node","p__161076","vec__161077","cljs.core.nth","map__161080","_","G__161081","G__161082","pinkgorilla.ui.jsrender/render-clj","pinkgorilla.ui.error/error-boundary","p__161083","map__161084","pinkgorilla.ui.jsrender/render-js","data-js","cljs.core/clj->js"],"sourcesContent":["(ns pinkgorilla.ui.jsrender\n  \"jsrender is part of a jsrequire based module system to render data via javascipt inside\n   reagent components. Typically custom ui renderers would use it:\n   [jsrender custom-module data]\"\n  (:require\n   [reagent.core :as reagent]\n   [reagent.dom]\n   [cljs-uuid-utils.core :as uuid]\n   [pinkgorilla.ui.error :refer [error-boundary]]))\n\n(defn info [s]\n  (.log js/console s))\n\n(defn render-function-impl\n  [{:keys [f data]}]\n  (let [uuid (uuid/uuid-string (uuid/make-random-uuid))]\n    (reagent/create-class\n     {:display-name \"render-function\"\n      :reagent-render (fn [] [:div {:id uuid}])\n      :component-did-mount (fn [this]\n                             ;(info (str \"jsrender init data: \" data))\n                             (f (reagent.dom/dom-node this) data))\n          ;:component-did-update (fn [this]\n          ;                        (run-script uuid data snippet))\n\n ;(let [[_ series-values] (reagent/argv this)]\n\n      :component-will-update (fn [this [_ {:keys [f data]}]]\n              ; with changing of parameters, re-render the component. (important for vega charts)\n                               (info (str \"jsrender new params: \" data))\n                               (f (reagent.dom/dom-node this) data))})))\n\n(defn render-clj [data]\n  [error-boundary\n   [render-function-impl data]])\n\n(defn render-js [{:keys [f data]}]\n  (let [data-js {:f f :data (clj->js data)}]\n    [render-clj data-js]))\n\n"]}