{"version":3,"sources":["duck_repled/definition_resolvers.cljc"],"mappings":"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","names":["duck-repled.definition-resolvers/join-paths","paths","cljs.core.apply","js/shadow.js.shim.module$path.join","duck-repled.definition-resolvers/file-exists?","path","and__4221__auto__","js/shadow.js.shim.module$fs.existsSync","js/shadow.js.shim.module$fs.statSync","com.wsscode.pathom3.connect.operation.resolver","_","p__89077","map__89078","cljs.core/--destructure-map","cljs.core.get","original89073","resolver89074","outputs89075","op89076","cljs.core.assoc","a__89033__auto__","b__89034__auto__","promesa.protocols/-bind","___56277__auto__","result__89035__auto__","___56267__auto__","promesa.protocols/-promise","duck_repled.schemas.validate_BANG_","cljs.core/keys","duck-repled.definition-resolvers/join-paths-resolver","p__89095","map__89100","filename","original89091","resolver89092","outputs89093","op89094","duck-repled.definition-resolvers/file-exists-resolver","p__89115","map__89116","meta","original89111","resolver89112","outputs89113","op89114","duck-repled.definition-resolvers/position-resolver","temp__5753__auto__","line","G__89117","duck-repled.definition-resolvers/norm-result","file-name","os","js/shadow.js.shim.module$os.platform","G__89128","cljs.core/re-find","clojure.string/replace-first","p__89146","map__89147","original89136","resolver89137","outputs89138","op89139","duck-repled.definition-resolvers/existing-filename","duck-repled.definition-resolvers/read-jar","clj","jar-file-name","vec__89158","cljs.core.nth","cljs.core.sequence","cljs.core/seq","cljs.core.concat","cljs.core/List","cljs.core/vec","jar","clojure.string.split","t","code","duck-repled.template/template","duck_repled.repl_protocol.eval","p__89186","map__89189","evaluator","kind","original89182","resolver89183","outputs89184","op89185","duck-repled.definition-resolvers/clojure-filename","com.wsscode.pathom3.connect.operation/?","repl","G__89192","cljs.core/Keyword","p__89193","map__89194","cljs.core/select-keys","result","p__89217","map__89218","pos","p__89227","map__89232","original89223","resolver89224","outputs89225","op89226","duck-repled.definition-resolvers/file-from-clr","cljs.core._EQ_","p__89237","map__89238","duck-repled.definition-resolvers/extract-right-var","current-var","contents","vec__89253","or__4223__auto__","var","duck-repled.editor-helpers/current-var","p__89269","map__89270","original89265","resolver89266","outputs89267","op89268","duck-repled.definition-resolvers/resolver-for-ns-only","fqn","G__89271","cljs.core.symbol","cljs.core/namespace","p__89276","map__89277","col","G__89278","G__89283","p__89301","map__89302","original89297","resolver89298","outputs89299","op89300","duck-repled.definition-resolvers/resolver-for-stacktrace","function-name","row","p__89315","map__89316","ns-name","cljs.core/first","original89317","resolver89318","outputs89319","op89320","duck-repled.definition-resolvers/source-from-contents","inputs","source","p__89333","map__89334","original89329","resolver89330","outputs89331","op89332","duck-repled.definition-resolvers/source-from-file","duck-repled.editor-helpers/read-file","top-blocks","duck-repled.editor-helpers/top-blocks","vec__89340","range","text","duck-repled.editor-helpers/top-block-for","duck-repled.definition-resolvers/resolvers"],"sourcesContent":["(ns duck-repled.definition-resolvers\n  (:require [clojure.string :as str]\n            [duck-repled.connect :as connect]\n            [com.wsscode.pathom3.connect.operation :as pco]\n            [duck-repled.repl-protocol :as repl]\n            [duck-repled.template :refer [template]]\n            [duck-repled.editor-helpers :as helpers]\n            [promesa.core :as p]\n            #?(:cljs [\"fs\" :refer [existsSync statSync]])\n            #?(:cljs [\"path\" :refer [join]])\n            #?(:cljs [\"os\" :refer [platform]]))\n  #?(:clj (:import [java.io File]\n                   [java.nio.file FileSystems])))\n\n(defn- join-paths [paths]\n  #?(:cljs (apply join paths)\n     :clj (if (empty? paths)\n            \".\"\n            (let [[fst & rst] paths]\n              (-> (FileSystems/getDefault)\n                  (.getPath fst (into-array rst))\n                  str)))))\n\n(defn- file-exists? [path]\n  #?(:clj (.isFile (File. path))\n     :cljs (and (existsSync path)\n                (.isFile (statSync path)))))\n\n(connect/defresolver join-paths-resolver [{:keys [:file/path]}]\n  {:file/filename (join-paths path)})\n\n(connect/defresolver file-exists-resolver [{:keys [:file/filename]}]\n  {:file/exists? (file-exists? filename)})\n\n(connect/defresolver position-resolver [{:keys [:var/meta]}]\n  {::pco/output [:definition/row :definition/col]}\n\n  (when-let [line (:line meta)]\n    (cond-> {:definition/row (-> meta :line dec)}\n            (:column meta) (assoc :definition/col (-> meta :column dec)))))\n\n(defn- norm-result [file-name]\n  (let [os #?(:clj (System/getProperty \"os.name\")\n              :cljs (platform))]\n    (cond-> file-name\n            (and (re-find #\"(?i)^win\" os))\n            (str/replace-first #\"^/\" \"\"))))\n\n(connect/defresolver existing-filename [{:keys [:var/meta]}]\n  {::pco/output [:definition/filename]\n   ::pco/priority 3}\n\n  (when (file-exists? (:file meta))\n    {:definition/filename (-> meta :file norm-result)}))\n\n(defn- read-jar [clj jar-file-name]\n  (let [[jar path] (str/split jar-file-name #\"!/\" 2)\n        jar (clojure.string/replace-first jar #\"file:\" \"\")\n        t `(let [jar-file# (java.util.jar.JarFile. ::jar)\n                 ba# (java.io.ByteArrayOutputStream.)\n                 is# (.getInputStream jar-file# (.getJarEntry jar-file# ::path))]\n             (clojure.java.io/copy is# ba#)\n             (java.lang.String. (.toByteArray ba#)))\n        code (template t {::jar jar ::path path})]\n    (repl/eval clj code)))\n\n(connect/defresolver clojure-filename [{:keys [:repl/evaluator :var/meta\n                                               :repl/kind :repl/clj]}]\n  {::pco/input [:repl/evaluator :var/meta :repl/kind (pco/? :repl/clj)]\n   ::pco/output [:definition/filename\n                 {:definition/contents [:text/contents :text/range]}]}\n\n  (when-let [repl (case kind\n                   :clj evaluator\n                   :cljs clj\n                   nil)]\n    (p/let [code (template `(do\n                              (require 'clojure.java.io)\n                              (some->> :file\n                                       (.getResource (clojure.lang.RT/baseLoader))\n                                       .getPath))\n                           (select-keys meta [:file]))\n            {:keys [result]} (repl/eval repl code)\n            filename (norm-result result)]\n      (if (re-find #\"\\.jar!/\" filename)\n        (p/let [{:keys [result]} (read-jar repl filename)\n                pos [(-> meta (:line 1) dec) (-> meta (:column 1) dec)]]\n          {:definition/filename filename\n           :definition/contents {:text/contents result\n                                 :text/range [pos pos]}})\n        {:definition/filename filename}))))\n\n(connect/defresolver file-from-clr [{:keys [:repl/evaluator :var/meta :repl/kind]}]\n  {::pco/output [:definition/filename]}\n  (when (= :cljr kind)\n    (p/let [code (template `(some-> ::file\n                                    clojure.lang.RT/FindFile\n                                    str)\n                           {::file (:file meta)})\n            {:keys [result]} (repl/eval evaluator code)]\n      (when result\n        {:definition/filename (norm-result result)}))))\n\n(defn- extract-right-var [current-var contents]\n  (let [contents (or (:text/contents current-var) contents)\n        [_ var] (helpers/current-var (str contents) [0 0])]\n    (when (and var (= var contents))\n      contents)))\n\n(connect/defresolver resolver-for-ns-only\n  [{:keys [repl/evaluator text/contents text/current-var]}]\n\n  {::pco/input [:repl/evaluator (pco/? :text/current-var) (pco/? :text/contents)]\n   ::pco/output [:var/meta :definition/row :definition/col]}\n\n  (when-let [fqn (some-> (extract-right-var current-var contents) symbol)]\n    (when (-> fqn namespace nil?)\n      (p/let [code (template `(let [ns# (find-ns '::namespace-sym)\n                                     first-var# (some-> ns#\n                                                        ns-interns\n                                                        first\n                                                        second\n                                                        meta\n                                                        :file)\n                                     ns-meta# (meta ns#)]\n                                (cond-> ns-meta#\n                                        first-var# (assoc :file first-var#)))\n                             {::namespace-sym fqn})\n              {:keys [result]} (repl/eval evaluator code)\n              col (some-> result :column dec)]\n        (when result\n          (cond-> {:var/meta result\n                   :definition/row (dec (:line result 1))}\n                  col (assoc :definition/col col)))))))\n\n(connect/defresolver resolver-for-stacktrace [{:repl/keys [evaluator]\n                                               :ex/keys [function-name filename row]}]\n  {::pco/input [:repl/evaluator :ex/function-name :ex/filename (pco/? :ex/row)]\n   ::pco/output [:var/meta :definition/row]\n   ::pco/priority 20}\n\n  (p/let [ns-name (-> function-name (str/split #\"/\") first)\n          code (template `(let [n# (find-ns '::namespace-sym)]\n                            (->> n#\n                                 ns-interns\n                                 (some (fn [[_# res#]]\n                                         (let [meta# (meta res#)\n                                               file# (-> meta# :file str)]\n                                           (and (clojure.string/ends-with? file#\n                                                                           ::file-name)\n                                                (select-keys meta# [:file])))))))\n                         {::namespace-sym (symbol ns-name)\n                          ::file-name filename})\n          {:keys [result]} (repl/eval evaluator code)]\n    {:var/meta result\n     :definition/row row}))\n\n(connect/defresolver source-from-contents [inputs]\n  {::pco/input [{:definition/contents [:text/top-block]}]\n   ::pco/output [:definition/source]\n   ::pco/priority 1}\n\n  (when-let [source (-> inputs :definition/contents :text/top-block)]\n   {:definition/source source}))\n\n;; FIXME: Maybe this will not cache top-blocks from the same filename\n(connect/defresolver source-from-file [{:definition/keys [filename row col]}]\n  {::pco/input [:definition/filename :definition/row (pco/? :definition/col)]\n   ::pco/output [{:definition/source [:text/contents :text/range]}]}\n\n  (p/let [source (helpers/read-file filename)\n          top-blocks (helpers/top-blocks source)]\n    (when-let [[range text] (helpers/top-block-for top-blocks [row (or col 0)])]\n      {:definition/source {:text/contents text\n                           :text/range range}})))\n\n\n(def resolvers [join-paths-resolver file-exists-resolver position-resolver\n                existing-filename clojure-filename file-from-clr\n                resolver-for-ns-only resolver-for-stacktrace\n                source-from-contents source-from-file])\n"]}