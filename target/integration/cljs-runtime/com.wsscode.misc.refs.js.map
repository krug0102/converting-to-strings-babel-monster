{"version":3,"sources":["com/wsscode/misc/refs.cljc"],"mappings":"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","names":["com.wsscode.misc.refs/kw-identical?","kw-a","kw-b","cljs.core/keyword-identical?","com.wsscode.misc.refs/atom?","x","cljs.core/PROTOCOL_SENTINEL","cljs.core/native-satisfies?","cljs.core/IDeref","com$wsscode$misc$refs$GenericBox$_greset_BANG_$dyn","x__4521__auto__","m__4522__auto__","com.wsscode.misc.refs/-greset!","goog/typeOf","m__4519__auto__","cljs.core/missing-protocol","com$wsscode$misc$refs$GenericBox$_gswap_BANG_$dyn","com.wsscode.misc.refs/-gswap!","var_args","G__80956","js/Error","com.wsscode.misc.refs/GenericBox","this","value","f","y","more","cljs.core/Atom","cljs.core/reset!","cljs.core.swap_BANG_","cljs.core.apply","cljs.core/swap!","cljs.core/Volatile","cljs.core/vreset!","G__80960","G__80961","G__80962","G__80963","G__80964","G__80965","cljs.core/deref","com.wsscode.misc.refs/greset!","val","G__80972","com.wsscode.misc.refs/gswap!","args-arr__4850__auto__","len__4829__auto__","i__4830__auto__","argseq__4851__auto__","cljs.core/IndexedSeq","seq80967","G__80968","cljs.core/first","cljs.core/next","G__80969","G__80970","G__80971","self__4816__auto__"],"sourcesContent":["(ns com.wsscode.misc.refs\n  #?(:clj\n     (:import\n       (clojure.lang\n         Atom\n         IDeref\n         Volatile))))\n\n(defn kw-identical?\n  \"Clojure/Clojurescript efficient keyword comparison.\"\n  [kw-a kw-b]\n  #?(:clj  (identical? kw-a kw-b)\n     :cljs (keyword-identical? kw-a kw-b)))\n\n(defn atom?\n  \"Check if x is an atom.\"\n  [x]\n  #?(:clj  (instance? IDeref x)\n     :cljs (satisfies? IDeref x)))\n\n(defprotocol GenericBox\n  (-greset! [this value])\n  (-gswap!\n    [this f]\n    [this f x]\n    [this f x y]\n    [this f x y more]))\n\n(extend-protocol GenericBox\n  Atom\n  (-greset! [this value] (reset! this value))\n  (-gswap!\n    ([this f] (swap! this f))\n    ([this f x] (swap! this f x))\n    ([this f x y] (swap! this f x y))\n    ([this f x y more] (apply swap! this f x y more)))\n\n  Volatile\n  (-greset! [this value] (vreset! this value))\n  (-gswap!\n    ([this f] (vswap! this f))\n    ([this f x] (vswap! this f x))\n    ([this f x y] (vswap! this f x y))\n    ([this f x y more] (vreset! this (apply f @this x y more)))))\n\n(defn greset!\n  [this val] (-greset! this val))\n\n(defn gswap!\n  ([this f] (-gswap! this f))\n  ([this f x] (-gswap! this f x))\n  ([this f x y] (-gswap! this f x y))\n  ([this f x y & more] (-gswap! this f x y more)))\n"]}