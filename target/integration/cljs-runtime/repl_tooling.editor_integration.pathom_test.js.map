{"version":3,"sources":["repl_tooling/editor_integration/pathom_test.cljs"],"mappings":"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","names":["repl-tooling.editor-integration.pathom-test/config","cljs.core.atom","js/process","devcards.core/register-card","devcards.core/card-base","devcards.core.test_card","cljs.test/test-var","repl-tooling.editor-integration.pathom-test/customizing-pathom","check.async/async-test*","promesa.protocols/-bind","___31810__auto__","___31809__auto__","promesa.protocols/-promise","repl-tooling.integration.fake-editor/disconnect!","repl_tooling.integration.fake_editor.connect_BANG_","cljs.core/deref","promesa.core.finally$","cljs.test.update_current_env_BANG_","cljs.core/conj","___36014__auto__","cljs.test/update-current-env!","cljs.core/rest","repl-tooling.integration.fake-editor/type","repl-tooling.commands-to-repl.pathom/add-resolver","p__106382","map__106383","cljs.core/--destructure-map","cljs.core.get","p__106535","map__106536","current-var","___31820__auto__","check.async/to-promise","left-106403","right-106404","cljs.test/do-report","cljs.core.assoc","lft__35783__auto__","rgt__35784__auto__","qleft__35785__auto__","qright__35786__auto__","result__35787__auto__","matcher-combinators.core/match","msg__35788__auto__","cljs.core.pr_str","matcher-combinators.printer/as-string","pass?__35789__auto__","cljs.core._EQ_","cljs.core.symbol","left-106541","right-106542","repl_tooling.integration.fake_editor.run_feature_BANG_","repl-tooling.commands-to-repl.pathom/reset-resolvers","repl-tooling.commands-to-repl.pathom/compose-resolver","p__106491","map__106492","p__106559","map__106560","fqn","meta","left-106498","right-106499","left-106562","right-106563"],"sourcesContent":["(ns repl-tooling.editor-integration.pathom-test\n  (:require [devcards.core :as cards :include-macros true]\n            [repl-tooling.commands-to-repl.pathom :as pathom]\n            [matcher-combinators.matchers :as m]\n            [clojure.test]\n            [promesa.core :as p]\n            [repl-tooling.integration.fake-editor :as fake]\n            [check.async :refer [async-test check testing]]\n            [repl-tooling.repl-client.clojure :as clj]\n            [repl-tooling.repl-client.shadow-ws :as shadow-ws]))\n\n(def config (atom {:eval-mode :prefer-clj\n                   :project-paths [(. js/process cwd)]}))\n\n(cards/deftest customizing-pathom\n  (async-test \"pathom resolver customization\" {:teardown (fake/disconnect!)\n                                               :timeout 16000}\n    (fake/connect! {:get-config #(deref config)})\n\n    (testing \"customizing resolves\"\n      (testing \"will add a new resolver with our code\"\n        (fake/type \"some-symbol\")\n        (pathom/add-resolver {:outputs [:var/meta] :inputs [:text/current-var]}\n                             (fn [{:text/keys [current-var]}]\n                               {:var/meta {:doc (:text/contents current-var)}}))\n        (check (fake/run-feature! :eql [:var/meta])\n               => {:var/meta {:doc \"some-symbol\"}}))\n\n      (testing \"will compose original resolver, and add our customization code\"\n        (fake/type \"str\")\n        (pathom/reset-resolvers)\n        (pathom/compose-resolver {:outputs [:var/meta] :inputs [:var/fqn]}\n                                 (fn [{:var/keys [fqn meta]}]\n                                   {:var/meta (assoc meta :original-var fqn)}))\n        (check (fake/run-feature! :eql [:var/meta])\n               => {:var/meta {:doc #\"concatenation\"\n                              :original-var 'clojure.core/str}})))))\n"]}