goog.provide('repl_tooling.editor_integration.configs_test');
devcards.core.register_card(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"path","path",-188191168),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"repl_tooling.editor_integration.configs_test","repl_tooling.editor_integration.configs_test",678620430),new cljs.core.Keyword(null,"fake-editor","fake-editor",-2015963141)], null),new cljs.core.Keyword(null,"func","func",-238706040),(function (){
return devcards.core.card_base(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"name","name",1843675177),"fake-editor",new cljs.core.Keyword(null,"documentation","documentation",1889593999),null,new cljs.core.Keyword(null,"main-obj","main-obj",-1544409742),(function (){
if((typeof repl_tooling !== 'undefined') && (typeof repl_tooling.editor_integration !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
 * @implements {devcards.core.IDevcardOptions}
*/
repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809 = (function (meta103810){
this.meta103810 = meta103810;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_103811,meta103810__$1){
var self__ = this;
var _103811__$1 = this;
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809(meta103810__$1));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_103811){
var self__ = this;
var _103811__$1 = this;
return self__.meta103810;
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809.prototype.devcards$core$IDevcardOptions$ = cljs.core.PROTOCOL_SENTINEL);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809.prototype.devcards$core$IDevcardOptions$_devcard_options$arity$2 = (function (this__54113__auto__,devcard_opts__54114__auto__){
var self__ = this;
var this__54113__auto____$1 = this;
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(devcard_opts__54114__auto__,new cljs.core.Keyword(null,"main-obj","main-obj",-1544409742),(function (){var v__54138__auto__ = repl_tooling.integration.fake_editor.editor;
if(cljs.core.fn_QMARK_(v__54138__auto__)){
return (function (data_atom__54139__auto__,owner__54140__auto__){
return reagent.core.as_element(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [v__54138__auto__,data_atom__54139__auto__,owner__54140__auto__], null));
});
} else {
return reagent.core.as_element(v__54138__auto__);
}
})(),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"options","options",99638489),cljs.core.merge.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([cljs.core.PersistentArrayMap.EMPTY,devcards.core.assert_options_map(new cljs.core.Keyword(null,"options","options",99638489).cljs$core$IFn$_invoke$arity$1(devcard_opts__54114__auto__))], 0))], 0));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta103810","meta103810",1447369327,null)], null);
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809.cljs$lang$type = true);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809.cljs$lang$ctorStr = "repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test103809");

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809.cljs$lang$ctorPrWriter = (function (this__4461__auto__,writer__4462__auto__,opt__4463__auto__){
return cljs.core._write(writer__4462__auto__,"repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test103809");
}));

/**
 * Positional factory function for repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test103809.
 */
repl_tooling.editor_integration.configs_test.__GT_t_repl_tooling$editor_integration$configs_test103809 = (function repl_tooling$editor_integration$configs_test$__GT_t_repl_tooling$editor_integration$configs_test103809(meta103810){
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809(meta103810));
});

}

return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103809(null));
})()
,new cljs.core.Keyword(null,"initial-data","initial-data",-1315709804),repl_tooling.integration.fake_editor.state,new cljs.core.Keyword(null,"options","options",99638489),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"watch-atom","watch-atom",-2134031308),false], null)], null));
})], null));
repl_tooling.editor_integration.configs_test.config_file = "/tmp/repl-tooling-test.clj";
repl_tooling.editor_integration.configs_test.change_config_file = (function repl_tooling$editor_integration$configs_test$change_config_file(txt){
return shadow.js.shim.module$fs.writeFileSync(repl_tooling.editor_integration.configs_test.config_file,txt);
});
repl_tooling.editor_integration.configs_test.custom_commands = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);
devcards.core.register_card(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"path","path",-188191168),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"repl_tooling.editor_integration.configs_test","repl_tooling.editor_integration.configs_test",678620430),new cljs.core.Keyword(null,"config-eval","config-eval",247599133)], null),new cljs.core.Keyword(null,"func","func",-238706040),(function (){
return devcards.core.card_base(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"name","name",1843675177),"config-eval",new cljs.core.Keyword(null,"documentation","documentation",1889593999),null,new cljs.core.Keyword(null,"main-obj","main-obj",-1544409742),devcards.core.test_card.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(function (){
if((typeof repl_tooling !== 'undefined') && (typeof repl_tooling.editor_integration !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IFn}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IWithMeta}
*/
repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821 = (function (meta103822){
this.meta103822 = meta103822;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_103823,meta103822__$1){
var self__ = this;
var _103823__$1 = this;
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821(meta103822__$1));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_103823){
var self__ = this;
var _103823__$1 = this;
return self__.meta103822;
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.prototype.call = (function (self__,done__53962__auto__){
var self__ = this;
var self____$1 = this;
var ___9200__auto__ = self____$1;
cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["evaluating code"], 0));

try{var c__35941__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));
cljs.core.async.impl.dispatch.run((function (){
var f__35942__auto__ = (function (){var switch__34939__auto__ = (function (state_104084){
var state_val_104085 = (state_104084[(1)]);
if((state_val_104085 === (7))){
var inst_103895 = (state_104084[(2)]);
var _ = (function (){var statearr_104092 = state_104084;
(statearr_104092[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104092;
})();
var state_104084__$1 = state_104084;
var statearr_104093_110134 = state_104084__$1;
(statearr_104093_110134[(2)] = inst_103895);

(statearr_104093_110134[(1)] = (4));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (20))){
var _ = (function (){var statearr_104095 = state_104084;
(statearr_104095[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104095;
})();
var state_104084__$1 = state_104084;
var ex104087 = (state_104084__$1[(2)]);
var statearr_104096_110135 = state_104084__$1;
(statearr_104096_110135[(5)] = ex104087);


var statearr_104097_110136 = state_104084__$1;
(statearr_104097_110136[(1)] = (19));

(statearr_104097_110136[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (27))){
var inst_103972 = (state_104084[(7)]);
var inst_103969 = (state_104084[(8)]);
var inst_103962 = (state_104084[(9)]);
var inst_103976 = (state_104084[(2)]);
var inst_103977 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_103969);
var inst_103978 = [inst_103976,inst_103962,inst_103977];
var inst_103979 = cljs.core.PersistentHashMap.fromArrays(inst_103972,inst_103978);
var inst_103980 = cljs.test.do_report(inst_103979);
var _ = (function (){var statearr_104101 = state_104084;
(statearr_104101[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104101;
})();
var state_104084__$1 = state_104084;
var statearr_104102_110137 = state_104084__$1;
(statearr_104102_110137[(2)] = inst_103980);

(statearr_104102_110137[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (1))){
var inst_103832 = (state_104084[(10)]);
var inst_103831 = (function (){return (function (){

return (done__53962__auto__.cljs$core$IFn$_invoke$arity$0 ? done__53962__auto__.cljs$core$IFn$_invoke$arity$0() : done__53962__auto__.call(null));
});
})();
var inst_103832__$1 = (new cljs.core.Delay(inst_103831,null));
var inst_103833 = (function (){var mark_as_done__53963__auto__ = inst_103832__$1;
return (function (){
if(cljs.core.realized_QMARK_(mark_as_done__53963__auto__)){
return null;
} else {
try{var value__9156__auto___110138 = (function(){throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)})();
if(cljs.core.truth_(value__9156__auto___110138)){
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"pass","pass",1574159993),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110138,null]));
} else {
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"fail","fail",1706214930),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110138,null]));
}

}catch (e104107){var t__9189__auto___110139 = e104107;
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"error","error",-978969032),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,t__9189__auto___110139,null]));
}
return cljs.core.deref(mark_as_done__53963__auto__);
}
});
})();
var inst_103834 = setTimeout(inst_103833,(3000));
var inst_103836 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_103837 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_103838 = (new cljs.core.PersistentVector(null,1,(5),inst_103836,inst_103837,null));
var inst_103839 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_103838,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["evaluates simple code"], 0));
var state_104084__$1 = (function (){var statearr_104111 = state_104084;
(statearr_104111[(10)] = inst_103832__$1);

(statearr_104111[(11)] = inst_103839);

(statearr_104111[(12)] = inst_103834);

return statearr_104111;
})();
var statearr_104112_110140 = state_104084__$1;
(statearr_104112_110140[(2)] = null);

(statearr_104112_110140[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (24))){
var inst_103958 = (state_104084[(2)]);
var state_104084__$1 = state_104084;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_104084__$1,(21),inst_103958);
} else {
if((state_val_104085 === (39))){
var inst_104050 = (state_104084[(2)]);
var state_104084__$1 = state_104084;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_104084__$1,(36),inst_104050);
} else {
if((state_val_104085 === (4))){
var _ = (function (){var statearr_104117 = state_104084;
(statearr_104117[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104117;
})();
var inst_103841 = (state_104084[(2)]);
var inst_103842 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_103843 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_103844 = (new cljs.core.PersistentVector(null,1,(5),inst_103842,inst_103843,null));
var inst_103845 = cljs.test.update_current_env_BANG_(inst_103844,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_104084[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_104084__$1 = (function (){var statearr_104120 = state_104084;
(statearr_104120[(13)] = inst_103845);

return statearr_104120;
})();
var statearr_104121_110141 = state_104084__$1;
(statearr_104121_110141[(2)] = inst_103841);

(statearr_104121_110141[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (15))){
var _ = (function (){var statearr_104125 = state_104084;
(statearr_104125[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104125;
})();
var inst_103905 = (state_104084[(2)]);
var inst_103906 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_103907 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_103908 = (new cljs.core.PersistentVector(null,1,(5),inst_103906,inst_103907,null));
var inst_103909 = cljs.test.update_current_env_BANG_(inst_103908,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_104084[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_104084__$1 = (function (){var statearr_104127 = state_104084;
(statearr_104127[(14)] = inst_103909);

return statearr_104127;
})();
var statearr_104129_110142 = state_104084__$1;
(statearr_104129_110142[(2)] = inst_103905);

(statearr_104129_110142[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (21))){
var inst_103960 = (state_104084[(2)]);
var inst_103961 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b (promise 2)] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_103962 = (3);
var inst_103963 = matcher_combinators.core.match((3),inst_103960);
var inst_103966 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_103960], 0));
var inst_103967 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_103963);
var inst_103968 = matcher_combinators.printer.as_string(inst_103967);
var inst_103969 = [inst_103966,"\n\nMismatch:\n",inst_103968].join('');
var inst_103970 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_103963);
var inst_103971 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_103970);
var inst_103972 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_104084__$1 = (function (){var statearr_104132 = state_104084;
(statearr_104132[(15)] = inst_103961);

(statearr_104132[(7)] = inst_103972);

(statearr_104132[(8)] = inst_103969);

(statearr_104132[(9)] = inst_103962);

return statearr_104132;
})();
if(inst_103971){
var statearr_104134_110143 = state_104084__$1;
(statearr_104134_110143[(1)] = (25));

} else {
var statearr_104135_110144 = state_104084__$1;
(statearr_104135_110144[(1)] = (26));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (31))){
var _ = (function (){var statearr_104138 = state_104084;
(statearr_104138[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104138;
})();
var state_104084__$1 = state_104084;
var ex104123 = (state_104084__$1[(2)]);
var statearr_104140_110145 = state_104084__$1;
(statearr_104140_110145[(5)] = ex104123);


throw ex104123;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (32))){
var _ = (function (){var statearr_104142 = state_104084;
(statearr_104142[(4)] = cljs.core.cons((35),(state_104084[(4)])));

return statearr_104142;
})();
var inst_104023 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104024 = cljs.core.PersistentHashMap.EMPTY;
var inst_104025 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104024);
var inst_104026 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_104025];
var inst_104027 = cljs.core.PersistentHashMap.fromArrays(inst_104023,inst_104026);
var inst_104028 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104027);
var inst_104029 = (inst_104028 instanceof Promise);
var state_104084__$1 = state_104084;
if(cljs.core.truth_(inst_104029)){
var statearr_104143_110146 = state_104084__$1;
(statearr_104143_110146[(1)] = (37));

} else {
var statearr_104145_110147 = state_104084__$1;
(statearr_104145_110147[(1)] = (38));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (40))){
var state_104084__$1 = state_104084;
var statearr_104147_110148 = state_104084__$1;
(statearr_104147_110148[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_104147_110148[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (33))){
var inst_104074 = (state_104084[(2)]);
var _ = (function (){var statearr_104150 = state_104084;
(statearr_104150[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104150;
})();
var state_104084__$1 = state_104084;
var statearr_104152_110149 = state_104084__$1;
(statearr_104152_110149[(2)] = inst_104074);

(statearr_104152_110149[(1)] = (30));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (13))){
var _ = (function (){var statearr_104153 = state_104084;
(statearr_104153[(4)] = cljs.core.cons((15),(state_104084[(4)])));

return statearr_104153;
})();
var ___$1 = (function (){var statearr_104155 = state_104084;
(statearr_104155[(4)] = cljs.core.cons((16),(state_104084[(4)])));

return statearr_104155;
})();
var state_104084__$1 = state_104084;
var statearr_104157_110150 = state_104084__$1;
(statearr_104157_110150[(2)] = null);

(statearr_104157_110150[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (22))){
var inst_103832 = (state_104084[(10)]);
var inst_103940 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_103941 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_103942 = cljs.core.PersistentHashMap.EMPTY;
var inst_103943 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_103942);
var inst_103944 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_103943];
var inst_103945 = cljs.core.PersistentHashMap.fromArrays(inst_103941,inst_103944);
var inst_103946 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_103945);
var inst_103947 = (function (){var mark_as_done__53963__auto__ = inst_103832;
var chan__53977__auto__ = inst_103940;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_103948 = inst_103946.then(inst_103947);
var state_104084__$1 = (function (){var statearr_104161 = state_104084;
(statearr_104161[(16)] = inst_103948);

return statearr_104161;
})();
var statearr_104162_110151 = state_104084__$1;
(statearr_104162_110151[(2)] = inst_103940);

(statearr_104162_110151[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (36))){
var inst_104053 = (state_104084[(2)]);
var inst_104054 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b 2] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_104055 = (3);
var inst_104056 = matcher_combinators.core.match((3),inst_104053);
var inst_104057 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_104053], 0));
var inst_104058 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_104056);
var inst_104059 = matcher_combinators.printer.as_string(inst_104058);
var inst_104060 = [inst_104057,"\n\nMismatch:\n",inst_104059].join('');
var inst_104061 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_104056);
var inst_104062 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_104061);
var inst_104063 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_104084__$1 = (function (){var statearr_104167 = state_104084;
(statearr_104167[(17)] = inst_104054);

(statearr_104167[(18)] = inst_104063);

(statearr_104167[(19)] = inst_104060);

(statearr_104167[(20)] = inst_104055);

return statearr_104167;
})();
if(inst_104062){
var statearr_104168_110152 = state_104084__$1;
(statearr_104168_110152[(1)] = (40));

} else {
var statearr_104171_110153 = state_104084__$1;
(statearr_104171_110153[(1)] = (41));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (41))){
var state_104084__$1 = state_104084;
var statearr_104172_110154 = state_104084__$1;
(statearr_104172_110154[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_104172_110154[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (29))){
var inst_103832 = (state_104084[(10)]);
var inst_104077 = (state_104084[(2)]);
var inst_104078 = cljs.core.deref(inst_103832);
var state_104084__$1 = (function (){var statearr_104174 = state_104084;
(statearr_104174[(21)] = inst_104077);

return statearr_104174;
})();
return cljs.core.async.impl.ioc_helpers.return_chan(state_104084__$1,inst_104078);
} else {
if((state_val_104085 === (6))){
var _ = (function (){var statearr_104176 = state_104084;
(statearr_104176[(4)] = cljs.core.cons((9),(state_104084[(4)])));

return statearr_104176;
})();
var inst_103869 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_103870 = cljs.core.PersistentHashMap.EMPTY;
var inst_103871 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_103870);
var inst_103872 = ["(+ 1 2)",inst_103871];
var inst_103873 = cljs.core.PersistentHashMap.fromArrays(inst_103869,inst_103872);
var inst_103874 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_103873);
var inst_103875 = cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null));
var inst_103876 = (3);
var inst_103877 = matcher_combinators.core.match((3),inst_103874);
var inst_103878 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_103874], 0));
var inst_103879 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_103877);
var inst_103880 = matcher_combinators.printer.as_string(inst_103879);
var inst_103881 = [inst_103878,"\n\nMismatch:\n",inst_103880].join('');
var inst_103882 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_103877);
var inst_103883 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_103882);
var inst_103884 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_104084__$1 = (function (){var statearr_104177 = state_104084;
(statearr_104177[(22)] = inst_103884);

(statearr_104177[(23)] = inst_103876);

(statearr_104177[(24)] = inst_103881);

(statearr_104177[(25)] = inst_103875);

return statearr_104177;
})();
if(inst_103883){
var statearr_104180_110155 = state_104084__$1;
(statearr_104180_110155[(1)] = (10));

} else {
var statearr_104181_110156 = state_104084__$1;
(statearr_104181_110156[(1)] = (11));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (28))){
var _ = (function (){var statearr_104182 = state_104084;
(statearr_104182[(4)] = cljs.core.cons((30),(state_104084[(4)])));

return statearr_104182;
})();
var ___$1 = (function (){var statearr_104183 = state_104084;
(statearr_104183[(4)] = cljs.core.cons((31),(state_104084[(4)])));

return statearr_104183;
})();
var state_104084__$1 = state_104084;
var statearr_104185_110157 = state_104084__$1;
(statearr_104185_110157[(2)] = null);

(statearr_104185_110157[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (25))){
var state_104084__$1 = state_104084;
var statearr_104188_110158 = state_104084__$1;
(statearr_104188_110158[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_104188_110158[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (34))){
var inst_104006 = (state_104084[(2)]);
var inst_104007 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_104009 = check.core.normalize_error(inst_104006);
var inst_104010 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b 2] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_104011 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_104012 = (3);
var inst_104013 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104010)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104011)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104012)].join('');
var inst_104014 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_104009,inst_104013];
var inst_104015 = cljs.core.PersistentHashMap.fromArrays(inst_104007,inst_104014);
var inst_104016 = cljs.test.do_report(inst_104015);
var state_104084__$1 = state_104084;
var statearr_104192_110159 = state_104084__$1;
(statearr_104192_110159[(2)] = inst_104016);

(statearr_104192_110159[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (17))){
var _ = (function (){var statearr_104195 = state_104084;
(statearr_104195[(4)] = cljs.core.cons((20),(state_104084[(4)])));

return statearr_104195;
})();
var inst_103932 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_103933 = cljs.core.PersistentHashMap.EMPTY;
var inst_103934 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_103933);
var inst_103935 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_103934];
var inst_103936 = cljs.core.PersistentHashMap.fromArrays(inst_103932,inst_103935);
var inst_103937 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_103936);
var inst_103938 = (inst_103937 instanceof Promise);
var state_104084__$1 = state_104084;
if(cljs.core.truth_(inst_103938)){
var statearr_104197_110160 = state_104084__$1;
(statearr_104197_110160[(1)] = (22));

} else {
var statearr_104198_110161 = state_104084__$1;
(statearr_104198_110161[(1)] = (23));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (3))){
var inst_103898 = (state_104084[(2)]);
var inst_103899 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_103900 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_103901 = (new cljs.core.PersistentVector(null,1,(5),inst_103899,inst_103900,null));
var inst_103902 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_103901,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["resolves promises with p/let"], 0));
var state_104084__$1 = (function (){var statearr_104201 = state_104084;
(statearr_104201[(26)] = inst_103902);

(statearr_104201[(27)] = inst_103898);

return statearr_104201;
})();
var statearr_104203_110162 = state_104084__$1;
(statearr_104203_110162[(2)] = null);

(statearr_104203_110162[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (12))){
var inst_103884 = (state_104084[(22)]);
var inst_103876 = (state_104084[(23)]);
var inst_103881 = (state_104084[(24)]);
var inst_103888 = (state_104084[(2)]);
var inst_103889 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_103881);
var inst_103890 = [inst_103888,inst_103876,inst_103889];
var inst_103891 = cljs.core.PersistentHashMap.fromArrays(inst_103884,inst_103890);
var inst_103892 = cljs.test.do_report(inst_103891);
var _ = (function (){var statearr_104207 = state_104084;
(statearr_104207[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104207;
})();
var state_104084__$1 = state_104084;
var statearr_104209_110163 = state_104084__$1;
(statearr_104209_110163[(2)] = inst_103892);

(statearr_104209_110163[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (2))){
var _ = (function (){var statearr_104212 = state_104084;
(statearr_104212[(4)] = cljs.core.cons((4),(state_104084[(4)])));

return statearr_104212;
})();
var ___$1 = (function (){var statearr_104214 = state_104084;
(statearr_104214[(4)] = cljs.core.cons((5),(state_104084[(4)])));

return statearr_104214;
})();
var state_104084__$1 = state_104084;
var statearr_104216_110164 = state_104084__$1;
(statearr_104216_110164[(2)] = null);

(statearr_104216_110164[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (23))){
var inst_103950 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_103952 = cljs.core.PersistentHashMap.EMPTY;
var inst_103953 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_103952);
var inst_103954 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_103953];
var inst_103955 = cljs.core.PersistentHashMap.fromArrays(inst_103950,inst_103954);
var inst_103956 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_103955);
var state_104084__$1 = state_104084;
var statearr_104218_110165 = state_104084__$1;
(statearr_104218_110165[(2)] = inst_103956);

(statearr_104218_110165[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (35))){
var _ = (function (){var statearr_104219 = state_104084;
(statearr_104219[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104219;
})();
var state_104084__$1 = state_104084;
var ex104210 = (state_104084__$1[(2)]);
var statearr_104222_110166 = state_104084__$1;
(statearr_104222_110166[(5)] = ex104210);


var statearr_104223_110167 = state_104084__$1;
(statearr_104223_110167[(1)] = (34));

(statearr_104223_110167[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (19))){
var inst_103917 = (state_104084[(2)]);
var inst_103918 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_103919 = check.core.normalize_error(inst_103917);
var inst_103920 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b (promise 2)] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_103921 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_103922 = (3);
var inst_103923 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_103920)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_103921)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_103922)].join('');
var inst_103924 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_103919,inst_103923];
var inst_103925 = cljs.core.PersistentHashMap.fromArrays(inst_103918,inst_103924);
var inst_103926 = cljs.test.do_report(inst_103925);
var state_104084__$1 = state_104084;
var statearr_104228_110168 = state_104084__$1;
(statearr_104228_110168[(2)] = inst_103926);

(statearr_104228_110168[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (11))){
var state_104084__$1 = state_104084;
var statearr_104230_110169 = state_104084__$1;
(statearr_104230_110169[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_104230_110169[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (9))){
var _ = (function (){var statearr_104231 = state_104084;
(statearr_104231[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104231;
})();
var state_104084__$1 = state_104084;
var ex104224 = (state_104084__$1[(2)]);
var statearr_104232_110170 = state_104084__$1;
(statearr_104232_110170[(5)] = ex104224);


var statearr_104233_110171 = state_104084__$1;
(statearr_104233_110171[(1)] = (8));

(statearr_104233_110171[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (5))){
var _ = (function (){var statearr_104234 = state_104084;
(statearr_104234[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104234;
})();
var state_104084__$1 = state_104084;
var ex104229 = (state_104084__$1[(2)]);
var statearr_104235_110172 = state_104084__$1;
(statearr_104235_110172[(5)] = ex104229);


throw ex104229;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (14))){
var inst_103986 = (state_104084[(2)]);
var inst_103988 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_103989 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_103990 = (new cljs.core.PersistentVector(null,1,(5),inst_103988,inst_103989,null));
var inst_103991 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_103990,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["resolves mixed promises / non-promises"], 0));
var state_104084__$1 = (function (){var statearr_104239 = state_104084;
(statearr_104239[(28)] = inst_103986);

(statearr_104239[(29)] = inst_103991);

return statearr_104239;
})();
var statearr_104240_110173 = state_104084__$1;
(statearr_104240_110173[(2)] = null);

(statearr_104240_110173[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (26))){
var state_104084__$1 = state_104084;
var statearr_104242_110174 = state_104084__$1;
(statearr_104242_110174[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_104242_110174[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (16))){
var _ = (function (){var statearr_104243 = state_104084;
(statearr_104243[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104243;
})();
var state_104084__$1 = state_104084;
var ex104236 = (state_104084__$1[(2)]);
var statearr_104245_110175 = state_104084__$1;
(statearr_104245_110175[(5)] = ex104236);


throw ex104236;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (38))){
var inst_104043 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104044 = cljs.core.PersistentHashMap.EMPTY;
var inst_104045 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104044);
var inst_104046 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_104045];
var inst_104047 = cljs.core.PersistentHashMap.fromArrays(inst_104043,inst_104046);
var inst_104048 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104047);
var state_104084__$1 = state_104084;
var statearr_104247_110176 = state_104084__$1;
(statearr_104247_110176[(2)] = inst_104048);

(statearr_104247_110176[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (30))){
var _ = (function (){var statearr_104251 = state_104084;
(statearr_104251[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104251;
})();
var inst_103993 = (state_104084[(2)]);
var inst_103994 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_103995 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_103996 = (new cljs.core.PersistentVector(null,1,(5),inst_103994,inst_103995,null));
var inst_103997 = cljs.test.update_current_env_BANG_(inst_103996,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_104084[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_104084__$1 = (function (){var statearr_104266 = state_104084;
(statearr_104266[(30)] = inst_103997);

return statearr_104266;
})();
var statearr_104267_110177 = state_104084__$1;
(statearr_104267_110177[(2)] = inst_103993);

(statearr_104267_110177[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (10))){
var state_104084__$1 = state_104084;
var statearr_104270_110178 = state_104084__$1;
(statearr_104270_110178[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_104270_110178[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (18))){
var inst_103983 = (state_104084[(2)]);
var _ = (function (){var statearr_104271 = state_104084;
(statearr_104271[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104271;
})();
var state_104084__$1 = state_104084;
var statearr_104272_110179 = state_104084__$1;
(statearr_104272_110179[(2)] = inst_103983);

(statearr_104272_110179[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (42))){
var inst_104063 = (state_104084[(18)]);
var inst_104060 = (state_104084[(19)]);
var inst_104055 = (state_104084[(20)]);
var inst_104067 = (state_104084[(2)]);
var inst_104068 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_104060);
var inst_104069 = [inst_104067,inst_104055,inst_104068];
var inst_104070 = cljs.core.PersistentHashMap.fromArrays(inst_104063,inst_104069);
var inst_104071 = cljs.test.do_report(inst_104070);
var _ = (function (){var statearr_104276 = state_104084;
(statearr_104276[(4)] = cljs.core.rest((state_104084[(4)])));

return statearr_104276;
})();
var state_104084__$1 = state_104084;
var statearr_104277_110180 = state_104084__$1;
(statearr_104277_110180[(2)] = inst_104071);

(statearr_104277_110180[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (37))){
var inst_103832 = (state_104084[(10)]);
var inst_104031 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_104032 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104034 = cljs.core.PersistentHashMap.EMPTY;
var inst_104035 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104034);
var inst_104036 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_104035];
var inst_104037 = cljs.core.PersistentHashMap.fromArrays(inst_104032,inst_104036);
var inst_104038 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104037);
var inst_104039 = (function (){var mark_as_done__53963__auto__ = inst_103832;
var chan__53977__auto__ = inst_104031;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_104040 = inst_104038.then(inst_104039);
var state_104084__$1 = (function (){var statearr_104279 = state_104084;
(statearr_104279[(31)] = inst_104040);

return statearr_104279;
})();
var statearr_104281_110181 = state_104084__$1;
(statearr_104281_110181[(2)] = inst_104031);

(statearr_104281_110181[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104085 === (8))){
var inst_103854 = (state_104084[(2)]);
var inst_103855 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_103856 = check.core.normalize_error(inst_103854);
var inst_103857 = cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null));
var inst_103858 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_103859 = (3);
var inst_103860 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_103857)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_103858)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_103859)].join('');
var inst_103861 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_103856,inst_103860];
var inst_103862 = cljs.core.PersistentHashMap.fromArrays(inst_103855,inst_103861);
var inst_103863 = cljs.test.do_report(inst_103862);
var state_104084__$1 = state_104084;
var statearr_104283_110182 = state_104084__$1;
(statearr_104283_110182[(2)] = inst_103863);

(statearr_104283_110182[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});
return (function() {
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = null;
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0 = (function (){
var statearr_104325 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_104325[(0)] = repl_tooling$editor_integration$configs_test$state_machine__34940__auto__);

(statearr_104325[(1)] = (1));

return statearr_104325;
});
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1 = (function (state_104084){
while(true){
var ret_value__34941__auto__ = (function (){try{while(true){
var result__34942__auto__ = switch__34939__auto__(state_104084);
if(cljs.core.keyword_identical_QMARK_(result__34942__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
continue;
} else {
return result__34942__auto__;
}
break;
}
}catch (e104326){var ex__34943__auto__ = e104326;
var statearr_104327_110183 = state_104084;
(statearr_104327_110183[(2)] = ex__34943__auto__);


if(cljs.core.seq((state_104084[(4)]))){
var statearr_104329_110184 = state_104084;
(statearr_104329_110184[(1)] = cljs.core.first((state_104084[(4)])));

} else {
throw ex__34943__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
}})();
if(cljs.core.keyword_identical_QMARK_(ret_value__34941__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
var G__110185 = state_104084;
state_104084 = G__110185;
continue;
} else {
return ret_value__34941__auto__;
}
break;
}
});
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = function(state_104084){
switch(arguments.length){
case 0:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0.call(this);
case 1:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1.call(this,state_104084);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$0 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0;
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$1 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1;
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto__;
})()
})();
var state__35943__auto__ = (function (){var statearr_104331 = f__35942__auto__();
(statearr_104331[(6)] = c__35941__auto__);

return statearr_104331;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__35943__auto__);
}));

return c__35941__auto__;
}finally {cljs.test.update_current_env_BANG_(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.rest);
}}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.prototype.apply = (function (self__,args103824){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone(args103824)));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done__53962__auto__){
var self__ = this;
var ___9200__auto__ = this;
cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["evaluating code"], 0));

try{var c__35941__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));
cljs.core.async.impl.dispatch.run((function (){
var f__35942__auto__ = (function (){var switch__34939__auto__ = (function (state_104582){
var state_val_104586 = (state_104582[(1)]);
if((state_val_104586 === (7))){
var inst_104401 = (state_104582[(2)]);
var _ = (function (){var statearr_105031 = state_104582;
(statearr_105031[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105031;
})();
var state_104582__$1 = state_104582;
var statearr_105032_110186 = state_104582__$1;
(statearr_105032_110186[(2)] = inst_104401);

(statearr_105032_110186[(1)] = (4));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (20))){
var _ = (function (){var statearr_105033 = state_104582;
(statearr_105033[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105033;
})();
var state_104582__$1 = state_104582;
var ex104588 = (state_104582__$1[(2)]);
var statearr_105034_110187 = state_104582__$1;
(statearr_105034_110187[(5)] = ex104588);


var statearr_105036_110188 = state_104582__$1;
(statearr_105036_110188[(1)] = (19));

(statearr_105036_110188[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (27))){
var inst_104475 = (state_104582[(7)]);
var inst_104472 = (state_104582[(8)]);
var inst_104467 = (state_104582[(9)]);
var inst_104479 = (state_104582[(2)]);
var inst_104480 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_104472);
var inst_104481 = [inst_104479,inst_104467,inst_104480];
var inst_104482 = cljs.core.PersistentHashMap.fromArrays(inst_104475,inst_104481);
var inst_104483 = cljs.test.do_report(inst_104482);
var _ = (function (){var statearr_105038 = state_104582;
(statearr_105038[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105038;
})();
var state_104582__$1 = state_104582;
var statearr_105039_110189 = state_104582__$1;
(statearr_105039_110189[(2)] = inst_104483);

(statearr_105039_110189[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (1))){
var inst_104336 = (state_104582[(10)]);
var inst_104335 = (function (){return (function (){

return (done__53962__auto__.cljs$core$IFn$_invoke$arity$0 ? done__53962__auto__.cljs$core$IFn$_invoke$arity$0() : done__53962__auto__.call(null));
});
})();
var inst_104336__$1 = (new cljs.core.Delay(inst_104335,null));
var inst_104337 = (function (){var mark_as_done__53963__auto__ = inst_104336__$1;
return (function (){
if(cljs.core.realized_QMARK_(mark_as_done__53963__auto__)){
return null;
} else {
try{var value__9156__auto___110190 = (function(){throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)})();
if(cljs.core.truth_(value__9156__auto___110190)){
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"pass","pass",1574159993),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110190,null]));
} else {
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"fail","fail",1706214930),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110190,null]));
}

}catch (e105047){var t__9189__auto___110191 = e105047;
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"error","error",-978969032),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,t__9189__auto___110191,null]));
}
return cljs.core.deref(mark_as_done__53963__auto__);
}
});
})();
var inst_104338 = setTimeout(inst_104337,(3000));
var inst_104339 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_104340 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_104341 = (new cljs.core.PersistentVector(null,1,(5),inst_104339,inst_104340,null));
var inst_104342 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_104341,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["evaluates simple code"], 0));
var state_104582__$1 = (function (){var statearr_105049 = state_104582;
(statearr_105049[(11)] = inst_104338);

(statearr_105049[(10)] = inst_104336__$1);

(statearr_105049[(12)] = inst_104342);

return statearr_105049;
})();
var statearr_105051_110192 = state_104582__$1;
(statearr_105051_110192[(2)] = null);

(statearr_105051_110192[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (24))){
var inst_104463 = (state_104582[(2)]);
var state_104582__$1 = state_104582;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_104582__$1,(21),inst_104463);
} else {
if((state_val_104586 === (39))){
var inst_104551 = (state_104582[(2)]);
var state_104582__$1 = state_104582;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_104582__$1,(36),inst_104551);
} else {
if((state_val_104586 === (4))){
var _ = (function (){var statearr_105054 = state_104582;
(statearr_105054[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105054;
})();
var inst_104344 = (state_104582[(2)]);
var inst_104345 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_104346 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_104347 = (new cljs.core.PersistentVector(null,1,(5),inst_104345,inst_104346,null));
var inst_104348 = cljs.test.update_current_env_BANG_(inst_104347,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_104582[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_104582__$1 = (function (){var statearr_105060 = state_104582;
(statearr_105060[(13)] = inst_104348);

return statearr_105060;
})();
var statearr_105061_110193 = state_104582__$1;
(statearr_105061_110193[(2)] = inst_104344);

(statearr_105061_110193[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (15))){
var _ = (function (){var statearr_105063 = state_104582;
(statearr_105063[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105063;
})();
var inst_104410 = (state_104582[(2)]);
var inst_104411 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_104412 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_104413 = (new cljs.core.PersistentVector(null,1,(5),inst_104411,inst_104412,null));
var inst_104414 = cljs.test.update_current_env_BANG_(inst_104413,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_104582[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_104582__$1 = (function (){var statearr_105066 = state_104582;
(statearr_105066[(14)] = inst_104414);

return statearr_105066;
})();
var statearr_105068_110194 = state_104582__$1;
(statearr_105068_110194[(2)] = inst_104410);

(statearr_105068_110194[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (21))){
var inst_104465 = (state_104582[(2)]);
var inst_104466 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b (promise 2)] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_104467 = (3);
var inst_104468 = matcher_combinators.core.match((3),inst_104465);
var inst_104469 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_104465], 0));
var inst_104470 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_104468);
var inst_104471 = matcher_combinators.printer.as_string(inst_104470);
var inst_104472 = [inst_104469,"\n\nMismatch:\n",inst_104471].join('');
var inst_104473 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_104468);
var inst_104474 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_104473);
var inst_104475 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_104582__$1 = (function (){var statearr_105070 = state_104582;
(statearr_105070[(7)] = inst_104475);

(statearr_105070[(8)] = inst_104472);

(statearr_105070[(9)] = inst_104467);

(statearr_105070[(15)] = inst_104466);

return statearr_105070;
})();
if(inst_104474){
var statearr_105071_110195 = state_104582__$1;
(statearr_105071_110195[(1)] = (25));

} else {
var statearr_105072_110196 = state_104582__$1;
(statearr_105072_110196[(1)] = (26));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (31))){
var _ = (function (){var statearr_105074 = state_104582;
(statearr_105074[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105074;
})();
var state_104582__$1 = state_104582;
var ex105062 = (state_104582__$1[(2)]);
var statearr_105076_110197 = state_104582__$1;
(statearr_105076_110197[(5)] = ex105062);


throw ex105062;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (32))){
var _ = (function (){var statearr_105078 = state_104582;
(statearr_105078[(4)] = cljs.core.cons((35),(state_104582[(4)])));

return statearr_105078;
})();
var inst_104525 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104526 = cljs.core.PersistentHashMap.EMPTY;
var inst_104527 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104526);
var inst_104528 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_104527];
var inst_104529 = cljs.core.PersistentHashMap.fromArrays(inst_104525,inst_104528);
var inst_104530 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104529);
var inst_104531 = (inst_104530 instanceof Promise);
var state_104582__$1 = state_104582;
if(cljs.core.truth_(inst_104531)){
var statearr_105082_110198 = state_104582__$1;
(statearr_105082_110198[(1)] = (37));

} else {
var statearr_105083_110199 = state_104582__$1;
(statearr_105083_110199[(1)] = (38));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (40))){
var state_104582__$1 = state_104582;
var statearr_105085_110200 = state_104582__$1;
(statearr_105085_110200[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_105085_110200[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (33))){
var inst_104574 = (state_104582[(2)]);
var _ = (function (){var statearr_105086 = state_104582;
(statearr_105086[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105086;
})();
var state_104582__$1 = state_104582;
var statearr_105088_110201 = state_104582__$1;
(statearr_105088_110201[(2)] = inst_104574);

(statearr_105088_110201[(1)] = (30));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (13))){
var _ = (function (){var statearr_105146 = state_104582;
(statearr_105146[(4)] = cljs.core.cons((15),(state_104582[(4)])));

return statearr_105146;
})();
var ___$1 = (function (){var statearr_105147 = state_104582;
(statearr_105147[(4)] = cljs.core.cons((16),(state_104582[(4)])));

return statearr_105147;
})();
var state_104582__$1 = state_104582;
var statearr_105148_110202 = state_104582__$1;
(statearr_105148_110202[(2)] = null);

(statearr_105148_110202[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (22))){
var inst_104336 = (state_104582[(10)]);
var inst_104446 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_104447 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104448 = cljs.core.PersistentHashMap.EMPTY;
var inst_104449 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104448);
var inst_104450 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_104449];
var inst_104451 = cljs.core.PersistentHashMap.fromArrays(inst_104447,inst_104450);
var inst_104452 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104451);
var inst_104453 = (function (){var mark_as_done__53963__auto__ = inst_104336;
var chan__53977__auto__ = inst_104446;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_104454 = inst_104452.then(inst_104453);
var state_104582__$1 = (function (){var statearr_105151 = state_104582;
(statearr_105151[(16)] = inst_104454);

return statearr_105151;
})();
var statearr_105152_110203 = state_104582__$1;
(statearr_105152_110203[(2)] = inst_104446);

(statearr_105152_110203[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (36))){
var inst_104553 = (state_104582[(2)]);
var inst_104554 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b 2] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_104555 = (3);
var inst_104556 = matcher_combinators.core.match((3),inst_104553);
var inst_104557 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_104553], 0));
var inst_104558 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_104556);
var inst_104559 = matcher_combinators.printer.as_string(inst_104558);
var inst_104560 = [inst_104557,"\n\nMismatch:\n",inst_104559].join('');
var inst_104561 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_104556);
var inst_104562 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_104561);
var inst_104563 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_104582__$1 = (function (){var statearr_105156 = state_104582;
(statearr_105156[(17)] = inst_104563);

(statearr_105156[(18)] = inst_104560);

(statearr_105156[(19)] = inst_104555);

(statearr_105156[(20)] = inst_104554);

return statearr_105156;
})();
if(inst_104562){
var statearr_105157_110204 = state_104582__$1;
(statearr_105157_110204[(1)] = (40));

} else {
var statearr_105159_110205 = state_104582__$1;
(statearr_105159_110205[(1)] = (41));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (41))){
var state_104582__$1 = state_104582;
var statearr_105161_110206 = state_104582__$1;
(statearr_105161_110206[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_105161_110206[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (29))){
var inst_104336 = (state_104582[(10)]);
var inst_104577 = (state_104582[(2)]);
var inst_104578 = cljs.core.deref(inst_104336);
var state_104582__$1 = (function (){var statearr_105165 = state_104582;
(statearr_105165[(21)] = inst_104577);

return statearr_105165;
})();
return cljs.core.async.impl.ioc_helpers.return_chan(state_104582__$1,inst_104578);
} else {
if((state_val_104586 === (6))){
var _ = (function (){var statearr_105173 = state_104582;
(statearr_105173[(4)] = cljs.core.cons((9),(state_104582[(4)])));

return statearr_105173;
})();
var inst_104372 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104373 = cljs.core.PersistentHashMap.EMPTY;
var inst_104374 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104373);
var inst_104375 = ["(+ 1 2)",inst_104374];
var inst_104376 = cljs.core.PersistentHashMap.fromArrays(inst_104372,inst_104375);
var inst_104377 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104376);
var inst_104378 = cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null));
var inst_104379 = (3);
var inst_104380 = matcher_combinators.core.match((3),inst_104377);
var inst_104383 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_104377], 0));
var inst_104384 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_104380);
var inst_104385 = matcher_combinators.printer.as_string(inst_104384);
var inst_104386 = [inst_104383,"\n\nMismatch:\n",inst_104385].join('');
var inst_104387 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_104380);
var inst_104388 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_104387);
var inst_104390 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_104582__$1 = (function (){var statearr_105177 = state_104582;
(statearr_105177[(22)] = inst_104378);

(statearr_105177[(23)] = inst_104379);

(statearr_105177[(24)] = inst_104390);

(statearr_105177[(25)] = inst_104386);

return statearr_105177;
})();
if(inst_104388){
var statearr_105179_110207 = state_104582__$1;
(statearr_105179_110207[(1)] = (10));

} else {
var statearr_105180_110208 = state_104582__$1;
(statearr_105180_110208[(1)] = (11));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (28))){
var _ = (function (){var statearr_105182 = state_104582;
(statearr_105182[(4)] = cljs.core.cons((30),(state_104582[(4)])));

return statearr_105182;
})();
var ___$1 = (function (){var statearr_105183 = state_104582;
(statearr_105183[(4)] = cljs.core.cons((31),(state_104582[(4)])));

return statearr_105183;
})();
var state_104582__$1 = state_104582;
var statearr_105184_110209 = state_104582__$1;
(statearr_105184_110209[(2)] = null);

(statearr_105184_110209[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (25))){
var state_104582__$1 = state_104582;
var statearr_105187_110210 = state_104582__$1;
(statearr_105187_110210[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_105187_110210[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (34))){
var inst_104507 = (state_104582[(2)]);
var inst_104508 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_104509 = check.core.normalize_error(inst_104507);
var inst_104513 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b 2] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_104514 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_104515 = (3);
var inst_104516 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104513)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104514)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104515)].join('');
var inst_104517 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_104509,inst_104516];
var inst_104518 = cljs.core.PersistentHashMap.fromArrays(inst_104508,inst_104517);
var inst_104519 = cljs.test.do_report(inst_104518);
var state_104582__$1 = state_104582;
var statearr_105191_110211 = state_104582__$1;
(statearr_105191_110211[(2)] = inst_104519);

(statearr_105191_110211[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (17))){
var _ = (function (){var statearr_105192 = state_104582;
(statearr_105192[(4)] = cljs.core.cons((20),(state_104582[(4)])));

return statearr_105192;
})();
var inst_104438 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104439 = cljs.core.PersistentHashMap.EMPTY;
var inst_104440 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104439);
var inst_104441 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_104440];
var inst_104442 = cljs.core.PersistentHashMap.fromArrays(inst_104438,inst_104441);
var inst_104443 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104442);
var inst_104444 = (inst_104443 instanceof Promise);
var state_104582__$1 = state_104582;
if(cljs.core.truth_(inst_104444)){
var statearr_105193_110212 = state_104582__$1;
(statearr_105193_110212[(1)] = (22));

} else {
var statearr_105194_110213 = state_104582__$1;
(statearr_105194_110213[(1)] = (23));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (3))){
var inst_104404 = (state_104582[(2)]);
var inst_104405 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_104406 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_104407 = (new cljs.core.PersistentVector(null,1,(5),inst_104405,inst_104406,null));
var inst_104408 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_104407,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["resolves promises with p/let"], 0));
var state_104582__$1 = (function (){var statearr_105197 = state_104582;
(statearr_105197[(26)] = inst_104404);

(statearr_105197[(27)] = inst_104408);

return statearr_105197;
})();
var statearr_105198_110214 = state_104582__$1;
(statearr_105198_110214[(2)] = null);

(statearr_105198_110214[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (12))){
var inst_104379 = (state_104582[(23)]);
var inst_104390 = (state_104582[(24)]);
var inst_104386 = (state_104582[(25)]);
var inst_104394 = (state_104582[(2)]);
var inst_104395 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_104386);
var inst_104396 = [inst_104394,inst_104379,inst_104395];
var inst_104397 = cljs.core.PersistentHashMap.fromArrays(inst_104390,inst_104396);
var inst_104398 = cljs.test.do_report(inst_104397);
var _ = (function (){var statearr_105201 = state_104582;
(statearr_105201[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105201;
})();
var state_104582__$1 = state_104582;
var statearr_105203_110215 = state_104582__$1;
(statearr_105203_110215[(2)] = inst_104398);

(statearr_105203_110215[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (2))){
var _ = (function (){var statearr_105205 = state_104582;
(statearr_105205[(4)] = cljs.core.cons((4),(state_104582[(4)])));

return statearr_105205;
})();
var ___$1 = (function (){var statearr_105206 = state_104582;
(statearr_105206[(4)] = cljs.core.cons((5),(state_104582[(4)])));

return statearr_105206;
})();
var state_104582__$1 = state_104582;
var statearr_105208_110216 = state_104582__$1;
(statearr_105208_110216[(2)] = null);

(statearr_105208_110216[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (23))){
var inst_104456 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104457 = cljs.core.PersistentHashMap.EMPTY;
var inst_104458 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104457);
var inst_104459 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_104458];
var inst_104460 = cljs.core.PersistentHashMap.fromArrays(inst_104456,inst_104459);
var inst_104461 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104460);
var state_104582__$1 = state_104582;
var statearr_105212_110217 = state_104582__$1;
(statearr_105212_110217[(2)] = inst_104461);

(statearr_105212_110217[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (35))){
var _ = (function (){var statearr_105214 = state_104582;
(statearr_105214[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105214;
})();
var state_104582__$1 = state_104582;
var ex105204 = (state_104582__$1[(2)]);
var statearr_105217_110218 = state_104582__$1;
(statearr_105217_110218[(5)] = ex105204);


var statearr_105219_110219 = state_104582__$1;
(statearr_105219_110219[(1)] = (34));

(statearr_105219_110219[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (19))){
var inst_104422 = (state_104582[(2)]);
var inst_104424 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_104425 = check.core.normalize_error(inst_104422);
var inst_104426 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b (promise 2)] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_104427 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_104428 = (3);
var inst_104429 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104426)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104427)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104428)].join('');
var inst_104430 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_104425,inst_104429];
var inst_104431 = cljs.core.PersistentHashMap.fromArrays(inst_104424,inst_104430);
var inst_104432 = cljs.test.do_report(inst_104431);
var state_104582__$1 = state_104582;
var statearr_105225_110220 = state_104582__$1;
(statearr_105225_110220[(2)] = inst_104432);

(statearr_105225_110220[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (11))){
var state_104582__$1 = state_104582;
var statearr_105228_110221 = state_104582__$1;
(statearr_105228_110221[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_105228_110221[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (9))){
var _ = (function (){var statearr_105230 = state_104582;
(statearr_105230[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105230;
})();
var state_104582__$1 = state_104582;
var ex105221 = (state_104582__$1[(2)]);
var statearr_105232_110222 = state_104582__$1;
(statearr_105232_110222[(5)] = ex105221);


var statearr_105233_110223 = state_104582__$1;
(statearr_105233_110223[(1)] = (8));

(statearr_105233_110223[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (5))){
var _ = (function (){var statearr_105240 = state_104582;
(statearr_105240[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105240;
})();
var state_104582__$1 = state_104582;
var ex105226 = (state_104582__$1[(2)]);
var statearr_105242_110224 = state_104582__$1;
(statearr_105242_110224[(5)] = ex105226);


throw ex105226;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (14))){
var inst_104489 = (state_104582[(2)]);
var inst_104490 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_104491 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_104492 = (new cljs.core.PersistentVector(null,1,(5),inst_104490,inst_104491,null));
var inst_104493 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_104492,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["resolves mixed promises / non-promises"], 0));
var state_104582__$1 = (function (){var statearr_105245 = state_104582;
(statearr_105245[(28)] = inst_104489);

(statearr_105245[(29)] = inst_104493);

return statearr_105245;
})();
var statearr_105246_110225 = state_104582__$1;
(statearr_105246_110225[(2)] = null);

(statearr_105246_110225[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (26))){
var state_104582__$1 = state_104582;
var statearr_105248_110226 = state_104582__$1;
(statearr_105248_110226[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_105248_110226[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (16))){
var _ = (function (){var statearr_105250 = state_104582;
(statearr_105250[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105250;
})();
var state_104582__$1 = state_104582;
var ex105243 = (state_104582__$1[(2)]);
var statearr_105251_110227 = state_104582__$1;
(statearr_105251_110227[(5)] = ex105243);


throw ex105243;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (38))){
var inst_104544 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104545 = cljs.core.PersistentHashMap.EMPTY;
var inst_104546 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104545);
var inst_104547 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_104546];
var inst_104548 = cljs.core.PersistentHashMap.fromArrays(inst_104544,inst_104547);
var inst_104549 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104548);
var state_104582__$1 = state_104582;
var statearr_105254_110228 = state_104582__$1;
(statearr_105254_110228[(2)] = inst_104549);

(statearr_105254_110228[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (30))){
var _ = (function (){var statearr_105256 = state_104582;
(statearr_105256[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105256;
})();
var inst_104495 = (state_104582[(2)]);
var inst_104496 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_104497 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_104498 = (new cljs.core.PersistentVector(null,1,(5),inst_104496,inst_104497,null));
var inst_104499 = cljs.test.update_current_env_BANG_(inst_104498,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_104582[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_104582__$1 = (function (){var statearr_105260 = state_104582;
(statearr_105260[(30)] = inst_104499);

return statearr_105260;
})();
var statearr_105261_110229 = state_104582__$1;
(statearr_105261_110229[(2)] = inst_104495);

(statearr_105261_110229[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (10))){
var state_104582__$1 = state_104582;
var statearr_105262_110230 = state_104582__$1;
(statearr_105262_110230[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_105262_110230[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (18))){
var inst_104486 = (state_104582[(2)]);
var _ = (function (){var statearr_105264 = state_104582;
(statearr_105264[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105264;
})();
var state_104582__$1 = state_104582;
var statearr_105266_110231 = state_104582__$1;
(statearr_105266_110231[(2)] = inst_104486);

(statearr_105266_110231[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (42))){
var inst_104563 = (state_104582[(17)]);
var inst_104560 = (state_104582[(18)]);
var inst_104555 = (state_104582[(19)]);
var inst_104567 = (state_104582[(2)]);
var inst_104568 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_104560);
var inst_104569 = [inst_104567,inst_104555,inst_104568];
var inst_104570 = cljs.core.PersistentHashMap.fromArrays(inst_104563,inst_104569);
var inst_104571 = cljs.test.do_report(inst_104570);
var _ = (function (){var statearr_105269 = state_104582;
(statearr_105269[(4)] = cljs.core.rest((state_104582[(4)])));

return statearr_105269;
})();
var state_104582__$1 = state_104582;
var statearr_105270_110232 = state_104582__$1;
(statearr_105270_110232[(2)] = inst_104571);

(statearr_105270_110232[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (37))){
var inst_104336 = (state_104582[(10)]);
var inst_104534 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_104535 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_104536 = cljs.core.PersistentHashMap.EMPTY;
var inst_104537 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_104536);
var inst_104538 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_104537];
var inst_104539 = cljs.core.PersistentHashMap.fromArrays(inst_104535,inst_104538);
var inst_104540 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_104539);
var inst_104541 = (function (){var mark_as_done__53963__auto__ = inst_104336;
var chan__53977__auto__ = inst_104534;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_104542 = inst_104540.then(inst_104541);
var state_104582__$1 = (function (){var statearr_105272 = state_104582;
(statearr_105272[(31)] = inst_104542);

return statearr_105272;
})();
var statearr_105273_110233 = state_104582__$1;
(statearr_105273_110233[(2)] = inst_104534);

(statearr_105273_110233[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_104586 === (8))){
var inst_104356 = (state_104582[(2)]);
var inst_104357 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_104358 = check.core.normalize_error(inst_104356);
var inst_104359 = cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null));
var inst_104360 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_104361 = (3);
var inst_104363 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104359)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104360)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_104361)].join('');
var inst_104364 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_104358,inst_104363];
var inst_104365 = cljs.core.PersistentHashMap.fromArrays(inst_104357,inst_104364);
var inst_104366 = cljs.test.do_report(inst_104365);
var state_104582__$1 = state_104582;
var statearr_105277_110234 = state_104582__$1;
(statearr_105277_110234[(2)] = inst_104366);

(statearr_105277_110234[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});
return (function() {
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = null;
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0 = (function (){
var statearr_105280 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_105280[(0)] = repl_tooling$editor_integration$configs_test$state_machine__34940__auto__);

(statearr_105280[(1)] = (1));

return statearr_105280;
});
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1 = (function (state_104582){
while(true){
var ret_value__34941__auto__ = (function (){try{while(true){
var result__34942__auto__ = switch__34939__auto__(state_104582);
if(cljs.core.keyword_identical_QMARK_(result__34942__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
continue;
} else {
return result__34942__auto__;
}
break;
}
}catch (e105282){var ex__34943__auto__ = e105282;
var statearr_105283_110235 = state_104582;
(statearr_105283_110235[(2)] = ex__34943__auto__);


if(cljs.core.seq((state_104582[(4)]))){
var statearr_105284_110236 = state_104582;
(statearr_105284_110236[(1)] = cljs.core.first((state_104582[(4)])));

} else {
throw ex__34943__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
}})();
if(cljs.core.keyword_identical_QMARK_(ret_value__34941__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
var G__110237 = state_104582;
state_104582 = G__110237;
continue;
} else {
return ret_value__34941__auto__;
}
break;
}
});
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = function(state_104582){
switch(arguments.length){
case 0:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0.call(this);
case 1:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1.call(this,state_104582);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$0 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0;
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$1 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1;
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto__;
})()
})();
var state__35943__auto__ = (function (){var statearr_105287 = f__35942__auto__();
(statearr_105287[(6)] = c__35941__auto__);

return statearr_105287;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__35943__auto__);
}));

return c__35941__auto__;
}finally {cljs.test.update_current_env_BANG_(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.rest);
}}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta103822","meta103822",-500684126,null)], null);
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.cljs$lang$type = true);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.cljs$lang$ctorStr = "repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test103821");

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821.cljs$lang$ctorPrWriter = (function (this__4461__auto__,writer__4462__auto__,opt__4463__auto__){
return cljs.core._write(writer__4462__auto__,"repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test103821");
}));

/**
 * Positional factory function for repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test103821.
 */
repl_tooling.editor_integration.configs_test.__GT_t_repl_tooling$editor_integration$configs_test103821 = (function repl_tooling$editor_integration$configs_test$__GT_t_repl_tooling$editor_integration$configs_test103821(meta103822){
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821(meta103822));
});

}

return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test103821(null));
})], 0)),new cljs.core.Keyword(null,"initial-data","initial-data",-1315709804),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"options","options",99638489),cljs.core.PersistentArrayMap.EMPTY], null));
})], null));

repl_tooling.editor_integration.configs_test.config_eval = (function repl_tooling$editor_integration$configs_test$config_eval(){
return cljs.test.test_var(repl_tooling.editor_integration.configs_test.config_eval.cljs$lang$var);
});
repl_tooling.editor_integration.configs_test.config_eval.cljs$lang$test = (function (){
if((typeof repl_tooling !== 'undefined') && (typeof repl_tooling.editor_integration !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IFn}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IWithMeta}
*/
repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293 = (function (meta105294){
this.meta105294 = meta105294;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_105295,meta105294__$1){
var self__ = this;
var _105295__$1 = this;
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293(meta105294__$1));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_105295){
var self__ = this;
var _105295__$1 = this;
return self__.meta105294;
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.prototype.call = (function (self__,done__53962__auto__){
var self__ = this;
var self____$1 = this;
var ___9200__auto__ = self____$1;
cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["evaluating code"], 0));

try{var c__35941__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));
cljs.core.async.impl.dispatch.run((function (){
var f__35942__auto__ = (function (){var switch__34939__auto__ = (function (state_105559){
var state_val_105560 = (state_105559[(1)]);
if((state_val_105560 === (7))){
var inst_105372 = (state_105559[(2)]);
var _ = (function (){var statearr_105563 = state_105559;
(statearr_105563[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_105563;
})();
var state_105559__$1 = state_105559;
var statearr_105564_110238 = state_105559__$1;
(statearr_105564_110238[(2)] = inst_105372);

(statearr_105564_110238[(1)] = (4));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (20))){
var _ = (function (){var statearr_105565 = state_105559;
(statearr_105565[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_105565;
})();
var state_105559__$1 = state_105559;
var ex105561 = (state_105559__$1[(2)]);
var statearr_105566_110239 = state_105559__$1;
(statearr_105566_110239[(5)] = ex105561);


var statearr_105567_110240 = state_105559__$1;
(statearr_105567_110240[(1)] = (19));

(statearr_105567_110240[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (27))){
var inst_105443 = (state_105559[(7)]);
var inst_105448 = (state_105559[(8)]);
var inst_105451 = (state_105559[(9)]);
var inst_105455 = (state_105559[(2)]);
var inst_105456 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_105448);
var inst_105457 = [inst_105455,inst_105443,inst_105456];
var inst_105458 = cljs.core.PersistentHashMap.fromArrays(inst_105451,inst_105457);
var inst_105459 = cljs.test.do_report(inst_105458);
var _ = (function (){var statearr_106013 = state_105559;
(statearr_106013[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106013;
})();
var state_105559__$1 = state_105559;
var statearr_106014_110241 = state_105559__$1;
(statearr_106014_110241[(2)] = inst_105459);

(statearr_106014_110241[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (1))){
var inst_105306 = (state_105559[(10)]);
var inst_105305 = (function (){return (function (){

return (done__53962__auto__.cljs$core$IFn$_invoke$arity$0 ? done__53962__auto__.cljs$core$IFn$_invoke$arity$0() : done__53962__auto__.call(null));
});
})();
var inst_105306__$1 = (new cljs.core.Delay(inst_105305,null));
var inst_105307 = (function (){var mark_as_done__53963__auto__ = inst_105306__$1;
return (function (){
if(cljs.core.realized_QMARK_(mark_as_done__53963__auto__)){
return null;
} else {
try{var value__9156__auto___110242 = (function(){throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)})();
if(cljs.core.truth_(value__9156__auto___110242)){
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"pass","pass",1574159993),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110242,null]));
} else {
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"fail","fail",1706214930),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110242,null]));
}

}catch (e106015){var t__9189__auto___110243 = e106015;
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"error","error",-978969032),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,t__9189__auto___110243,null]));
}
return cljs.core.deref(mark_as_done__53963__auto__);
}
});
})();
var inst_105308 = setTimeout(inst_105307,(3000));
var inst_105309 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_105311 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_105312 = (new cljs.core.PersistentVector(null,1,(5),inst_105309,inst_105311,null));
var inst_105313 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_105312,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["evaluates simple code"], 0));
var state_105559__$1 = (function (){var statearr_106033 = state_105559;
(statearr_106033[(10)] = inst_105306__$1);

(statearr_106033[(11)] = inst_105308);

(statearr_106033[(12)] = inst_105313);

return statearr_106033;
})();
var statearr_106034_110244 = state_105559__$1;
(statearr_106034_110244[(2)] = null);

(statearr_106034_110244[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (24))){
var inst_105439 = (state_105559[(2)]);
var state_105559__$1 = state_105559;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_105559__$1,(21),inst_105439);
} else {
if((state_val_105560 === (39))){
var inst_105526 = (state_105559[(2)]);
var state_105559__$1 = state_105559;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_105559__$1,(36),inst_105526);
} else {
if((state_val_105560 === (4))){
var _ = (function (){var statearr_106035 = state_105559;
(statearr_106035[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106035;
})();
var inst_105315 = (state_105559[(2)]);
var inst_105316 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_105318 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_105319 = (new cljs.core.PersistentVector(null,1,(5),inst_105316,inst_105318,null));
var inst_105320 = cljs.test.update_current_env_BANG_(inst_105319,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_105559[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_105559__$1 = (function (){var statearr_106036 = state_105559;
(statearr_106036[(13)] = inst_105320);

return statearr_106036;
})();
var statearr_106037_110245 = state_105559__$1;
(statearr_106037_110245[(2)] = inst_105315);

(statearr_106037_110245[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (15))){
var _ = (function (){var statearr_106039 = state_105559;
(statearr_106039[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106039;
})();
var inst_105382 = (state_105559[(2)]);
var inst_105383 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_105384 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_105385 = (new cljs.core.PersistentVector(null,1,(5),inst_105383,inst_105384,null));
var inst_105386 = cljs.test.update_current_env_BANG_(inst_105385,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_105559[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_105559__$1 = (function (){var statearr_106040 = state_105559;
(statearr_106040[(14)] = inst_105386);

return statearr_106040;
})();
var statearr_106041_110246 = state_105559__$1;
(statearr_106041_110246[(2)] = inst_105382);

(statearr_106041_110246[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (21))){
var inst_105441 = (state_105559[(2)]);
var inst_105442 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b (promise 2)] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_105443 = (3);
var inst_105444 = matcher_combinators.core.match((3),inst_105441);
var inst_105445 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_105441], 0));
var inst_105446 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_105444);
var inst_105447 = matcher_combinators.printer.as_string(inst_105446);
var inst_105448 = [inst_105445,"\n\nMismatch:\n",inst_105447].join('');
var inst_105449 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_105444);
var inst_105450 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_105449);
var inst_105451 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_105559__$1 = (function (){var statearr_106045 = state_105559;
(statearr_106045[(7)] = inst_105443);

(statearr_106045[(8)] = inst_105448);

(statearr_106045[(9)] = inst_105451);

(statearr_106045[(15)] = inst_105442);

return statearr_106045;
})();
if(inst_105450){
var statearr_106047_110247 = state_105559__$1;
(statearr_106047_110247[(1)] = (25));

} else {
var statearr_106048_110248 = state_105559__$1;
(statearr_106048_110248[(1)] = (26));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (31))){
var _ = (function (){var statearr_106049 = state_105559;
(statearr_106049[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106049;
})();
var state_105559__$1 = state_105559;
var ex106038 = (state_105559__$1[(2)]);
var statearr_106052_110249 = state_105559__$1;
(statearr_106052_110249[(5)] = ex106038);


throw ex106038;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (32))){
var _ = (function (){var statearr_106053 = state_105559;
(statearr_106053[(4)] = cljs.core.cons((35),(state_105559[(4)])));

return statearr_106053;
})();
var inst_105501 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_105502 = cljs.core.PersistentHashMap.EMPTY;
var inst_105503 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_105502);
var inst_105504 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_105503];
var inst_105505 = cljs.core.PersistentHashMap.fromArrays(inst_105501,inst_105504);
var inst_105506 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_105505);
var inst_105507 = (inst_105506 instanceof Promise);
var state_105559__$1 = state_105559;
if(cljs.core.truth_(inst_105507)){
var statearr_106055_110250 = state_105559__$1;
(statearr_106055_110250[(1)] = (37));

} else {
var statearr_106056_110251 = state_105559__$1;
(statearr_106056_110251[(1)] = (38));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (40))){
var state_105559__$1 = state_105559;
var statearr_106057_110252 = state_105559__$1;
(statearr_106057_110252[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_106057_110252[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (33))){
var inst_105550 = (state_105559[(2)]);
var _ = (function (){var statearr_106058 = state_105559;
(statearr_106058[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106058;
})();
var state_105559__$1 = state_105559;
var statearr_106059_110253 = state_105559__$1;
(statearr_106059_110253[(2)] = inst_105550);

(statearr_106059_110253[(1)] = (30));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (13))){
var _ = (function (){var statearr_106060 = state_105559;
(statearr_106060[(4)] = cljs.core.cons((15),(state_105559[(4)])));

return statearr_106060;
})();
var ___$1 = (function (){var statearr_106062 = state_105559;
(statearr_106062[(4)] = cljs.core.cons((16),(state_105559[(4)])));

return statearr_106062;
})();
var state_105559__$1 = state_105559;
var statearr_106063_110254 = state_105559__$1;
(statearr_106063_110254[(2)] = null);

(statearr_106063_110254[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (22))){
var inst_105306 = (state_105559[(10)]);
var inst_105420 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_105422 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_105423 = cljs.core.PersistentHashMap.EMPTY;
var inst_105424 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_105423);
var inst_105425 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_105424];
var inst_105426 = cljs.core.PersistentHashMap.fromArrays(inst_105422,inst_105425);
var inst_105427 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_105426);
var inst_105428 = (function (){var mark_as_done__53963__auto__ = inst_105306;
var chan__53977__auto__ = inst_105420;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_105429 = inst_105427.then(inst_105428);
var state_105559__$1 = (function (){var statearr_106064 = state_105559;
(statearr_106064[(16)] = inst_105429);

return statearr_106064;
})();
var statearr_106065_110255 = state_105559__$1;
(statearr_106065_110255[(2)] = inst_105420);

(statearr_106065_110255[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (36))){
var inst_105528 = (state_105559[(2)]);
var inst_105529 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b 2] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_105530 = (3);
var inst_105531 = matcher_combinators.core.match((3),inst_105528);
var inst_105532 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_105528], 0));
var inst_105533 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_105531);
var inst_105534 = matcher_combinators.printer.as_string(inst_105533);
var inst_105535 = [inst_105532,"\n\nMismatch:\n",inst_105534].join('');
var inst_105536 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_105531);
var inst_105537 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_105536);
var inst_105538 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_105559__$1 = (function (){var statearr_106070 = state_105559;
(statearr_106070[(17)] = inst_105535);

(statearr_106070[(18)] = inst_105530);

(statearr_106070[(19)] = inst_105538);

(statearr_106070[(20)] = inst_105529);

return statearr_106070;
})();
if(inst_105537){
var statearr_106071_110256 = state_105559__$1;
(statearr_106071_110256[(1)] = (40));

} else {
var statearr_106072_110257 = state_105559__$1;
(statearr_106072_110257[(1)] = (41));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (41))){
var state_105559__$1 = state_105559;
var statearr_106073_110258 = state_105559__$1;
(statearr_106073_110258[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_106073_110258[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (29))){
var inst_105306 = (state_105559[(10)]);
var inst_105553 = (state_105559[(2)]);
var inst_105554 = cljs.core.deref(inst_105306);
var state_105559__$1 = (function (){var statearr_106074 = state_105559;
(statearr_106074[(21)] = inst_105553);

return statearr_106074;
})();
return cljs.core.async.impl.ioc_helpers.return_chan(state_105559__$1,inst_105554);
} else {
if((state_val_105560 === (6))){
var _ = (function (){var statearr_106075 = state_105559;
(statearr_106075[(4)] = cljs.core.cons((9),(state_105559[(4)])));

return statearr_106075;
})();
var inst_105345 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_105346 = cljs.core.PersistentHashMap.EMPTY;
var inst_105347 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_105346);
var inst_105348 = ["(+ 1 2)",inst_105347];
var inst_105349 = cljs.core.PersistentHashMap.fromArrays(inst_105345,inst_105348);
var inst_105350 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_105349);
var inst_105351 = cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null));
var inst_105352 = (3);
var inst_105353 = matcher_combinators.core.match((3),inst_105350);
var inst_105355 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_105350], 0));
var inst_105356 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_105353);
var inst_105357 = matcher_combinators.printer.as_string(inst_105356);
var inst_105358 = [inst_105355,"\n\nMismatch:\n",inst_105357].join('');
var inst_105359 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_105353);
var inst_105360 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_105359);
var inst_105361 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_105559__$1 = (function (){var statearr_106076 = state_105559;
(statearr_106076[(22)] = inst_105361);

(statearr_106076[(23)] = inst_105351);

(statearr_106076[(24)] = inst_105358);

(statearr_106076[(25)] = inst_105352);

return statearr_106076;
})();
if(inst_105360){
var statearr_106077_110259 = state_105559__$1;
(statearr_106077_110259[(1)] = (10));

} else {
var statearr_106078_110260 = state_105559__$1;
(statearr_106078_110260[(1)] = (11));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (28))){
var _ = (function (){var statearr_106079 = state_105559;
(statearr_106079[(4)] = cljs.core.cons((30),(state_105559[(4)])));

return statearr_106079;
})();
var ___$1 = (function (){var statearr_106080 = state_105559;
(statearr_106080[(4)] = cljs.core.cons((31),(state_105559[(4)])));

return statearr_106080;
})();
var state_105559__$1 = state_105559;
var statearr_106081_110261 = state_105559__$1;
(statearr_106081_110261[(2)] = null);

(statearr_106081_110261[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (25))){
var state_105559__$1 = state_105559;
var statearr_106082_110262 = state_105559__$1;
(statearr_106082_110262[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_106082_110262[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (34))){
var inst_105485 = (state_105559[(2)]);
var inst_105486 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_105487 = check.core.normalize_error(inst_105485);
var inst_105488 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b 2] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_105489 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_105490 = (3);
var inst_105491 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_105488)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_105489)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_105490)].join('');
var inst_105492 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_105487,inst_105491];
var inst_105493 = cljs.core.PersistentHashMap.fromArrays(inst_105486,inst_105492);
var inst_105494 = cljs.test.do_report(inst_105493);
var state_105559__$1 = state_105559;
var statearr_106083_110263 = state_105559__$1;
(statearr_106083_110263[(2)] = inst_105494);

(statearr_106083_110263[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (17))){
var _ = (function (){var statearr_106084 = state_105559;
(statearr_106084[(4)] = cljs.core.cons((20),(state_105559[(4)])));

return statearr_106084;
})();
var inst_105412 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_105413 = cljs.core.PersistentHashMap.EMPTY;
var inst_105414 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_105413);
var inst_105415 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_105414];
var inst_105416 = cljs.core.PersistentHashMap.fromArrays(inst_105412,inst_105415);
var inst_105417 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_105416);
var inst_105418 = (inst_105417 instanceof Promise);
var state_105559__$1 = state_105559;
if(cljs.core.truth_(inst_105418)){
var statearr_106085_110264 = state_105559__$1;
(statearr_106085_110264[(1)] = (22));

} else {
var statearr_106086_110265 = state_105559__$1;
(statearr_106086_110265[(1)] = (23));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (3))){
var inst_105375 = (state_105559[(2)]);
var inst_105377 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_105378 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_105379 = (new cljs.core.PersistentVector(null,1,(5),inst_105377,inst_105378,null));
var inst_105380 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_105379,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["resolves promises with p/let"], 0));
var state_105559__$1 = (function (){var statearr_106089 = state_105559;
(statearr_106089[(26)] = inst_105375);

(statearr_106089[(27)] = inst_105380);

return statearr_106089;
})();
var statearr_106091_110266 = state_105559__$1;
(statearr_106091_110266[(2)] = null);

(statearr_106091_110266[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (12))){
var inst_105361 = (state_105559[(22)]);
var inst_105358 = (state_105559[(24)]);
var inst_105352 = (state_105559[(25)]);
var inst_105365 = (state_105559[(2)]);
var inst_105366 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_105358);
var inst_105367 = [inst_105365,inst_105352,inst_105366];
var inst_105368 = cljs.core.PersistentHashMap.fromArrays(inst_105361,inst_105367);
var inst_105369 = cljs.test.do_report(inst_105368);
var _ = (function (){var statearr_106094 = state_105559;
(statearr_106094[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106094;
})();
var state_105559__$1 = state_105559;
var statearr_106096_110267 = state_105559__$1;
(statearr_106096_110267[(2)] = inst_105369);

(statearr_106096_110267[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (2))){
var _ = (function (){var statearr_106098 = state_105559;
(statearr_106098[(4)] = cljs.core.cons((4),(state_105559[(4)])));

return statearr_106098;
})();
var ___$1 = (function (){var statearr_106099 = state_105559;
(statearr_106099[(4)] = cljs.core.cons((5),(state_105559[(4)])));

return statearr_106099;
})();
var state_105559__$1 = state_105559;
var statearr_106101_110268 = state_105559__$1;
(statearr_106101_110268[(2)] = null);

(statearr_106101_110268[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (23))){
var inst_105431 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_105433 = cljs.core.PersistentHashMap.EMPTY;
var inst_105434 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_105433);
var inst_105435 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_105434];
var inst_105436 = cljs.core.PersistentHashMap.fromArrays(inst_105431,inst_105435);
var inst_105437 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_105436);
var state_105559__$1 = state_105559;
var statearr_106105_110269 = state_105559__$1;
(statearr_106105_110269[(2)] = inst_105437);

(statearr_106105_110269[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (35))){
var _ = (function (){var statearr_106108 = state_105559;
(statearr_106108[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106108;
})();
var state_105559__$1 = state_105559;
var ex106097 = (state_105559__$1[(2)]);
var statearr_106110_110270 = state_105559__$1;
(statearr_106110_110270[(5)] = ex106097);


var statearr_106112_110271 = state_105559__$1;
(statearr_106112_110271[(1)] = (34));

(statearr_106112_110271[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (19))){
var inst_105395 = (state_105559[(2)]);
var inst_105396 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_105397 = check.core.normalize_error(inst_105395);
var inst_105398 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b (promise 2)] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_105399 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_105400 = (3);
var inst_105401 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_105398)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_105399)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_105400)].join('');
var inst_105402 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_105397,inst_105401];
var inst_105403 = cljs.core.PersistentHashMap.fromArrays(inst_105396,inst_105402);
var inst_105404 = cljs.test.do_report(inst_105403);
var state_105559__$1 = state_105559;
var statearr_106116_110272 = state_105559__$1;
(statearr_106116_110272[(2)] = inst_105404);

(statearr_106116_110272[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (11))){
var state_105559__$1 = state_105559;
var statearr_106118_110273 = state_105559__$1;
(statearr_106118_110273[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_106118_110273[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (9))){
var _ = (function (){var statearr_106120 = state_105559;
(statearr_106120[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106120;
})();
var state_105559__$1 = state_105559;
var ex106114 = (state_105559__$1[(2)]);
var statearr_106123_110274 = state_105559__$1;
(statearr_106123_110274[(5)] = ex106114);


var statearr_106124_110275 = state_105559__$1;
(statearr_106124_110275[(1)] = (8));

(statearr_106124_110275[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (5))){
var _ = (function (){var statearr_106125 = state_105559;
(statearr_106125[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106125;
})();
var state_105559__$1 = state_105559;
var ex106117 = (state_105559__$1[(2)]);
var statearr_106126_110276 = state_105559__$1;
(statearr_106126_110276[(5)] = ex106117);


throw ex106117;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (14))){
var inst_105465 = (state_105559[(2)]);
var inst_105467 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_105468 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_105469 = (new cljs.core.PersistentVector(null,1,(5),inst_105467,inst_105468,null));
var inst_105470 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_105469,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["resolves mixed promises / non-promises"], 0));
var state_105559__$1 = (function (){var statearr_106130 = state_105559;
(statearr_106130[(28)] = inst_105470);

(statearr_106130[(29)] = inst_105465);

return statearr_106130;
})();
var statearr_106132_110277 = state_105559__$1;
(statearr_106132_110277[(2)] = null);

(statearr_106132_110277[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (26))){
var state_105559__$1 = state_105559;
var statearr_106134_110278 = state_105559__$1;
(statearr_106134_110278[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_106134_110278[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (16))){
var _ = (function (){var statearr_106136 = state_105559;
(statearr_106136[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106136;
})();
var state_105559__$1 = state_105559;
var ex106128 = (state_105559__$1[(2)]);
var statearr_106139_110279 = state_105559__$1;
(statearr_106139_110279[(5)] = ex106128);


throw ex106128;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (38))){
var inst_105519 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_105520 = cljs.core.PersistentHashMap.EMPTY;
var inst_105521 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_105520);
var inst_105522 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_105521];
var inst_105523 = cljs.core.PersistentHashMap.fromArrays(inst_105519,inst_105522);
var inst_105524 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_105523);
var state_105559__$1 = state_105559;
var statearr_106140_110280 = state_105559__$1;
(statearr_106140_110280[(2)] = inst_105524);

(statearr_106140_110280[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (30))){
var _ = (function (){var statearr_106143 = state_105559;
(statearr_106143[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106143;
})();
var inst_105473 = (state_105559[(2)]);
var inst_105474 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_105475 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_105476 = (new cljs.core.PersistentVector(null,1,(5),inst_105474,inst_105475,null));
var inst_105477 = cljs.test.update_current_env_BANG_(inst_105476,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_105559[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_105559__$1 = (function (){var statearr_106147 = state_105559;
(statearr_106147[(30)] = inst_105477);

return statearr_106147;
})();
var statearr_106148_110281 = state_105559__$1;
(statearr_106148_110281[(2)] = inst_105473);

(statearr_106148_110281[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (10))){
var state_105559__$1 = state_105559;
var statearr_106151_110282 = state_105559__$1;
(statearr_106151_110282[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_106151_110282[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (18))){
var inst_105462 = (state_105559[(2)]);
var _ = (function (){var statearr_106153 = state_105559;
(statearr_106153[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106153;
})();
var state_105559__$1 = state_105559;
var statearr_106155_110283 = state_105559__$1;
(statearr_106155_110283[(2)] = inst_105462);

(statearr_106155_110283[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (42))){
var inst_105535 = (state_105559[(17)]);
var inst_105530 = (state_105559[(18)]);
var inst_105538 = (state_105559[(19)]);
var inst_105543 = (state_105559[(2)]);
var inst_105544 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_105535);
var inst_105545 = [inst_105543,inst_105530,inst_105544];
var inst_105546 = cljs.core.PersistentHashMap.fromArrays(inst_105538,inst_105545);
var inst_105547 = cljs.test.do_report(inst_105546);
var _ = (function (){var statearr_106157 = state_105559;
(statearr_106157[(4)] = cljs.core.rest((state_105559[(4)])));

return statearr_106157;
})();
var state_105559__$1 = state_105559;
var statearr_106159_110284 = state_105559__$1;
(statearr_106159_110284[(2)] = inst_105547);

(statearr_106159_110284[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (37))){
var inst_105306 = (state_105559[(10)]);
var inst_105509 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_105510 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_105511 = cljs.core.PersistentHashMap.EMPTY;
var inst_105512 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_105511);
var inst_105513 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_105512];
var inst_105514 = cljs.core.PersistentHashMap.fromArrays(inst_105510,inst_105513);
var inst_105515 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_105514);
var inst_105516 = (function (){var mark_as_done__53963__auto__ = inst_105306;
var chan__53977__auto__ = inst_105509;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_105517 = inst_105515.then(inst_105516);
var state_105559__$1 = (function (){var statearr_106165 = state_105559;
(statearr_106165[(31)] = inst_105517);

return statearr_106165;
})();
var statearr_106167_110285 = state_105559__$1;
(statearr_106167_110285[(2)] = inst_105509);

(statearr_106167_110285[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_105560 === (8))){
var inst_105328 = (state_105559[(2)]);
var inst_105329 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_105330 = check.core.normalize_error(inst_105328);
var inst_105332 = cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null));
var inst_105333 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_105334 = (3);
var inst_105335 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_105332)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_105333)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_105334)].join('');
var inst_105336 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_105330,inst_105335];
var inst_105337 = cljs.core.PersistentHashMap.fromArrays(inst_105329,inst_105336);
var inst_105338 = cljs.test.do_report(inst_105337);
var state_105559__$1 = state_105559;
var statearr_106169_110286 = state_105559__$1;
(statearr_106169_110286[(2)] = inst_105338);

(statearr_106169_110286[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});
return (function() {
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = null;
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0 = (function (){
var statearr_106174 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_106174[(0)] = repl_tooling$editor_integration$configs_test$state_machine__34940__auto__);

(statearr_106174[(1)] = (1));

return statearr_106174;
});
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1 = (function (state_105559){
while(true){
var ret_value__34941__auto__ = (function (){try{while(true){
var result__34942__auto__ = switch__34939__auto__(state_105559);
if(cljs.core.keyword_identical_QMARK_(result__34942__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
continue;
} else {
return result__34942__auto__;
}
break;
}
}catch (e106176){var ex__34943__auto__ = e106176;
var statearr_106177_110287 = state_105559;
(statearr_106177_110287[(2)] = ex__34943__auto__);


if(cljs.core.seq((state_105559[(4)]))){
var statearr_106179_110288 = state_105559;
(statearr_106179_110288[(1)] = cljs.core.first((state_105559[(4)])));

} else {
throw ex__34943__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
}})();
if(cljs.core.keyword_identical_QMARK_(ret_value__34941__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
var G__110289 = state_105559;
state_105559 = G__110289;
continue;
} else {
return ret_value__34941__auto__;
}
break;
}
});
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = function(state_105559){
switch(arguments.length){
case 0:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0.call(this);
case 1:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1.call(this,state_105559);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$0 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0;
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$1 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1;
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto__;
})()
})();
var state__35943__auto__ = (function (){var statearr_106182 = f__35942__auto__();
(statearr_106182[(6)] = c__35941__auto__);

return statearr_106182;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__35943__auto__);
}));

return c__35941__auto__;
}finally {cljs.test.update_current_env_BANG_(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.rest);
}}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.prototype.apply = (function (self__,args105298){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone(args105298)));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done__53962__auto__){
var self__ = this;
var ___9200__auto__ = this;
cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["evaluating code"], 0));

try{var c__35941__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));
cljs.core.async.impl.dispatch.run((function (){
var f__35942__auto__ = (function (){var switch__34939__auto__ = (function (state_106447){
var state_val_106449 = (state_106447[(1)]);
if((state_val_106449 === (7))){
var inst_106254 = (state_106447[(2)]);
var _ = (function (){var statearr_106455 = state_106447;
(statearr_106455[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106455;
})();
var state_106447__$1 = state_106447;
var statearr_106457_110290 = state_106447__$1;
(statearr_106457_110290[(2)] = inst_106254);

(statearr_106457_110290[(1)] = (4));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (20))){
var _ = (function (){var statearr_106458 = state_106447;
(statearr_106458[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106458;
})();
var state_106447__$1 = state_106447;
var ex106451 = (state_106447__$1[(2)]);
var statearr_106460_110291 = state_106447__$1;
(statearr_106460_110291[(5)] = ex106451);


var statearr_106461_110292 = state_106447__$1;
(statearr_106461_110292[(1)] = (19));

(statearr_106461_110292[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (27))){
var inst_106329 = (state_106447[(7)]);
var inst_106322 = (state_106447[(8)]);
var inst_106332 = (state_106447[(9)]);
var inst_106336 = (state_106447[(2)]);
var inst_106337 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_106329);
var inst_106338 = [inst_106336,inst_106322,inst_106337];
var inst_106339 = cljs.core.PersistentHashMap.fromArrays(inst_106332,inst_106338);
var inst_106340 = cljs.test.do_report(inst_106339);
var _ = (function (){var statearr_106464 = state_106447;
(statearr_106464[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106464;
})();
var state_106447__$1 = state_106447;
var statearr_106466_110293 = state_106447__$1;
(statearr_106466_110293[(2)] = inst_106340);

(statearr_106466_110293[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (1))){
var inst_106189 = (state_106447[(10)]);
var inst_106188 = (function (){return (function (){

return (done__53962__auto__.cljs$core$IFn$_invoke$arity$0 ? done__53962__auto__.cljs$core$IFn$_invoke$arity$0() : done__53962__auto__.call(null));
});
})();
var inst_106189__$1 = (new cljs.core.Delay(inst_106188,null));
var inst_106191 = (function (){var mark_as_done__53963__auto__ = inst_106189__$1;
return (function (){
if(cljs.core.realized_QMARK_(mark_as_done__53963__auto__)){
return null;
} else {
try{var value__9156__auto___110294 = (function(){throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)})();
if(cljs.core.truth_(value__9156__auto___110294)){
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"pass","pass",1574159993),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110294,null]));
} else {
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"fail","fail",1706214930),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110294,null]));
}

}catch (e106469){var t__9189__auto___110295 = e106469;
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"error","error",-978969032),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,t__9189__auto___110295,null]));
}
return cljs.core.deref(mark_as_done__53963__auto__);
}
});
})();
var inst_106192 = setTimeout(inst_106191,(3000));
var inst_106194 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106195 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106196 = (new cljs.core.PersistentVector(null,1,(5),inst_106194,inst_106195,null));
var inst_106197 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_106196,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["evaluates simple code"], 0));
var state_106447__$1 = (function (){var statearr_106473 = state_106447;
(statearr_106473[(11)] = inst_106197);

(statearr_106473[(12)] = inst_106192);

(statearr_106473[(10)] = inst_106189__$1);

return statearr_106473;
})();
var statearr_106474_110296 = state_106447__$1;
(statearr_106474_110296[(2)] = null);

(statearr_106474_110296[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (24))){
var inst_106318 = (state_106447[(2)]);
var state_106447__$1 = state_106447;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_106447__$1,(21),inst_106318);
} else {
if((state_val_106449 === (39))){
var inst_106414 = (state_106447[(2)]);
var state_106447__$1 = state_106447;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_106447__$1,(36),inst_106414);
} else {
if((state_val_106449 === (4))){
var _ = (function (){var statearr_106478 = state_106447;
(statearr_106478[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106478;
})();
var inst_106199 = (state_106447[(2)]);
var inst_106200 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106201 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106202 = (new cljs.core.PersistentVector(null,1,(5),inst_106200,inst_106201,null));
var inst_106203 = cljs.test.update_current_env_BANG_(inst_106202,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_106447[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_106447__$1 = (function (){var statearr_106482 = state_106447;
(statearr_106482[(13)] = inst_106203);

return statearr_106482;
})();
var statearr_106483_110297 = state_106447__$1;
(statearr_106483_110297[(2)] = inst_106199);

(statearr_106483_110297[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (15))){
var _ = (function (){var statearr_106487 = state_106447;
(statearr_106487[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106487;
})();
var inst_106263 = (state_106447[(2)]);
var inst_106264 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106265 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106266 = (new cljs.core.PersistentVector(null,1,(5),inst_106264,inst_106265,null));
var inst_106267 = cljs.test.update_current_env_BANG_(inst_106266,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_106447[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_106447__$1 = (function (){var statearr_106494 = state_106447;
(statearr_106494[(14)] = inst_106267);

return statearr_106494;
})();
var statearr_106495_110298 = state_106447__$1;
(statearr_106495_110298[(2)] = inst_106263);

(statearr_106495_110298[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (21))){
var inst_106320 = (state_106447[(2)]);
var inst_106321 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b (promise 2)] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_106322 = (3);
var inst_106323 = matcher_combinators.core.match((3),inst_106320);
var inst_106326 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_106320], 0));
var inst_106327 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_106323);
var inst_106328 = matcher_combinators.printer.as_string(inst_106327);
var inst_106329 = [inst_106326,"\n\nMismatch:\n",inst_106328].join('');
var inst_106330 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_106323);
var inst_106331 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_106330);
var inst_106332 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_106447__$1 = (function (){var statearr_106502 = state_106447;
(statearr_106502[(7)] = inst_106329);

(statearr_106502[(8)] = inst_106322);

(statearr_106502[(9)] = inst_106332);

(statearr_106502[(15)] = inst_106321);

return statearr_106502;
})();
if(inst_106331){
var statearr_106503_110299 = state_106447__$1;
(statearr_106503_110299[(1)] = (25));

} else {
var statearr_106505_110300 = state_106447__$1;
(statearr_106505_110300[(1)] = (26));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (31))){
var _ = (function (){var statearr_106507 = state_106447;
(statearr_106507[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106507;
})();
var state_106447__$1 = state_106447;
var ex106485 = (state_106447__$1[(2)]);
var statearr_106509_110301 = state_106447__$1;
(statearr_106509_110301[(5)] = ex106485);


throw ex106485;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (32))){
var _ = (function (){var statearr_106510 = state_106447;
(statearr_106510[(4)] = cljs.core.cons((35),(state_106447[(4)])));

return statearr_106510;
})();
var inst_106385 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_106386 = cljs.core.PersistentHashMap.EMPTY;
var inst_106387 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_106386);
var inst_106388 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_106387];
var inst_106389 = cljs.core.PersistentHashMap.fromArrays(inst_106385,inst_106388);
var inst_106390 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_106389);
var inst_106391 = (inst_106390 instanceof Promise);
var state_106447__$1 = state_106447;
if(cljs.core.truth_(inst_106391)){
var statearr_106513_110302 = state_106447__$1;
(statearr_106513_110302[(1)] = (37));

} else {
var statearr_106514_110303 = state_106447__$1;
(statearr_106514_110303[(1)] = (38));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (40))){
var state_106447__$1 = state_106447;
var statearr_106515_110304 = state_106447__$1;
(statearr_106515_110304[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_106515_110304[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (33))){
var inst_106437 = (state_106447[(2)]);
var _ = (function (){var statearr_106517 = state_106447;
(statearr_106517[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106517;
})();
var state_106447__$1 = state_106447;
var statearr_106519_110305 = state_106447__$1;
(statearr_106519_110305[(2)] = inst_106437);

(statearr_106519_110305[(1)] = (30));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (13))){
var _ = (function (){var statearr_106521 = state_106447;
(statearr_106521[(4)] = cljs.core.cons((15),(state_106447[(4)])));

return statearr_106521;
})();
var ___$1 = (function (){var statearr_106522 = state_106447;
(statearr_106522[(4)] = cljs.core.cons((16),(state_106447[(4)])));

return statearr_106522;
})();
var state_106447__$1 = state_106447;
var statearr_106523_110306 = state_106447__$1;
(statearr_106523_110306[(2)] = null);

(statearr_106523_110306[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (22))){
var inst_106189 = (state_106447[(10)]);
var inst_106300 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_106301 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_106302 = cljs.core.PersistentHashMap.EMPTY;
var inst_106303 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_106302);
var inst_106304 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_106303];
var inst_106305 = cljs.core.PersistentHashMap.fromArrays(inst_106301,inst_106304);
var inst_106306 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_106305);
var inst_106307 = (function (){var mark_as_done__53963__auto__ = inst_106189;
var chan__53977__auto__ = inst_106300;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_106308 = inst_106306.then(inst_106307);
var state_106447__$1 = (function (){var statearr_106526 = state_106447;
(statearr_106526[(16)] = inst_106308);

return statearr_106526;
})();
var statearr_106528_110307 = state_106447__$1;
(statearr_106528_110307[(2)] = inst_106300);

(statearr_106528_110307[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (36))){
var inst_106416 = (state_106447[(2)]);
var inst_106417 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b 2] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_106418 = (3);
var inst_106419 = matcher_combinators.core.match((3),inst_106416);
var inst_106420 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_106416], 0));
var inst_106421 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_106419);
var inst_106422 = matcher_combinators.printer.as_string(inst_106421);
var inst_106423 = [inst_106420,"\n\nMismatch:\n",inst_106422].join('');
var inst_106424 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_106419);
var inst_106425 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_106424);
var inst_106426 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_106447__$1 = (function (){var statearr_106530 = state_106447;
(statearr_106530[(17)] = inst_106418);

(statearr_106530[(18)] = inst_106423);

(statearr_106530[(19)] = inst_106417);

(statearr_106530[(20)] = inst_106426);

return statearr_106530;
})();
if(inst_106425){
var statearr_106532_110308 = state_106447__$1;
(statearr_106532_110308[(1)] = (40));

} else {
var statearr_106533_110309 = state_106447__$1;
(statearr_106533_110309[(1)] = (41));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (41))){
var state_106447__$1 = state_106447;
var statearr_106538_110310 = state_106447__$1;
(statearr_106538_110310[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_106538_110310[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (29))){
var inst_106189 = (state_106447[(10)]);
var inst_106440 = (state_106447[(2)]);
var inst_106441 = cljs.core.deref(inst_106189);
var state_106447__$1 = (function (){var statearr_106543 = state_106447;
(statearr_106543[(21)] = inst_106440);

return statearr_106543;
})();
return cljs.core.async.impl.ioc_helpers.return_chan(state_106447__$1,inst_106441);
} else {
if((state_val_106449 === (6))){
var _ = (function (){var statearr_106544 = state_106447;
(statearr_106544[(4)] = cljs.core.cons((9),(state_106447[(4)])));

return statearr_106544;
})();
var inst_106228 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_106229 = cljs.core.PersistentHashMap.EMPTY;
var inst_106230 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_106229);
var inst_106231 = ["(+ 1 2)",inst_106230];
var inst_106232 = cljs.core.PersistentHashMap.fromArrays(inst_106228,inst_106231);
var inst_106233 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_106232);
var inst_106234 = cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null));
var inst_106235 = (3);
var inst_106236 = matcher_combinators.core.match((3),inst_106233);
var inst_106237 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_106233], 0));
var inst_106238 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_106236);
var inst_106239 = matcher_combinators.printer.as_string(inst_106238);
var inst_106240 = [inst_106237,"\n\nMismatch:\n",inst_106239].join('');
var inst_106241 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_106236);
var inst_106242 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_106241);
var inst_106243 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_106447__$1 = (function (){var statearr_106547 = state_106447;
(statearr_106547[(22)] = inst_106240);

(statearr_106547[(23)] = inst_106235);

(statearr_106547[(24)] = inst_106234);

(statearr_106547[(25)] = inst_106243);

return statearr_106547;
})();
if(inst_106242){
var statearr_106549_110311 = state_106447__$1;
(statearr_106549_110311[(1)] = (10));

} else {
var statearr_106550_110312 = state_106447__$1;
(statearr_106550_110312[(1)] = (11));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (28))){
var _ = (function (){var statearr_106552 = state_106447;
(statearr_106552[(4)] = cljs.core.cons((30),(state_106447[(4)])));

return statearr_106552;
})();
var ___$1 = (function (){var statearr_106553 = state_106447;
(statearr_106553[(4)] = cljs.core.cons((31),(state_106447[(4)])));

return statearr_106553;
})();
var state_106447__$1 = state_106447;
var statearr_106554_110313 = state_106447__$1;
(statearr_106554_110313[(2)] = null);

(statearr_106554_110313[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (25))){
var state_106447__$1 = state_106447;
var statearr_106556_110314 = state_106447__$1;
(statearr_106556_110314[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_106556_110314[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (34))){
var inst_106365 = (state_106447[(2)]);
var inst_106367 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_106368 = check.core.normalize_error(inst_106365);
var inst_106369 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b 2] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_106370 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_106371 = (3);
var inst_106372 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106369)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106370)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106371)].join('');
var inst_106373 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_106368,inst_106372];
var inst_106374 = cljs.core.PersistentHashMap.fromArrays(inst_106367,inst_106373);
var inst_106375 = cljs.test.do_report(inst_106374);
var state_106447__$1 = state_106447;
var statearr_106558_110315 = state_106447__$1;
(statearr_106558_110315[(2)] = inst_106375);

(statearr_106558_110315[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (17))){
var _ = (function (){var statearr_106561 = state_106447;
(statearr_106561[(4)] = cljs.core.cons((20),(state_106447[(4)])));

return statearr_106561;
})();
var inst_106292 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_106293 = cljs.core.PersistentHashMap.EMPTY;
var inst_106294 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_106293);
var inst_106295 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_106294];
var inst_106296 = cljs.core.PersistentHashMap.fromArrays(inst_106292,inst_106295);
var inst_106297 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_106296);
var inst_106298 = (inst_106297 instanceof Promise);
var state_106447__$1 = state_106447;
if(cljs.core.truth_(inst_106298)){
var statearr_106564_110316 = state_106447__$1;
(statearr_106564_110316[(1)] = (22));

} else {
var statearr_106565_110317 = state_106447__$1;
(statearr_106565_110317[(1)] = (23));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (3))){
var inst_106257 = (state_106447[(2)]);
var inst_106258 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106259 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106260 = (new cljs.core.PersistentVector(null,1,(5),inst_106258,inst_106259,null));
var inst_106261 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_106260,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["resolves promises with p/let"], 0));
var state_106447__$1 = (function (){var statearr_106566 = state_106447;
(statearr_106566[(26)] = inst_106257);

(statearr_106566[(27)] = inst_106261);

return statearr_106566;
})();
var statearr_106567_110318 = state_106447__$1;
(statearr_106567_110318[(2)] = null);

(statearr_106567_110318[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (12))){
var inst_106240 = (state_106447[(22)]);
var inst_106235 = (state_106447[(23)]);
var inst_106243 = (state_106447[(25)]);
var inst_106247 = (state_106447[(2)]);
var inst_106248 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_106240);
var inst_106249 = [inst_106247,inst_106235,inst_106248];
var inst_106250 = cljs.core.PersistentHashMap.fromArrays(inst_106243,inst_106249);
var inst_106251 = cljs.test.do_report(inst_106250);
var _ = (function (){var statearr_106569 = state_106447;
(statearr_106569[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106569;
})();
var state_106447__$1 = state_106447;
var statearr_106570_110319 = state_106447__$1;
(statearr_106570_110319[(2)] = inst_106251);

(statearr_106570_110319[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (2))){
var _ = (function (){var statearr_106573 = state_106447;
(statearr_106573[(4)] = cljs.core.cons((4),(state_106447[(4)])));

return statearr_106573;
})();
var ___$1 = (function (){var statearr_106574 = state_106447;
(statearr_106574[(4)] = cljs.core.cons((5),(state_106447[(4)])));

return statearr_106574;
})();
var state_106447__$1 = state_106447;
var statearr_106575_110320 = state_106447__$1;
(statearr_106575_110320[(2)] = null);

(statearr_106575_110320[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (23))){
var inst_106311 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_106312 = cljs.core.PersistentHashMap.EMPTY;
var inst_106313 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_106312);
var inst_106314 = ["(p/let [a (promise 1) b (promise 2)] (+ a b))",inst_106313];
var inst_106315 = cljs.core.PersistentHashMap.fromArrays(inst_106311,inst_106314);
var inst_106316 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_106315);
var state_106447__$1 = state_106447;
var statearr_106578_110321 = state_106447__$1;
(statearr_106578_110321[(2)] = inst_106316);

(statearr_106578_110321[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (35))){
var _ = (function (){var statearr_106579 = state_106447;
(statearr_106579[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106579;
})();
var state_106447__$1 = state_106447;
var ex106571 = (state_106447__$1[(2)]);
var statearr_106581_110322 = state_106447__$1;
(statearr_106581_110322[(5)] = ex106571);


var statearr_106582_110323 = state_106447__$1;
(statearr_106582_110323[(1)] = (34));

(statearr_106582_110323[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (19))){
var inst_106275 = (state_106447[(2)]);
var inst_106276 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_106277 = check.core.normalize_error(inst_106275);
var inst_106279 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(p/let [a (promise 1) b (promise 2)] (+ a b))",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null)));
var inst_106280 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_106281 = (3);
var inst_106282 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106279)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106280)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106281)].join('');
var inst_106283 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_106277,inst_106282];
var inst_106284 = cljs.core.PersistentHashMap.fromArrays(inst_106276,inst_106283);
var inst_106285 = cljs.test.do_report(inst_106284);
var state_106447__$1 = state_106447;
var statearr_106586_110324 = state_106447__$1;
(statearr_106586_110324[(2)] = inst_106285);

(statearr_106586_110324[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (11))){
var state_106447__$1 = state_106447;
var statearr_106588_110325 = state_106447__$1;
(statearr_106588_110325[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_106588_110325[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (9))){
var _ = (function (){var statearr_106590 = state_106447;
(statearr_106590[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106590;
})();
var state_106447__$1 = state_106447;
var ex106583 = (state_106447__$1[(2)]);
var statearr_106591_110326 = state_106447__$1;
(statearr_106591_110326[(5)] = ex106583);


var statearr_106592_110327 = state_106447__$1;
(statearr_106592_110327[(1)] = (8));

(statearr_106592_110327[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (5))){
var _ = (function (){var statearr_106594 = state_106447;
(statearr_106594[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106594;
})();
var state_106447__$1 = state_106447;
var ex106587 = (state_106447__$1[(2)]);
var statearr_106597_110328 = state_106447__$1;
(statearr_106597_110328[(5)] = ex106587);


throw ex106587;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (14))){
var inst_106346 = (state_106447[(2)]);
var inst_106347 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106348 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106349 = (new cljs.core.PersistentVector(null,1,(5),inst_106347,inst_106348,null));
var inst_106350 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_106349,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["resolves mixed promises / non-promises"], 0));
var state_106447__$1 = (function (){var statearr_106600 = state_106447;
(statearr_106600[(28)] = inst_106346);

(statearr_106600[(29)] = inst_106350);

return statearr_106600;
})();
var statearr_106601_110329 = state_106447__$1;
(statearr_106601_110329[(2)] = null);

(statearr_106601_110329[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (26))){
var state_106447__$1 = state_106447;
var statearr_106604_110330 = state_106447__$1;
(statearr_106604_110330[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_106604_110330[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (16))){
var _ = (function (){var statearr_106606 = state_106447;
(statearr_106606[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106606;
})();
var state_106447__$1 = state_106447;
var ex106599 = (state_106447__$1[(2)]);
var statearr_106608_110331 = state_106447__$1;
(statearr_106608_110331[(5)] = ex106599);


throw ex106599;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (38))){
var inst_106406 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_106407 = cljs.core.PersistentHashMap.EMPTY;
var inst_106408 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_106407);
var inst_106409 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_106408];
var inst_106410 = cljs.core.PersistentHashMap.fromArrays(inst_106406,inst_106409);
var inst_106411 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_106410);
var state_106447__$1 = state_106447;
var statearr_106611_110332 = state_106447__$1;
(statearr_106611_110332[(2)] = inst_106411);

(statearr_106611_110332[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (30))){
var _ = (function (){var statearr_106614 = state_106447;
(statearr_106614[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106614;
})();
var inst_106352 = (state_106447[(2)]);
var inst_106353 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106355 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106356 = (new cljs.core.PersistentVector(null,1,(5),inst_106353,inst_106355,null));
var inst_106357 = cljs.test.update_current_env_BANG_(inst_106356,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_106447[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_106447__$1 = (function (){var statearr_106617 = state_106447;
(statearr_106617[(30)] = inst_106357);

return statearr_106617;
})();
var statearr_106618_110333 = state_106447__$1;
(statearr_106618_110333[(2)] = inst_106352);

(statearr_106618_110333[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (10))){
var state_106447__$1 = state_106447;
var statearr_106620_110334 = state_106447__$1;
(statearr_106620_110334[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_106620_110334[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (18))){
var inst_106343 = (state_106447[(2)]);
var _ = (function (){var statearr_106623 = state_106447;
(statearr_106623[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106623;
})();
var state_106447__$1 = state_106447;
var statearr_106624_110335 = state_106447__$1;
(statearr_106624_110335[(2)] = inst_106343);

(statearr_106624_110335[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (42))){
var inst_106418 = (state_106447[(17)]);
var inst_106423 = (state_106447[(18)]);
var inst_106426 = (state_106447[(20)]);
var inst_106430 = (state_106447[(2)]);
var inst_106431 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_106423);
var inst_106432 = [inst_106430,inst_106418,inst_106431];
var inst_106433 = cljs.core.PersistentHashMap.fromArrays(inst_106426,inst_106432);
var inst_106434 = cljs.test.do_report(inst_106433);
var _ = (function (){var statearr_106627 = state_106447;
(statearr_106627[(4)] = cljs.core.rest((state_106447[(4)])));

return statearr_106627;
})();
var state_106447__$1 = state_106447;
var statearr_106629_110336 = state_106447__$1;
(statearr_106629_110336[(2)] = inst_106434);

(statearr_106629_110336[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (37))){
var inst_106189 = (state_106447[(10)]);
var inst_106394 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_106395 = [new cljs.core.Keyword(null,"code","code",1586293142),new cljs.core.Keyword(null,"editor-state","editor-state",579582138)];
var inst_106396 = cljs.core.PersistentHashMap.EMPTY;
var inst_106397 = cljs.core.atom.cljs$core$IFn$_invoke$arity$1(inst_106396);
var inst_106398 = ["(p/let [a (promise 1) b 2] (+ a b))",inst_106397];
var inst_106399 = cljs.core.PersistentHashMap.fromArrays(inst_106395,inst_106398);
var inst_106400 = repl_tooling.editor_integration.interpreter.evaluate_code(inst_106399);
var inst_106401 = (function (){var mark_as_done__53963__auto__ = inst_106189;
var chan__53977__auto__ = inst_106394;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_106402 = inst_106400.then(inst_106401);
var state_106447__$1 = (function (){var statearr_106634 = state_106447;
(statearr_106634[(31)] = inst_106402);

return statearr_106634;
})();
var statearr_106637_110337 = state_106447__$1;
(statearr_106637_110337[(2)] = inst_106394);

(statearr_106637_110337[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_106449 === (8))){
var inst_106211 = (state_106447[(2)]);
var inst_106212 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_106213 = check.core.normalize_error(inst_106211);
var inst_106214 = cljs.core.list(new cljs.core.Symbol("int","evaluate-code","int/evaluate-code",-1277804443,null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)",new cljs.core.Keyword(null,"editor-state","editor-state",579582138),cljs.core.list(new cljs.core.Symbol(null,"atom","atom",1243487874,null),cljs.core.PersistentArrayMap.EMPTY)], null));
var inst_106215 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_106216 = (3);
var inst_106217 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106214)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106215)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106216)].join('');
var inst_106218 = [new cljs.core.Keyword(null,"error","error",-978969032),(3),inst_106213,inst_106217];
var inst_106219 = cljs.core.PersistentHashMap.fromArrays(inst_106212,inst_106218);
var inst_106220 = cljs.test.do_report(inst_106219);
var state_106447__$1 = state_106447;
var statearr_106639_110338 = state_106447__$1;
(statearr_106639_110338[(2)] = inst_106220);

(statearr_106639_110338[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});
return (function() {
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = null;
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0 = (function (){
var statearr_106642 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_106642[(0)] = repl_tooling$editor_integration$configs_test$state_machine__34940__auto__);

(statearr_106642[(1)] = (1));

return statearr_106642;
});
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1 = (function (state_106447){
while(true){
var ret_value__34941__auto__ = (function (){try{while(true){
var result__34942__auto__ = switch__34939__auto__(state_106447);
if(cljs.core.keyword_identical_QMARK_(result__34942__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
continue;
} else {
return result__34942__auto__;
}
break;
}
}catch (e106645){var ex__34943__auto__ = e106645;
var statearr_106648_110339 = state_106447;
(statearr_106648_110339[(2)] = ex__34943__auto__);


if(cljs.core.seq((state_106447[(4)]))){
var statearr_106651_110340 = state_106447;
(statearr_106651_110340[(1)] = cljs.core.first((state_106447[(4)])));

} else {
throw ex__34943__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
}})();
if(cljs.core.keyword_identical_QMARK_(ret_value__34941__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
var G__110341 = state_106447;
state_106447 = G__110341;
continue;
} else {
return ret_value__34941__auto__;
}
break;
}
});
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = function(state_106447){
switch(arguments.length){
case 0:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0.call(this);
case 1:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1.call(this,state_106447);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$0 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0;
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$1 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1;
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto__;
})()
})();
var state__35943__auto__ = (function (){var statearr_106653 = f__35942__auto__();
(statearr_106653[(6)] = c__35941__auto__);

return statearr_106653;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__35943__auto__);
}));

return c__35941__auto__;
}finally {cljs.test.update_current_env_BANG_(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.rest);
}}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta105294","meta105294",-2046209412,null)], null);
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.cljs$lang$type = true);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.cljs$lang$ctorStr = "repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test105293");

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293.cljs$lang$ctorPrWriter = (function (this__4461__auto__,writer__4462__auto__,opt__4463__auto__){
return cljs.core._write(writer__4462__auto__,"repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test105293");
}));

/**
 * Positional factory function for repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test105293.
 */
repl_tooling.editor_integration.configs_test.__GT_t_repl_tooling$editor_integration$configs_test105293 = (function repl_tooling$editor_integration$configs_test$__GT_t_repl_tooling$editor_integration$configs_test105293(meta105294){
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293(meta105294));
});

}

return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test105293(null));
});

(repl_tooling.editor_integration.configs_test.config_eval.cljs$lang$var = new cljs.core.Var(function(){return repl_tooling.editor_integration.configs_test.config_eval;},new cljs.core.Symbol("repl-tooling.editor-integration.configs-test","config-eval","repl-tooling.editor-integration.configs-test/config-eval",288604354,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"repl-tooling.editor-integration.configs-test","repl-tooling.editor-integration.configs-test",-1562769389,null),new cljs.core.Symbol(null,"config-eval","config-eval",1888130660,null),"repl_tooling/editor_integration/configs_test.cljs",27,1,22,22,cljs.core.List.EMPTY,null,(cljs.core.truth_(repl_tooling.editor_integration.configs_test.config_eval)?repl_tooling.editor_integration.configs_test.config_eval.cljs$lang$test:null)])));
devcards.core.register_card(new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"path","path",-188191168),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"repl_tooling.editor_integration.configs_test","repl_tooling.editor_integration.configs_test",678620430),new cljs.core.Keyword(null,"custom-config","custom-config",-1075446742)], null),new cljs.core.Keyword(null,"func","func",-238706040),(function (){
return devcards.core.card_base(new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"name","name",1843675177),"custom-config",new cljs.core.Keyword(null,"documentation","documentation",1889593999),null,new cljs.core.Keyword(null,"main-obj","main-obj",-1544409742),devcards.core.test_card.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(function (){
var reg = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();
if((typeof repl_tooling !== 'undefined') && (typeof repl_tooling.editor_integration !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IFn}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IWithMeta}
*/
repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661 = (function (reg,meta106662){
this.reg = reg;
this.meta106662 = meta106662;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_106663,meta106662__$1){
var self__ = this;
var _106663__$1 = this;
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661(self__.reg,meta106662__$1));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_106663){
var self__ = this;
var _106663__$1 = this;
return self__.meta106662;
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.prototype.call = (function (self__,done__53962__auto__){
var self__ = this;
var self____$1 = this;
var ___9200__auto__ = self____$1;
cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["automatically registering custom commands"], 0));

try{var c__35941__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));
cljs.core.async.impl.dispatch.run((function (){
var f__35942__auto__ = (function (){var switch__34939__auto__ = (function (state_107186){
var state_val_107187 = (state_107186[(1)]);
if((state_val_107187 === (65))){
var _ = (function (){var statearr_107188 = state_107186;
(statearr_107188[(4)] = cljs.core.cons((67),(state_107186[(4)])));

return statearr_107188;
})();
var ___$1 = (function (){var statearr_107189 = state_107186;
(statearr_107189[(4)] = cljs.core.cons((68),(state_107186[(4)])));

return statearr_107189;
})();
var inst_107032 = repl_tooling.editor_integration.configs_test.change_config_file("(defn long-str []\n                              (p/let [res (editor/eval {:text (pr-str (apply str (range 2000)))})]\n                               (prn (str \"a-\" (:result res)))))");
var inst_107033 = (self__.reg instanceof Promise);
var state_107186__$1 = (function (){var statearr_107190 = state_107186;
(statearr_107190[(7)] = inst_107032);

return statearr_107190;
})();
if(cljs.core.truth_(inst_107033)){
var statearr_107191_110342 = state_107186__$1;
(statearr_107191_110342[(1)] = (70));

} else {
var statearr_107192_110343 = state_107186__$1;
(statearr_107192_110343[(1)] = (71));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (70))){
var inst_106672 = (state_107186[(8)]);
var inst_107035 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107036 = (function (){var mark_as_done__53963__auto__ = inst_106672;
var chan__53977__auto__ = inst_107035;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107037 = self__.reg.then(inst_107036);
var state_107186__$1 = (function (){var statearr_107193 = state_107186;
(statearr_107193[(9)] = inst_107037);

return statearr_107193;
})();
var statearr_107194_110344 = state_107186__$1;
(statearr_107194_110344[(2)] = inst_107035);

(statearr_107194_110344[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (62))){
var state_107186__$1 = state_107186;
var statearr_107195_110345 = state_107186__$1;
(statearr_107195_110345[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_107195_110345[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (74))){
var inst_107095 = (state_107186[(2)]);
var _ = (function (){var statearr_107196 = state_107186;
(statearr_107196[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107196;
})();
var state_107186__$1 = state_107186;
var statearr_107197_110346 = state_107186__$1;
(statearr_107197_110346[(2)] = inst_107095);

(statearr_107197_110346[(1)] = (67));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (7))){
var inst_106672 = (state_107186[(8)]);
var inst_106700 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_106701 = (function (){var mark_as_done__53963__auto__ = inst_106672;
var chan__53977__auto__ = inst_106700;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_106702 = self__.reg.then(inst_106701);
var state_107186__$1 = (function (){var statearr_107198 = state_107186;
(statearr_107198[(10)] = inst_106702);

return statearr_107198;
})();
var statearr_107199_110347 = state_107186__$1;
(statearr_107199_110347[(2)] = inst_106700);

(statearr_107199_110347[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (59))){
var inst_106672 = (state_107186[(8)]);
var inst_106981 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_106982 = repl_tooling.integration.fake_editor.change_result();
var inst_106983 = (function (){var mark_as_done__53963__auto__ = inst_106672;
var chan__53977__auto__ = inst_106981;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_106984 = inst_106982.then(inst_106983);
var state_107186__$1 = (function (){var statearr_107201 = state_107186;
(statearr_107201[(11)] = inst_106984);

return statearr_107201;
})();
var statearr_107202_110348 = state_107186__$1;
(statearr_107202_110348[(2)] = inst_106981);

(statearr_107202_110348[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (86))){
var _ = (function (){var statearr_107203 = state_107186;
(statearr_107203[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107203;
})();
var inst_107104 = (state_107186[(2)]);
var inst_107105 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107106 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107107 = (new cljs.core.PersistentVector(null,1,(5),inst_107105,inst_107106,null));
var inst_107108 = cljs.test.update_current_env_BANG_(inst_107107,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_107186[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_107186__$1 = (function (){var statearr_107205 = state_107186;
(statearr_107205[(12)] = inst_107108);

return statearr_107205;
})();
var statearr_107206_110349 = state_107186__$1;
(statearr_107206_110349[(2)] = inst_107104);

(statearr_107206_110349[(1)] = (85));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (20))){
var _ = (function (){var statearr_107207 = state_107186;
(statearr_107207[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107207;
})();
var state_107186__$1 = state_107186;
var ex107200 = (state_107186__$1[(2)]);
var statearr_107208_110350 = state_107186__$1;
(statearr_107208_110350[(5)] = ex107200);


var statearr_107209_110351 = state_107186__$1;
(statearr_107209_110351[(1)] = (19));

(statearr_107209_110351[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (72))){
var inst_107040 = (state_107186[(2)]);
var state_107186__$1 = state_107186;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_107186__$1,(69),inst_107040);
} else {
if((state_val_107187 === (58))){
var inst_106990 = (state_107186[(2)]);
var inst_106991 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_106992 = "(\n0\n \n1\n \n2\n)";
var inst_106993 = matcher_combinators.core.match("(\n0\n \n1\n \n2\n)",inst_106990);
var inst_106994 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_106990], 0));
var inst_106995 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_106993);
var inst_106996 = matcher_combinators.printer.as_string(inst_106995);
var inst_106997 = [inst_106994,"\n\nMismatch:\n",inst_106996].join('');
var inst_106998 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_106993);
var inst_106999 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_106998);
var inst_107000 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_107186__$1 = (function (){var statearr_107212 = state_107186;
(statearr_107212[(13)] = inst_107000);

(statearr_107212[(14)] = inst_106992);

(statearr_107212[(15)] = inst_106991);

(statearr_107212[(16)] = inst_106997);

return statearr_107212;
})();
if(inst_106999){
var statearr_107213_110352 = state_107186__$1;
(statearr_107213_110352[(1)] = (62));

} else {
var statearr_107214_110353 = state_107186__$1;
(statearr_107214_110353[(1)] = (63));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (60))){
var inst_106986 = repl_tooling.integration.fake_editor.change_result();
var state_107186__$1 = state_107186;
var statearr_107215_110354 = state_107186__$1;
(statearr_107215_110354[(2)] = inst_106986);

(statearr_107215_110354[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (27))){
var _ = (function (){var statearr_107216 = state_107186;
(statearr_107216[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107216;
})();
var state_107186__$1 = state_107186;
var ex107210 = (state_107186__$1[(2)]);
var statearr_107218_110355 = state_107186__$1;
(statearr_107218_110355[(5)] = ex107210);


throw ex107210;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (1))){
var inst_106672 = (state_107186[(8)]);
var inst_106671 = (function (){return (function (){
cljs.core.async.close_BANG_(self__.reg);

repl_tooling.integration.fake_editor.disconnect_BANG_();

return (done__53962__auto__.cljs$core$IFn$_invoke$arity$0 ? done__53962__auto__.cljs$core$IFn$_invoke$arity$0() : done__53962__auto__.call(null));
});
})();
var inst_106672__$1 = (new cljs.core.Delay(inst_106671,null));
var inst_106673 = (function (){var mark_as_done__53963__auto__ = inst_106672__$1;
return (function (){
if(cljs.core.realized_QMARK_(mark_as_done__53963__auto__)){
return null;
} else {
try{var value__9156__auto___110356 = (function(){throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)})();
if(cljs.core.truth_(value__9156__auto___110356)){
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"pass","pass",1574159993),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110356,null]));
} else {
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"fail","fail",1706214930),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110356,null]));
}

}catch (e107219){var t__9189__auto___110357 = e107219;
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"error","error",-978969032),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,t__9189__auto___110357,null]));
}
return cljs.core.deref(mark_as_done__53963__auto__);
}
});
})();
var inst_106674 = setTimeout(inst_106673,(8000));
var inst_106675 = repl_tooling.editor_integration.configs_test.change_config_file("(defn- qt [txt] (str \"'\" txt))\n                         (defn q [] (update {:code \"(+ 1 2)\"} :code qt))");
var inst_106676 = [new cljs.core.Keyword(null,"config-file-path","config-file-path",-862460128),new cljs.core.Keyword(null,"register-commands","register-commands",-552391338)];
var inst_106677 = (function (){var mark_as_done__53963__auto__ = inst_106672__$1;
return (function (cmds){
cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(self__.reg,cljs.core.set(cljs.core.keys(cmds)));

return cljs.core.reset_BANG_(repl_tooling.editor_integration.configs_test.custom_commands,cmds);
});
})();
var inst_106678 = [repl_tooling.editor_integration.configs_test.config_file,inst_106677];
var inst_106679 = cljs.core.PersistentHashMap.fromArrays(inst_106676,inst_106678);
var inst_106680 = repl_tooling.integration.fake_editor.connect_BANG_.cljs$core$IFn$_invoke$arity$1(inst_106679);
var inst_106681 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106682 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106683 = (new cljs.core.PersistentVector(null,1,(5),inst_106681,inst_106682,null));
var inst_106684 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_106683,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["when connected, new commands are registered"], 0));
var state_107186__$1 = (function (){var statearr_107221 = state_107186;
(statearr_107221[(17)] = inst_106684);

(statearr_107221[(18)] = inst_106675);

(statearr_107221[(19)] = inst_106674);

(statearr_107221[(20)] = inst_106680);

(statearr_107221[(8)] = inst_106672__$1);

return statearr_107221;
})();
var statearr_107222_110358 = state_107186__$1;
(statearr_107222_110358[(2)] = null);

(statearr_107222_110358[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (69))){
var inst_107042 = (state_107186[(2)]);
var inst_107043 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_107044 = new cljs.core.Keyword(null,"long-str","long-str",184146513).cljs$core$IFn$_invoke$arity$1(inst_107043);
var inst_107045 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_107044);
var inst_107046 = (inst_107045.cljs$core$IFn$_invoke$arity$0 ? inst_107045.cljs$core$IFn$_invoke$arity$0() : inst_107045.call(null));
var state_107186__$1 = (function (){var statearr_107224 = state_107186;
(statearr_107224[(21)] = inst_107046);

(statearr_107224[(22)] = inst_107042);

return statearr_107224;
})();
var statearr_107225_110359 = state_107186__$1;
(statearr_107225_110359[(2)] = null);

(statearr_107225_110359[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (101))){
var state_107186__$1 = state_107186;
var statearr_107227_110360 = state_107186__$1;
(statearr_107227_110360[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_107227_110360[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (24))){
var _ = (function (){var statearr_107228 = state_107186;
(statearr_107228[(4)] = cljs.core.cons((26),(state_107186[(4)])));

return statearr_107228;
})();
var ___$1 = (function (){var statearr_107229 = state_107186;
(statearr_107229[(4)] = cljs.core.cons((27),(state_107186[(4)])));

return statearr_107229;
})();
var inst_106826 = repl_tooling.editor_integration.configs_test.change_config_file("(defn p [args] :end)");
var inst_106827 = (self__.reg instanceof Promise);
var state_107186__$1 = (function (){var statearr_107230 = state_107186;
(statearr_107230[(23)] = inst_106826);

return statearr_107230;
})();
if(cljs.core.truth_(inst_106827)){
var statearr_107231_110361 = state_107186__$1;
(statearr_107231_110361[(1)] = (29));

} else {
var statearr_107232_110362 = state_107186__$1;
(statearr_107232_110362[(1)] = (30));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (102))){
var inst_107169 = (state_107186[(24)]);
var inst_107161 = (state_107186[(25)]);
var inst_107166 = (state_107186[(26)]);
var inst_107173 = (state_107186[(2)]);
var inst_107174 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_107166);
var inst_107175 = [inst_107173,inst_107161,inst_107174];
var inst_107176 = cljs.core.PersistentHashMap.fromArrays(inst_107169,inst_107175);
var inst_107177 = cljs.test.do_report(inst_107176);
var _ = (function (){var statearr_107233 = state_107186;
(statearr_107233[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107233;
})();
var state_107186__$1 = state_107186;
var statearr_107234_110363 = state_107186__$1;
(statearr_107234_110363[(2)] = inst_107177);

(statearr_107234_110363[(1)] = (93));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (55))){
var inst_107011 = (state_107186[(2)]);
var _ = (function (){var statearr_107235 = state_107186;
(statearr_107235[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107235;
})();
var state_107186__$1 = state_107186;
var statearr_107236_110364 = state_107186__$1;
(statearr_107236_110364[(2)] = inst_107011);

(statearr_107236_110364[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (85))){
var inst_106672 = (state_107186[(8)]);
var inst_107183 = (state_107186[(2)]);
var inst_107184 = cljs.core.deref(inst_106672);
var state_107186__$1 = (function (){var statearr_107237 = state_107186;
(statearr_107237[(27)] = inst_107183);

return statearr_107237;
})();
return cljs.core.async.impl.ioc_helpers.return_chan(state_107186__$1,inst_107184);
} else {
if((state_val_107187 === (39))){
var _ = (function (){var statearr_107238 = state_107186;
(statearr_107238[(4)] = cljs.core.cons((42),(state_107186[(4)])));

return statearr_107238;
})();
var inst_106898 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_106899 = [new cljs.core.Keyword(null,"p","p",151049309)];
var inst_106900 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_106901 = [cljs.core.fn_QMARK_];
var inst_106902 = cljs.core.PersistentHashMap.fromArrays(inst_106900,inst_106901);
var inst_106903 = [inst_106902];
var inst_106904 = cljs.core.PersistentHashMap.fromArrays(inst_106899,inst_106903);
var inst_106905 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_106906 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_106907 = matcher_combinators.core.match(inst_106904,inst_106898);
var inst_106908 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_106898], 0));
var inst_106909 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_106907);
var inst_106910 = matcher_combinators.printer.as_string(inst_106909);
var inst_106911 = [inst_106908,"\n\nMismatch:\n",inst_106910].join('');
var inst_106912 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_106907);
var inst_106913 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_106912);
var inst_106914 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_107186__$1 = (function (){var statearr_107239 = state_107186;
(statearr_107239[(28)] = inst_106905);

(statearr_107239[(29)] = inst_106914);

(statearr_107239[(30)] = inst_106911);

(statearr_107239[(31)] = inst_106906);

return statearr_107239;
})();
if(inst_106913){
var statearr_107240_110365 = state_107186__$1;
(statearr_107240_110365[(1)] = (43));

} else {
var statearr_107241_110366 = state_107186__$1;
(statearr_107241_110366[(1)] = (44));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (88))){
var inst_107127 = (state_107186[(2)]);
var inst_107128 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_107129 = new cljs.core.Keyword(null,"error","error",-978969032).cljs$core$IFn$_invoke$arity$1(inst_107128);
var inst_107130 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_107129);
var inst_107131 = (inst_107130.cljs$core$IFn$_invoke$arity$0 ? inst_107130.cljs$core$IFn$_invoke$arity$0() : inst_107130.call(null));
var state_107186__$1 = (function (){var statearr_107242 = state_107186;
(statearr_107242[(32)] = inst_107131);

(statearr_107242[(33)] = inst_107127);

return statearr_107242;
})();
var statearr_107243_110367 = state_107186__$1;
(statearr_107243_110367[(2)] = null);

(statearr_107243_110367[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (46))){
var _ = (function (){var statearr_107244 = state_107186;
(statearr_107244[(4)] = cljs.core.cons((48),(state_107186[(4)])));

return statearr_107244;
})();
var ___$1 = (function (){var statearr_107245 = state_107186;
(statearr_107245[(4)] = cljs.core.cons((49),(state_107186[(4)])));

return statearr_107245;
})();
var inst_106947 = repl_tooling.integration.fake_editor.type("(range 3)");
var inst_106948 = repl_tooling.editor_integration.configs_test.change_config_file("(defn e-block [] (p/let [data (editor/get-top-block)]\n          (editor/eval-and-render data)))");
var inst_106949 = (self__.reg instanceof Promise);
var state_107186__$1 = (function (){var statearr_107246 = state_107186;
(statearr_107246[(34)] = inst_106947);

(statearr_107246[(35)] = inst_106948);

return statearr_107246;
})();
if(cljs.core.truth_(inst_106949)){
var statearr_107247_110368 = state_107186__$1;
(statearr_107247_110368[(1)] = (51));

} else {
var statearr_107248_110369 = state_107186__$1;
(statearr_107248_110369[(1)] = (52));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (4))){
var _ = (function (){var statearr_107250 = state_107186;
(statearr_107250[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107250;
})();
var inst_106686 = (state_107186[(2)]);
var inst_106687 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106688 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106689 = (new cljs.core.PersistentVector(null,1,(5),inst_106687,inst_106688,null));
var inst_106690 = cljs.test.update_current_env_BANG_(inst_106689,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_107186[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_107186__$1 = (function (){var statearr_107251 = state_107186;
(statearr_107251[(36)] = inst_106690);

return statearr_107251;
})();
var statearr_107252_110370 = state_107186__$1;
(statearr_107252_110370[(2)] = inst_106686);

(statearr_107252_110370[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (77))){
var inst_107074 = (state_107186[(2)]);
var inst_107075 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-stdout","editor/change-stdout",294315011,null)));
var inst_107076 = /a-01234567891011.*/;
var inst_107077 = matcher_combinators.core.match(/a-01234567891011.*/,inst_107074);
var inst_107078 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_107074], 0));
var inst_107079 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_107077);
var inst_107080 = matcher_combinators.printer.as_string(inst_107079);
var inst_107081 = [inst_107078,"\n\nMismatch:\n",inst_107080].join('');
var inst_107082 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_107077);
var inst_107083 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_107082);
var inst_107084 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_107186__$1 = (function (){var statearr_107253 = state_107186;
(statearr_107253[(37)] = inst_107084);

(statearr_107253[(38)] = inst_107076);

(statearr_107253[(39)] = inst_107075);

(statearr_107253[(40)] = inst_107081);

return statearr_107253;
})();
if(inst_107083){
var statearr_107254_110371 = state_107186__$1;
(statearr_107254_110371[(1)] = (81));

} else {
var statearr_107255_110372 = state_107186__$1;
(statearr_107255_110372[(1)] = (82));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (95))){
var _ = (function (){var statearr_107256 = state_107186;
(statearr_107256[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107256;
})();
var state_107186__$1 = state_107186;
var ex107249 = (state_107186__$1[(2)]);
var statearr_107257_110373 = state_107186__$1;
(statearr_107257_110373[(5)] = ex107249);


var statearr_107258_110374 = state_107186__$1;
(statearr_107258_110374[(1)] = (94));

(statearr_107258_110374[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (54))){
var _ = (function (){var statearr_107260 = state_107186;
(statearr_107260[(4)] = cljs.core.cons((57),(state_107186[(4)])));

return statearr_107260;
})();
var inst_106978 = repl_tooling.integration.fake_editor.change_result();
var inst_106979 = (inst_106978 instanceof Promise);
var state_107186__$1 = state_107186;
if(cljs.core.truth_(inst_106979)){
var statearr_107261_110375 = state_107186__$1;
(statearr_107261_110375[(1)] = (59));

} else {
var statearr_107262_110376 = state_107186__$1;
(statearr_107262_110376[(1)] = (60));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (92))){
var _ = (function (){var statearr_107264 = state_107186;
(statearr_107264[(4)] = cljs.core.cons((95),(state_107186[(4)])));

return statearr_107264;
})();
var inst_107147 = repl_tooling.integration.fake_editor.change_result();
var inst_107148 = (inst_107147 instanceof Promise);
var state_107186__$1 = state_107186;
if(cljs.core.truth_(inst_107148)){
var statearr_107267_110377 = state_107186__$1;
(statearr_107267_110377[(1)] = (97));

} else {
var statearr_107268_110378 = state_107186__$1;
(statearr_107268_110378[(1)] = (98));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (15))){
var state_107186__$1 = state_107186;
var statearr_107269_110379 = state_107186__$1;
(statearr_107269_110379[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_107269_110379[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (48))){
var _ = (function (){var statearr_107271 = state_107186;
(statearr_107271[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107271;
})();
var inst_106935 = (state_107186[(2)]);
var inst_106936 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106937 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106938 = (new cljs.core.PersistentVector(null,1,(5),inst_106936,inst_106937,null));
var inst_106939 = cljs.test.update_current_env_BANG_(inst_106938,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_107186[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_107186__$1 = (function (){var statearr_107272 = state_107186;
(statearr_107272[(41)] = inst_106939);

return statearr_107272;
})();
var statearr_107274_110380 = state_107186__$1;
(statearr_107274_110380[(2)] = inst_106935);

(statearr_107274_110380[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (50))){
var inst_106958 = (state_107186[(2)]);
var inst_106959 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_106960 = new cljs.core.Keyword(null,"e-block","e-block",964370856).cljs$core$IFn$_invoke$arity$1(inst_106959);
var inst_106961 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_106960);
var inst_106962 = (inst_106961.cljs$core$IFn$_invoke$arity$0 ? inst_106961.cljs$core$IFn$_invoke$arity$0() : inst_106961.call(null));
var state_107186__$1 = (function (){var statearr_107275 = state_107186;
(statearr_107275[(42)] = inst_106962);

(statearr_107275[(43)] = inst_106958);

return statearr_107275;
})();
var statearr_107276_110381 = state_107186__$1;
(statearr_107276_110381[(2)] = null);

(statearr_107276_110381[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (75))){
var inst_107047 = (state_107186[(2)]);
var inst_107048 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_107049 = check.core.normalize_error(inst_107047);
var inst_107050 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-stdout","editor/change-stdout",294315011,null)));
var inst_107051 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_107052 = /a-01234567891011.*/;
var inst_107053 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107050)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107051)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107052)].join('');
var inst_107054 = [new cljs.core.Keyword(null,"error","error",-978969032),/a-01234567891011.*/,inst_107049,inst_107053];
var inst_107055 = cljs.core.PersistentHashMap.fromArrays(inst_107048,inst_107054);
var inst_107056 = cljs.test.do_report(inst_107055);
var state_107186__$1 = state_107186;
var statearr_107279_110382 = state_107186__$1;
(statearr_107279_110382[(2)] = inst_107056);

(statearr_107279_110382[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (99))){
var inst_107157 = (state_107186[(2)]);
var state_107186__$1 = state_107186;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_107186__$1,(96),inst_107157);
} else {
if((state_val_107187 === (21))){
var state_107186__$1 = state_107186;
var statearr_107281_110383 = state_107186__$1;
(statearr_107281_110383[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_107281_110383[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (31))){
var inst_106834 = (state_107186[(2)]);
var state_107186__$1 = state_107186;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_107186__$1,(28),inst_106834);
} else {
if((state_val_107187 === (32))){
var _ = (function (){var statearr_107282 = state_107186;
(statearr_107282[(4)] = cljs.core.cons((35),(state_107186[(4)])));

return statearr_107282;
})();
var inst_106852 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_106853 = new cljs.core.Keyword(null,"q","q",689001697).cljs$core$IFn$_invoke$arity$1(inst_106852);
var inst_106854 = cljs.core.list(new cljs.core.Keyword(null,"q","q",689001697),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)));
var inst_106855 = null;
var inst_106856 = matcher_combinators.core.match(null,inst_106853);
var inst_106857 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_106853], 0));
var inst_106859 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_106856);
var inst_106860 = matcher_combinators.printer.as_string(inst_106859);
var inst_106861 = [inst_106857,"\n\nMismatch:\n",inst_106860].join('');
var inst_106862 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_106856);
var inst_106863 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_106862);
var inst_106864 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_107186__$1 = (function (){var statearr_107283 = state_107186;
(statearr_107283[(44)] = inst_106855);

(statearr_107283[(45)] = inst_106854);

(statearr_107283[(46)] = inst_106861);

(statearr_107283[(47)] = inst_106864);

return statearr_107283;
})();
if(inst_106863){
var statearr_107284_110384 = state_107186__$1;
(statearr_107284_110384[(1)] = (36));

} else {
var statearr_107285_110385 = state_107186__$1;
(statearr_107285_110385[(1)] = (37));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (40))){
var inst_106925 = (state_107186[(2)]);
var _ = (function (){var statearr_107286 = state_107186;
(statearr_107286[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107286;
})();
var state_107186__$1 = state_107186;
var statearr_107288_110386 = state_107186__$1;
(statearr_107288_110386[(2)] = inst_106925);

(statearr_107288_110386[(1)] = (26));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (91))){
var inst_107125 = (state_107186[(2)]);
var state_107186__$1 = state_107186;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_107186__$1,(88),inst_107125);
} else {
if((state_val_107187 === (56))){
var inst_106963 = (state_107186[(2)]);
var inst_106964 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_106965 = check.core.normalize_error(inst_106963);
var inst_106966 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_106967 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_106968 = "(\n0\n \n1\n \n2\n)";
var inst_106969 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106966)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106967)," ",inst_106968].join('');
var inst_106970 = [new cljs.core.Keyword(null,"error","error",-978969032),"(\n0\n \n1\n \n2\n)",inst_106965,inst_106969];
var inst_106971 = cljs.core.PersistentHashMap.fromArrays(inst_106964,inst_106970);
var inst_106972 = cljs.test.do_report(inst_106971);
var state_107186__$1 = state_107186;
var statearr_107291_110387 = state_107186__$1;
(statearr_107291_110387[(2)] = inst_106972);

(statearr_107291_110387[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (33))){
var inst_106875 = (state_107186[(2)]);
var state_107186__$1 = (function (){var statearr_107292 = state_107186;
(statearr_107292[(48)] = inst_106875);

return statearr_107292;
})();
var statearr_107293_110388 = state_107186__$1;
(statearr_107293_110388[(2)] = null);

(statearr_107293_110388[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (13))){
var _ = (function (){var statearr_107295 = state_107186;
(statearr_107295[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107295;
})();
var state_107186__$1 = state_107186;
var ex107289 = (state_107186__$1[(2)]);
var statearr_107296_110389 = state_107186__$1;
(statearr_107296_110389[(5)] = ex107289);


var statearr_107297_110390 = state_107186__$1;
(statearr_107297_110390[(1)] = (12));

(statearr_107297_110390[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (22))){
var state_107186__$1 = state_107186;
var statearr_107299_110391 = state_107186__$1;
(statearr_107299_110391[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_107299_110391[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (90))){
var state_107186__$1 = state_107186;
var statearr_107300_110392 = state_107186__$1;
(statearr_107300_110392[(2)] = self__.reg);

(statearr_107300_110392[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (36))){
var state_107186__$1 = state_107186;
var statearr_107302_110393 = state_107186__$1;
(statearr_107302_110393[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_107302_110393[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (41))){
var inst_106876 = (state_107186[(2)]);
var inst_106877 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_106878 = [new cljs.core.Keyword(null,"p","p",151049309)];
var inst_106879 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_106880 = [cljs.core.fn_QMARK_];
var inst_106881 = cljs.core.PersistentHashMap.fromArrays(inst_106879,inst_106880);
var inst_106882 = [inst_106881];
var inst_106883 = cljs.core.PersistentHashMap.fromArrays(inst_106878,inst_106882);
var inst_106884 = check.core.normalize_error(inst_106876);
var inst_106885 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_106886 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_106888 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_106889 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106885)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106886)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106888)].join('');
var inst_106890 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_106883,inst_106884,inst_106889];
var inst_106891 = cljs.core.PersistentHashMap.fromArrays(inst_106877,inst_106890);
var inst_106892 = cljs.test.do_report(inst_106891);
var state_107186__$1 = state_107186;
var statearr_107305_110394 = state_107186__$1;
(statearr_107305_110394[(2)] = inst_106892);

(statearr_107305_110394[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (89))){
var inst_106672 = (state_107186[(8)]);
var inst_107120 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107121 = (function (){var mark_as_done__53963__auto__ = inst_106672;
var chan__53977__auto__ = inst_107120;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107122 = self__.reg.then(inst_107121);
var state_107186__$1 = (function (){var statearr_107307 = state_107186;
(statearr_107307[(49)] = inst_107122);

return statearr_107307;
})();
var statearr_107308_110395 = state_107186__$1;
(statearr_107308_110395[(2)] = inst_107120);

(statearr_107308_110395[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (100))){
var state_107186__$1 = state_107186;
var statearr_107309_110396 = state_107186__$1;
(statearr_107309_110396[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_107309_110396[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (43))){
var state_107186__$1 = state_107186;
var statearr_107310_110397 = state_107186__$1;
(statearr_107310_110397[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_107310_110397[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (61))){
var inst_106988 = (state_107186[(2)]);
var state_107186__$1 = state_107186;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_107186__$1,(58),inst_106988);
} else {
if((state_val_107187 === (29))){
var inst_106672 = (state_107186[(8)]);
var inst_106829 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_106830 = (function (){var mark_as_done__53963__auto__ = inst_106672;
var chan__53977__auto__ = inst_106829;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_106831 = self__.reg.then(inst_106830);
var state_107186__$1 = (function (){var statearr_107313 = state_107186;
(statearr_107313[(50)] = inst_106831);

return statearr_107313;
})();
var statearr_107314_110398 = state_107186__$1;
(statearr_107314_110398[(2)] = inst_106829);

(statearr_107314_110398[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (44))){
var state_107186__$1 = state_107186;
var statearr_107315_110399 = state_107186__$1;
(statearr_107315_110399[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_107315_110399[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (93))){
var inst_107180 = (state_107186[(2)]);
var _ = (function (){var statearr_107317 = state_107186;
(statearr_107317[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107317;
})();
var state_107186__$1 = state_107186;
var statearr_107318_110400 = state_107186__$1;
(statearr_107318_110400[(2)] = inst_107180);

(statearr_107318_110400[(1)] = (86));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (6))){
var inst_106707 = (state_107186[(2)]);
var state_107186__$1 = (function (){var statearr_107319 = state_107186;
(statearr_107319[(51)] = inst_106707);

return statearr_107319;
})();
var statearr_107321_110401 = state_107186__$1;
(statearr_107321_110401[(2)] = null);

(statearr_107321_110401[(1)] = (10));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (28))){
var inst_106836 = (state_107186[(2)]);
var state_107186__$1 = (function (){var statearr_107322 = state_107186;
(statearr_107322[(52)] = inst_106836);

return statearr_107322;
})();
var statearr_107323_110402 = state_107186__$1;
(statearr_107323_110402[(2)] = null);

(statearr_107323_110402[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (64))){
var inst_107000 = (state_107186[(13)]);
var inst_106992 = (state_107186[(14)]);
var inst_106997 = (state_107186[(16)]);
var inst_107004 = (state_107186[(2)]);
var inst_107005 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_106997);
var inst_107006 = [inst_107004,inst_106992,inst_107005];
var inst_107007 = cljs.core.PersistentHashMap.fromArrays(inst_107000,inst_107006);
var inst_107008 = cljs.test.do_report(inst_107007);
var _ = (function (){var statearr_107325 = state_107186;
(statearr_107325[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107325;
})();
var state_107186__$1 = state_107186;
var statearr_107326_110403 = state_107186__$1;
(statearr_107326_110403[(2)] = inst_107008);

(statearr_107326_110403[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (51))){
var inst_106672 = (state_107186[(8)]);
var inst_106951 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_106952 = (function (){var mark_as_done__53963__auto__ = inst_106672;
var chan__53977__auto__ = inst_106951;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_106953 = self__.reg.then(inst_106952);
var state_107186__$1 = (function (){var statearr_107328 = state_107186;
(statearr_107328[(53)] = inst_106953);

return statearr_107328;
})();
var statearr_107330_110404 = state_107186__$1;
(statearr_107330_110404[(2)] = inst_106951);

(statearr_107330_110404[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (25))){
var inst_106928 = (state_107186[(2)]);
var inst_106929 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106930 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106931 = (new cljs.core.PersistentVector(null,1,(5),inst_106929,inst_106930,null));
var inst_106932 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_106931,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["getting blocks"], 0));
var state_107186__$1 = (function (){var statearr_107332 = state_107186;
(statearr_107332[(54)] = inst_106928);

(statearr_107332[(55)] = inst_106932);

return statearr_107332;
})();
var statearr_107333_110405 = state_107186__$1;
(statearr_107333_110405[(2)] = null);

(statearr_107333_110405[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (34))){
var inst_106837 = (state_107186[(2)]);
var inst_106838 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_106839 = check.core.normalize_error(inst_106837);
var inst_106840 = cljs.core.list(new cljs.core.Keyword(null,"q","q",689001697),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)));
var inst_106841 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_106842 = null;
var inst_106843 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106840)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106841)," ",inst_106842].join('');
var inst_106844 = [new cljs.core.Keyword(null,"error","error",-978969032),null,inst_106839,inst_106843];
var inst_106845 = cljs.core.PersistentHashMap.fromArrays(inst_106838,inst_106844);
var inst_106846 = cljs.test.do_report(inst_106845);
var state_107186__$1 = state_107186;
var statearr_107335_110406 = state_107186__$1;
(statearr_107335_110406[(2)] = inst_106846);

(statearr_107335_110406[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (17))){
var _ = (function (){var statearr_107339 = state_107186;
(statearr_107339[(4)] = cljs.core.cons((20),(state_107186[(4)])));

return statearr_107339;
})();
var inst_106775 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_106776 = new cljs.core.Keyword(null,"q","q",689001697).cljs$core$IFn$_invoke$arity$1(inst_106775);
var inst_106777 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_106776);
var inst_106778 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_106779 = ["(+ 1 2)"];
var inst_106780 = cljs.core.PersistentHashMap.fromArrays(inst_106778,inst_106779);
var inst_106781 = (inst_106777.cljs$core$IFn$_invoke$arity$1 ? inst_106777.cljs$core$IFn$_invoke$arity$1(inst_106780) : inst_106777.call(null,inst_106780));
var inst_106782 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_106783 = ["'(+ 1 2)"];
var inst_106784 = cljs.core.PersistentHashMap.fromArrays(inst_106782,inst_106783);
var inst_106785 = cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)),new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.Keyword(null,"command","command",-894540724)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)"], null));
var inst_106786 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"'(+ 1 2)"], null);
var inst_106787 = matcher_combinators.core.match(inst_106784,inst_106781);
var inst_106788 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_106781], 0));
var inst_106789 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_106787);
var inst_106790 = matcher_combinators.printer.as_string(inst_106789);
var inst_106791 = [inst_106788,"\n\nMismatch:\n",inst_106790].join('');
var inst_106792 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_106787);
var inst_106793 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_106792);
var inst_106794 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_107186__$1 = (function (){var statearr_107341 = state_107186;
(statearr_107341[(56)] = inst_106786);

(statearr_107341[(57)] = inst_106794);

(statearr_107341[(58)] = inst_106791);

(statearr_107341[(59)] = inst_106785);

return statearr_107341;
})();
if(inst_106793){
var statearr_107342_110407 = state_107186__$1;
(statearr_107342_110407[(1)] = (21));

} else {
var statearr_107343_110408 = state_107186__$1;
(statearr_107343_110408[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (3))){
var inst_106808 = (state_107186[(2)]);
var inst_106809 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106810 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106811 = (new cljs.core.PersistentVector(null,1,(5),inst_106809,inst_106810,null));
var inst_106812 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_106811,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["when changing the file, new commands are registered"], 0));
var state_107186__$1 = (function (){var statearr_107345 = state_107186;
(statearr_107345[(60)] = inst_106812);

(statearr_107345[(61)] = inst_106808);

return statearr_107345;
})();
var statearr_107346_110409 = state_107186__$1;
(statearr_107346_110409[(2)] = null);

(statearr_107346_110409[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (12))){
var inst_106708 = (state_107186[(2)]);
var inst_106709 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_106710 = [new cljs.core.Keyword(null,"q","q",689001697)];
var inst_106711 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_106712 = [cljs.core.fn_QMARK_];
var inst_106713 = cljs.core.PersistentHashMap.fromArrays(inst_106711,inst_106712);
var inst_106714 = [inst_106713];
var inst_106715 = cljs.core.PersistentHashMap.fromArrays(inst_106710,inst_106714);
var inst_106716 = check.core.normalize_error(inst_106708);
var inst_106717 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_106718 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_106719 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_106720 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106717)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106718)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106719)].join('');
var inst_106721 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_106715,inst_106716,inst_106720];
var inst_106722 = cljs.core.PersistentHashMap.fromArrays(inst_106709,inst_106721);
var inst_106723 = cljs.test.do_report(inst_106722);
var state_107186__$1 = state_107186;
var statearr_107350_110410 = state_107186__$1;
(statearr_107350_110410[(2)] = inst_106723);

(statearr_107350_110410[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (2))){
var _ = (function (){var statearr_107351 = state_107186;
(statearr_107351[(4)] = cljs.core.cons((4),(state_107186[(4)])));

return statearr_107351;
})();
var ___$1 = (function (){var statearr_107352 = state_107186;
(statearr_107352[(4)] = cljs.core.cons((5),(state_107186[(4)])));

return statearr_107352;
})();
var inst_106698 = (self__.reg instanceof Promise);
var state_107186__$1 = state_107186;
if(cljs.core.truth_(inst_106698)){
var statearr_107353_110411 = state_107186__$1;
(statearr_107353_110411[(1)] = (7));

} else {
var statearr_107354_110412 = state_107186__$1;
(statearr_107354_110412[(1)] = (8));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (66))){
var inst_107098 = (state_107186[(2)]);
var inst_107099 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107100 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107101 = (new cljs.core.PersistentVector(null,1,(5),inst_107099,inst_107100,null));
var inst_107102 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_107101,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["checking for errors"], 0));
var state_107186__$1 = (function (){var statearr_107355 = state_107186;
(statearr_107355[(62)] = inst_107102);

(statearr_107355[(63)] = inst_107098);

return statearr_107355;
})();
var statearr_107356_110413 = state_107186__$1;
(statearr_107356_110413[(2)] = null);

(statearr_107356_110413[(1)] = (84));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (23))){
var inst_106786 = (state_107186[(56)]);
var inst_106794 = (state_107186[(57)]);
var inst_106791 = (state_107186[(58)]);
var inst_106798 = (state_107186[(2)]);
var inst_106799 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_106791);
var inst_106800 = [inst_106798,inst_106786,inst_106799];
var inst_106801 = cljs.core.PersistentHashMap.fromArrays(inst_106794,inst_106800);
var inst_106802 = cljs.test.do_report(inst_106801);
var _ = (function (){var statearr_107359 = state_107186;
(statearr_107359[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107359;
})();
var state_107186__$1 = state_107186;
var statearr_107360_110414 = state_107186__$1;
(statearr_107360_110414[(2)] = inst_106802);

(statearr_107360_110414[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (47))){
var inst_107014 = (state_107186[(2)]);
var inst_107015 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107016 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107017 = (new cljs.core.PersistentVector(null,1,(5),inst_107015,inst_107016,null));
var inst_107018 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_107017,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["UNREPL reader tags (IncompleteStr)"], 0));
var state_107186__$1 = (function (){var statearr_107363 = state_107186;
(statearr_107363[(64)] = inst_107014);

(statearr_107363[(65)] = inst_107018);

return statearr_107363;
})();
var statearr_107364_110415 = state_107186__$1;
(statearr_107364_110415[(2)] = null);

(statearr_107364_110415[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (35))){
var _ = (function (){var statearr_107367 = state_107186;
(statearr_107367[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107367;
})();
var state_107186__$1 = state_107186;
var ex107357 = (state_107186__$1[(2)]);
var statearr_107368_110416 = state_107186__$1;
(statearr_107368_110416[(5)] = ex107357);


var statearr_107369_110417 = state_107186__$1;
(statearr_107369_110417[(1)] = (34));

(statearr_107369_110417[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (82))){
var state_107186__$1 = state_107186;
var statearr_107371_110418 = state_107186__$1;
(statearr_107371_110418[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_107371_110418[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (76))){
var _ = (function (){var statearr_107372 = state_107186;
(statearr_107372[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107372;
})();
var state_107186__$1 = state_107186;
var ex107365 = (state_107186__$1[(2)]);
var statearr_107373_110419 = state_107186__$1;
(statearr_107373_110419[(5)] = ex107365);


var statearr_107374_110420 = state_107186__$1;
(statearr_107374_110420[(1)] = (75));

(statearr_107374_110420[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (97))){
var inst_106672 = (state_107186[(8)]);
var inst_107150 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107151 = repl_tooling.integration.fake_editor.change_result();
var inst_107152 = (function (){var mark_as_done__53963__auto__ = inst_106672;
var chan__53977__auto__ = inst_107150;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107153 = inst_107151.then(inst_107152);
var state_107186__$1 = (function (){var statearr_107379 = state_107186;
(statearr_107379[(66)] = inst_107153);

return statearr_107379;
})();
var statearr_107381_110421 = state_107186__$1;
(statearr_107381_110421[(2)] = inst_107150);

(statearr_107381_110421[(1)] = (99));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (19))){
var inst_106757 = (state_107186[(2)]);
var inst_106758 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_106759 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_106760 = ["'(+ 1 2)"];
var inst_106761 = cljs.core.PersistentHashMap.fromArrays(inst_106759,inst_106760);
var inst_106762 = check.core.normalize_error(inst_106757);
var inst_106763 = cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)),new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.Keyword(null,"command","command",-894540724)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)"], null));
var inst_106764 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_106765 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"'(+ 1 2)"], null);
var inst_106766 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106763)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106764)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_106765)].join('');
var inst_106767 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_106761,inst_106762,inst_106766];
var inst_106768 = cljs.core.PersistentHashMap.fromArrays(inst_106758,inst_106767);
var inst_106769 = cljs.test.do_report(inst_106768);
var state_107186__$1 = state_107186;
var statearr_107384_110422 = state_107186__$1;
(statearr_107384_110422[(2)] = inst_106769);

(statearr_107384_110422[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (57))){
var _ = (function (){var statearr_107385 = state_107186;
(statearr_107385[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107385;
})();
var state_107186__$1 = state_107186;
var ex107378 = (state_107186__$1[(2)]);
var statearr_107386_110423 = state_107186__$1;
(statearr_107386_110423[(5)] = ex107378);


var statearr_107387_110424 = state_107186__$1;
(statearr_107387_110424[(1)] = (56));

(statearr_107387_110424[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (68))){
var _ = (function (){var statearr_107389 = state_107186;
(statearr_107389[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107389;
})();
var state_107186__$1 = state_107186;
var ex107382 = (state_107186__$1[(2)]);
var statearr_107390_110425 = state_107186__$1;
(statearr_107390_110425[(5)] = ex107382);


throw ex107382;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (11))){
var inst_106756 = (state_107186[(2)]);
var state_107186__$1 = (function (){var statearr_107395 = state_107186;
(statearr_107395[(67)] = inst_106756);

return statearr_107395;
})();
var statearr_107416_110426 = state_107186__$1;
(statearr_107416_110426[(2)] = null);

(statearr_107416_110426[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (9))){
var inst_106705 = (state_107186[(2)]);
var state_107186__$1 = state_107186;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_107186__$1,(6),inst_106705);
} else {
if((state_val_107187 === (5))){
var _ = (function (){var statearr_107418 = state_107186;
(statearr_107418[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107418;
})();
var state_107186__$1 = state_107186;
var ex107394 = (state_107186__$1[(2)]);
var statearr_107421_110427 = state_107186__$1;
(statearr_107421_110427[(5)] = ex107394);


throw ex107394;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (83))){
var inst_107084 = (state_107186[(37)]);
var inst_107076 = (state_107186[(38)]);
var inst_107081 = (state_107186[(40)]);
var inst_107088 = (state_107186[(2)]);
var inst_107089 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_107081);
var inst_107090 = [inst_107088,inst_107076,inst_107089];
var inst_107091 = cljs.core.PersistentHashMap.fromArrays(inst_107084,inst_107090);
var inst_107092 = cljs.test.do_report(inst_107091);
var _ = (function (){var statearr_107423 = state_107186;
(statearr_107423[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107423;
})();
var state_107186__$1 = state_107186;
var statearr_107424_110428 = state_107186__$1;
(statearr_107424_110428[(2)] = inst_107092);

(statearr_107424_110428[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (14))){
var state_107186__$1 = state_107186;
var statearr_107426_110429 = state_107186__$1;
(statearr_107426_110429[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_107426_110429[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (45))){
var inst_106914 = (state_107186[(29)]);
var inst_106911 = (state_107186[(30)]);
var inst_106906 = (state_107186[(31)]);
var inst_106918 = (state_107186[(2)]);
var inst_106919 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_106911);
var inst_106920 = [inst_106918,inst_106906,inst_106919];
var inst_106921 = cljs.core.PersistentHashMap.fromArrays(inst_106914,inst_106920);
var inst_106922 = cljs.test.do_report(inst_106921);
var _ = (function (){var statearr_107430 = state_107186;
(statearr_107430[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107430;
})();
var state_107186__$1 = state_107186;
var statearr_107432_110430 = state_107186__$1;
(statearr_107432_110430[(2)] = inst_106922);

(statearr_107432_110430[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (53))){
var inst_106956 = (state_107186[(2)]);
var state_107186__$1 = state_107186;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_107186__$1,(50),inst_106956);
} else {
if((state_val_107187 === (78))){
var inst_106672 = (state_107186[(8)]);
var inst_107065 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107066 = repl_tooling.integration.fake_editor.change_stdout();
var inst_107067 = (function (){var mark_as_done__53963__auto__ = inst_106672;
var chan__53977__auto__ = inst_107065;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107068 = inst_107066.then(inst_107067);
var state_107186__$1 = (function (){var statearr_107438 = state_107186;
(statearr_107438[(68)] = inst_107068);

return statearr_107438;
})();
var statearr_107440_110431 = state_107186__$1;
(statearr_107440_110431[(2)] = inst_107065);

(statearr_107440_110431[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (26))){
var _ = (function (){var statearr_107441 = state_107186;
(statearr_107441[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107441;
})();
var inst_106814 = (state_107186[(2)]);
var inst_106815 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_106816 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_106817 = (new cljs.core.PersistentVector(null,1,(5),inst_106815,inst_106816,null));
var inst_106818 = cljs.test.update_current_env_BANG_(inst_106817,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_107186[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_107186__$1 = (function (){var statearr_107442 = state_107186;
(statearr_107442[(69)] = inst_106818);

return statearr_107442;
})();
var statearr_107443_110432 = state_107186__$1;
(statearr_107443_110432[(2)] = inst_106814);

(statearr_107443_110432[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (16))){
var inst_106745 = (state_107186[(70)]);
var inst_106742 = (state_107186[(71)]);
var inst_106737 = (state_107186[(72)]);
var inst_106749 = (state_107186[(2)]);
var inst_106750 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_106742);
var inst_106751 = [inst_106749,inst_106737,inst_106750];
var inst_106752 = cljs.core.PersistentHashMap.fromArrays(inst_106745,inst_106751);
var inst_106753 = cljs.test.do_report(inst_106752);
var _ = (function (){var statearr_107444 = state_107186;
(statearr_107444[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107444;
})();
var state_107186__$1 = state_107186;
var statearr_107445_110433 = state_107186__$1;
(statearr_107445_110433[(2)] = inst_106753);

(statearr_107445_110433[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (81))){
var state_107186__$1 = state_107186;
var statearr_107446_110434 = state_107186__$1;
(statearr_107446_110434[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_107446_110434[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (79))){
var inst_107070 = repl_tooling.integration.fake_editor.change_stdout();
var state_107186__$1 = state_107186;
var statearr_107447_110435 = state_107186__$1;
(statearr_107447_110435[(2)] = inst_107070);

(statearr_107447_110435[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (38))){
var inst_106855 = (state_107186[(44)]);
var inst_106861 = (state_107186[(46)]);
var inst_106864 = (state_107186[(47)]);
var inst_106868 = (state_107186[(2)]);
var inst_106869 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_106861);
var inst_106870 = [inst_106868,inst_106855,inst_106869];
var inst_106871 = cljs.core.PersistentHashMap.fromArrays(inst_106864,inst_106870);
var inst_106872 = cljs.test.do_report(inst_106871);
var _ = (function (){var statearr_107449 = state_107186;
(statearr_107449[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107449;
})();
var state_107186__$1 = state_107186;
var statearr_107450_110436 = state_107186__$1;
(statearr_107450_110436[(2)] = inst_106872);

(statearr_107450_110436[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (98))){
var inst_107155 = repl_tooling.integration.fake_editor.change_result();
var state_107186__$1 = state_107186;
var statearr_107451_110437 = state_107186__$1;
(statearr_107451_110437[(2)] = inst_107155);

(statearr_107451_110437[(1)] = (99));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (87))){
var _ = (function (){var statearr_107452 = state_107186;
(statearr_107452[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107452;
})();
var state_107186__$1 = state_107186;
var ex107448 = (state_107186__$1[(2)]);
var statearr_107453_110438 = state_107186__$1;
(statearr_107453_110438[(5)] = ex107448);


throw ex107448;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (30))){
var state_107186__$1 = state_107186;
var statearr_107454_110439 = state_107186__$1;
(statearr_107454_110439[(2)] = self__.reg);

(statearr_107454_110439[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (73))){
var _ = (function (){var statearr_107455 = state_107186;
(statearr_107455[(4)] = cljs.core.cons((76),(state_107186[(4)])));

return statearr_107455;
})();
var inst_107062 = repl_tooling.integration.fake_editor.change_stdout();
var inst_107063 = (inst_107062 instanceof Promise);
var state_107186__$1 = state_107186;
if(cljs.core.truth_(inst_107063)){
var statearr_107456_110440 = state_107186__$1;
(statearr_107456_110440[(1)] = (78));

} else {
var statearr_107457_110441 = state_107186__$1;
(statearr_107457_110441[(1)] = (79));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (96))){
var inst_107159 = (state_107186[(2)]);
var inst_107160 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_107161 = /Some-error/;
var inst_107162 = matcher_combinators.core.match(/Some-error/,inst_107159);
var inst_107163 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_107159], 0));
var inst_107164 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_107162);
var inst_107165 = matcher_combinators.printer.as_string(inst_107164);
var inst_107166 = [inst_107163,"\n\nMismatch:\n",inst_107165].join('');
var inst_107167 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_107162);
var inst_107168 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_107167);
var inst_107169 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_107186__$1 = (function (){var statearr_107458 = state_107186;
(statearr_107458[(24)] = inst_107169);

(statearr_107458[(25)] = inst_107161);

(statearr_107458[(26)] = inst_107166);

(statearr_107458[(73)] = inst_107160);

return statearr_107458;
})();
if(inst_107168){
var statearr_107459_110442 = state_107186__$1;
(statearr_107459_110442[(1)] = (100));

} else {
var statearr_107460_110443 = state_107186__$1;
(statearr_107460_110443[(1)] = (101));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (10))){
var _ = (function (){var statearr_107461 = state_107186;
(statearr_107461[(4)] = cljs.core.cons((13),(state_107186[(4)])));

return statearr_107461;
})();
var inst_106729 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_106730 = [new cljs.core.Keyword(null,"q","q",689001697)];
var inst_106731 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_106732 = [cljs.core.fn_QMARK_];
var inst_106733 = cljs.core.PersistentHashMap.fromArrays(inst_106731,inst_106732);
var inst_106734 = [inst_106733];
var inst_106735 = cljs.core.PersistentHashMap.fromArrays(inst_106730,inst_106734);
var inst_106736 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_106737 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_106738 = matcher_combinators.core.match(inst_106735,inst_106729);
var inst_106739 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_106729], 0));
var inst_106740 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_106738);
var inst_106741 = matcher_combinators.printer.as_string(inst_106740);
var inst_106742 = [inst_106739,"\n\nMismatch:\n",inst_106741].join('');
var inst_106743 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_106738);
var inst_106744 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_106743);
var inst_106745 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_107186__$1 = (function (){var statearr_107462 = state_107186;
(statearr_107462[(70)] = inst_106745);

(statearr_107462[(74)] = inst_106736);

(statearr_107462[(71)] = inst_106742);

(statearr_107462[(72)] = inst_106737);

return statearr_107462;
})();
if(inst_106744){
var statearr_107463_110444 = state_107186__$1;
(statearr_107463_110444[(1)] = (14));

} else {
var statearr_107464_110445 = state_107186__$1;
(statearr_107464_110445[(1)] = (15));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (18))){
var inst_106805 = (state_107186[(2)]);
var _ = (function (){var statearr_107465 = state_107186;
(statearr_107465[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107465;
})();
var state_107186__$1 = state_107186;
var statearr_107466_110446 = state_107186__$1;
(statearr_107466_110446[(2)] = inst_106805);

(statearr_107466_110446[(1)] = (4));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (52))){
var state_107186__$1 = state_107186;
var statearr_107467_110447 = state_107186__$1;
(statearr_107467_110447[(2)] = self__.reg);

(statearr_107467_110447[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (67))){
var _ = (function (){var statearr_107469 = state_107186;
(statearr_107469[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107469;
})();
var inst_107020 = (state_107186[(2)]);
var inst_107021 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107022 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107023 = (new cljs.core.PersistentVector(null,1,(5),inst_107021,inst_107022,null));
var inst_107024 = cljs.test.update_current_env_BANG_(inst_107023,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_107186[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_107186__$1 = (function (){var statearr_107471 = state_107186;
(statearr_107471[(75)] = inst_107024);

return statearr_107471;
})();
var statearr_107472_110448 = state_107186__$1;
(statearr_107472_110448[(2)] = inst_107020);

(statearr_107472_110448[(1)] = (66));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (71))){
var state_107186__$1 = state_107186;
var statearr_107491_110449 = state_107186__$1;
(statearr_107491_110449[(2)] = self__.reg);

(statearr_107491_110449[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (42))){
var _ = (function (){var statearr_107492 = state_107186;
(statearr_107492[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107492;
})();
var state_107186__$1 = state_107186;
var ex107468 = (state_107186__$1[(2)]);
var statearr_107493_110450 = state_107186__$1;
(statearr_107493_110450[(5)] = ex107468);


var statearr_107494_110451 = state_107186__$1;
(statearr_107494_110451[(1)] = (41));

(statearr_107494_110451[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (80))){
var inst_107072 = (state_107186[(2)]);
var state_107186__$1 = state_107186;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_107186__$1,(77),inst_107072);
} else {
if((state_val_107187 === (37))){
var state_107186__$1 = state_107186;
var statearr_107495_110452 = state_107186__$1;
(statearr_107495_110452[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_107495_110452[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (63))){
var state_107186__$1 = state_107186;
var statearr_107497_110453 = state_107186__$1;
(statearr_107497_110453[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_107497_110453[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (94))){
var inst_107132 = (state_107186[(2)]);
var inst_107133 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_107134 = check.core.normalize_error(inst_107132);
var inst_107135 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_107136 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_107137 = /Some-error/;
var inst_107138 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107135)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107136)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107137)].join('');
var inst_107139 = [new cljs.core.Keyword(null,"error","error",-978969032),/Some-error/,inst_107134,inst_107138];
var inst_107140 = cljs.core.PersistentHashMap.fromArrays(inst_107133,inst_107139);
var inst_107141 = cljs.test.do_report(inst_107140);
var state_107186__$1 = state_107186;
var statearr_107501_110454 = state_107186__$1;
(statearr_107501_110454[(2)] = inst_107141);

(statearr_107501_110454[(1)] = (93));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (8))){
var state_107186__$1 = state_107186;
var statearr_107502_110455 = state_107186__$1;
(statearr_107502_110455[(2)] = self__.reg);

(statearr_107502_110455[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (49))){
var _ = (function (){var statearr_107505 = state_107186;
(statearr_107505[(4)] = cljs.core.rest((state_107186[(4)])));

return statearr_107505;
})();
var state_107186__$1 = state_107186;
var ex107498 = (state_107186__$1[(2)]);
var statearr_107506_110456 = state_107186__$1;
(statearr_107506_110456[(5)] = ex107498);


throw ex107498;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_107187 === (84))){
var _ = (function (){var statearr_107507 = state_107186;
(statearr_107507[(4)] = cljs.core.cons((86),(state_107186[(4)])));

return statearr_107507;
})();
var ___$1 = (function (){var statearr_107509 = state_107186;
(statearr_107509[(4)] = cljs.core.cons((87),(state_107186[(4)])));

return statearr_107509;
})();
var inst_107116 = repl_tooling.integration.fake_editor.type("(range 4)");
var inst_107117 = repl_tooling.editor_integration.configs_test.change_config_file("(defn error [] (throw (ex-info \"Some-error\" {})))");
var inst_107118 = (self__.reg instanceof Promise);
var state_107186__$1 = (function (){var statearr_107511 = state_107186;
(statearr_107511[(76)] = inst_107117);

(statearr_107511[(77)] = inst_107116);

return statearr_107511;
})();
if(cljs.core.truth_(inst_107118)){
var statearr_107512_110457 = state_107186__$1;
(statearr_107512_110457[(1)] = (89));

} else {
var statearr_107513_110458 = state_107186__$1;
(statearr_107513_110458[(1)] = (90));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});
return (function() {
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = null;
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0 = (function (){
var statearr_107520 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_107520[(0)] = repl_tooling$editor_integration$configs_test$state_machine__34940__auto__);

(statearr_107520[(1)] = (1));

return statearr_107520;
});
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1 = (function (state_107186){
while(true){
var ret_value__34941__auto__ = (function (){try{while(true){
var result__34942__auto__ = switch__34939__auto__(state_107186);
if(cljs.core.keyword_identical_QMARK_(result__34942__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
continue;
} else {
return result__34942__auto__;
}
break;
}
}catch (e107521){var ex__34943__auto__ = e107521;
var statearr_107523_110459 = state_107186;
(statearr_107523_110459[(2)] = ex__34943__auto__);


if(cljs.core.seq((state_107186[(4)]))){
var statearr_107524_110460 = state_107186;
(statearr_107524_110460[(1)] = cljs.core.first((state_107186[(4)])));

} else {
throw ex__34943__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
}})();
if(cljs.core.keyword_identical_QMARK_(ret_value__34941__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
var G__110461 = state_107186;
state_107186 = G__110461;
continue;
} else {
return ret_value__34941__auto__;
}
break;
}
});
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = function(state_107186){
switch(arguments.length){
case 0:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0.call(this);
case 1:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1.call(this,state_107186);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$0 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0;
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$1 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1;
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto__;
})()
})();
var state__35943__auto__ = (function (){var statearr_107526 = f__35942__auto__();
(statearr_107526[(6)] = c__35941__auto__);

return statearr_107526;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__35943__auto__);
}));

return c__35941__auto__;
}finally {cljs.test.update_current_env_BANG_(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.rest);
}}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.prototype.apply = (function (self__,args106670){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone(args106670)));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done__53962__auto__){
var self__ = this;
var ___9200__auto__ = this;
cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["automatically registering custom commands"], 0));

try{var c__35941__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));
cljs.core.async.impl.dispatch.run((function (){
var f__35942__auto__ = (function (){var switch__34939__auto__ = (function (state_108099){
var state_val_108105 = (state_108099[(1)]);
if((state_val_108105 === (65))){
var _ = (function (){var statearr_108111 = state_108099;
(statearr_108111[(4)] = cljs.core.cons((67),(state_108099[(4)])));

return statearr_108111;
})();
var ___$1 = (function (){var statearr_108113 = state_108099;
(statearr_108113[(4)] = cljs.core.cons((68),(state_108099[(4)])));

return statearr_108113;
})();
var inst_107926 = repl_tooling.editor_integration.configs_test.change_config_file("(defn long-str []\n                              (p/let [res (editor/eval {:text (pr-str (apply str (range 2000)))})]\n                               (prn (str \"a-\" (:result res)))))");
var inst_107927 = (self__.reg instanceof Promise);
var state_108099__$1 = (function (){var statearr_108114 = state_108099;
(statearr_108114[(7)] = inst_107926);

return statearr_108114;
})();
if(cljs.core.truth_(inst_107927)){
var statearr_108116_110462 = state_108099__$1;
(statearr_108116_110462[(1)] = (70));

} else {
var statearr_108117_110463 = state_108099__$1;
(statearr_108117_110463[(1)] = (71));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (70))){
var inst_107533 = (state_108099[(8)]);
var inst_107930 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107932 = (function (){var mark_as_done__53963__auto__ = inst_107533;
var chan__53977__auto__ = inst_107930;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107933 = self__.reg.then(inst_107932);
var state_108099__$1 = (function (){var statearr_108119 = state_108099;
(statearr_108119[(9)] = inst_107933);

return statearr_108119;
})();
var statearr_108120_110464 = state_108099__$1;
(statearr_108120_110464[(2)] = inst_107930);

(statearr_108120_110464[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (62))){
var state_108099__$1 = state_108099;
var statearr_108122_110465 = state_108099__$1;
(statearr_108122_110465[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_108122_110465[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (74))){
var inst_107996 = (state_108099[(2)]);
var _ = (function (){var statearr_108124 = state_108099;
(statearr_108124[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108124;
})();
var state_108099__$1 = state_108099;
var statearr_108125_110466 = state_108099__$1;
(statearr_108125_110466[(2)] = inst_107996);

(statearr_108125_110466[(1)] = (67));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (7))){
var inst_107533 = (state_108099[(8)]);
var inst_107569 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107571 = (function (){var mark_as_done__53963__auto__ = inst_107533;
var chan__53977__auto__ = inst_107569;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107572 = self__.reg.then(inst_107571);
var state_108099__$1 = (function (){var statearr_108128 = state_108099;
(statearr_108128[(10)] = inst_107572);

return statearr_108128;
})();
var statearr_108129_110467 = state_108099__$1;
(statearr_108129_110467[(2)] = inst_107569);

(statearr_108129_110467[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (59))){
var inst_107533 = (state_108099[(8)]);
var inst_107871 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107872 = repl_tooling.integration.fake_editor.change_result();
var inst_107874 = (function (){var mark_as_done__53963__auto__ = inst_107533;
var chan__53977__auto__ = inst_107871;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107875 = inst_107872.then(inst_107874);
var state_108099__$1 = (function (){var statearr_108134 = state_108099;
(statearr_108134[(11)] = inst_107875);

return statearr_108134;
})();
var statearr_108135_110468 = state_108099__$1;
(statearr_108135_110468[(2)] = inst_107871);

(statearr_108135_110468[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (86))){
var _ = (function (){var statearr_108139 = state_108099;
(statearr_108139[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108139;
})();
var inst_108005 = (state_108099[(2)]);
var inst_108006 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108007 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108008 = (new cljs.core.PersistentVector(null,1,(5),inst_108006,inst_108007,null));
var inst_108009 = cljs.test.update_current_env_BANG_(inst_108008,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_108099[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_108099__$1 = (function (){var statearr_108143 = state_108099;
(statearr_108143[(12)] = inst_108009);

return statearr_108143;
})();
var statearr_108145_110469 = state_108099__$1;
(statearr_108145_110469[(2)] = inst_108005);

(statearr_108145_110469[(1)] = (85));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (20))){
var _ = (function (){var statearr_108146 = state_108099;
(statearr_108146[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108146;
})();
var state_108099__$1 = state_108099;
var ex108130 = (state_108099__$1[(2)]);
var statearr_108148_110470 = state_108099__$1;
(statearr_108148_110470[(5)] = ex108130);


var statearr_108149_110471 = state_108099__$1;
(statearr_108149_110471[(1)] = (19));

(statearr_108149_110471[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (72))){
var inst_107936 = (state_108099[(2)]);
var state_108099__$1 = state_108099;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_108099__$1,(69),inst_107936);
} else {
if((state_val_108105 === (58))){
var inst_107881 = (state_108099[(2)]);
var inst_107882 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_107883 = "(\n0\n \n1\n \n2\n)";
var inst_107884 = matcher_combinators.core.match("(\n0\n \n1\n \n2\n)",inst_107881);
var inst_107887 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_107881], 0));
var inst_107888 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_107884);
var inst_107889 = matcher_combinators.printer.as_string(inst_107888);
var inst_107890 = [inst_107887,"\n\nMismatch:\n",inst_107889].join('');
var inst_107891 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_107884);
var inst_107892 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_107891);
var inst_107893 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_108099__$1 = (function (){var statearr_108153 = state_108099;
(statearr_108153[(13)] = inst_107882);

(statearr_108153[(14)] = inst_107893);

(statearr_108153[(15)] = inst_107890);

(statearr_108153[(16)] = inst_107883);

return statearr_108153;
})();
if(inst_107892){
var statearr_108156_110472 = state_108099__$1;
(statearr_108156_110472[(1)] = (62));

} else {
var statearr_108157_110473 = state_108099__$1;
(statearr_108157_110473[(1)] = (63));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (60))){
var inst_107877 = repl_tooling.integration.fake_editor.change_result();
var state_108099__$1 = state_108099;
var statearr_108158_110474 = state_108099__$1;
(statearr_108158_110474[(2)] = inst_107877);

(statearr_108158_110474[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (27))){
var _ = (function (){var statearr_108160 = state_108099;
(statearr_108160[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108160;
})();
var state_108099__$1 = state_108099;
var ex108151 = (state_108099__$1[(2)]);
var statearr_108161_110475 = state_108099__$1;
(statearr_108161_110475[(5)] = ex108151);


throw ex108151;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (1))){
var inst_107533 = (state_108099[(8)]);
var inst_107532 = (function (){return (function (){
cljs.core.async.close_BANG_(self__.reg);

repl_tooling.integration.fake_editor.disconnect_BANG_();

return (done__53962__auto__.cljs$core$IFn$_invoke$arity$0 ? done__53962__auto__.cljs$core$IFn$_invoke$arity$0() : done__53962__auto__.call(null));
});
})();
var inst_107533__$1 = (new cljs.core.Delay(inst_107532,null));
var inst_107534 = (function (){var mark_as_done__53963__auto__ = inst_107533__$1;
return (function (){
if(cljs.core.realized_QMARK_(mark_as_done__53963__auto__)){
return null;
} else {
try{var value__9156__auto___110476 = (function(){throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)})();
if(cljs.core.truth_(value__9156__auto___110476)){
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"pass","pass",1574159993),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110476,null]));
} else {
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"fail","fail",1706214930),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110476,null]));
}

}catch (e108167){var t__9189__auto___110477 = e108167;
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"error","error",-978969032),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,t__9189__auto___110477,null]));
}
return cljs.core.deref(mark_as_done__53963__auto__);
}
});
})();
var inst_107535 = setTimeout(inst_107534,(8000));
var inst_107536 = repl_tooling.editor_integration.configs_test.change_config_file("(defn- qt [txt] (str \"'\" txt))\n                         (defn q [] (update {:code \"(+ 1 2)\"} :code qt))");
var inst_107537 = [new cljs.core.Keyword(null,"config-file-path","config-file-path",-862460128),new cljs.core.Keyword(null,"register-commands","register-commands",-552391338)];
var inst_107539 = (function (){var mark_as_done__53963__auto__ = inst_107533__$1;
return (function (cmds){
cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(self__.reg,cljs.core.set(cljs.core.keys(cmds)));

return cljs.core.reset_BANG_(repl_tooling.editor_integration.configs_test.custom_commands,cmds);
});
})();
var inst_107540 = [repl_tooling.editor_integration.configs_test.config_file,inst_107539];
var inst_107541 = cljs.core.PersistentHashMap.fromArrays(inst_107537,inst_107540);
var inst_107542 = repl_tooling.integration.fake_editor.connect_BANG_.cljs$core$IFn$_invoke$arity$1(inst_107541);
var inst_107544 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107545 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107546 = (new cljs.core.PersistentVector(null,1,(5),inst_107544,inst_107545,null));
var inst_107547 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_107546,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["when connected, new commands are registered"], 0));
var state_108099__$1 = (function (){var statearr_108174 = state_108099;
(statearr_108174[(17)] = inst_107547);

(statearr_108174[(18)] = inst_107536);

(statearr_108174[(19)] = inst_107542);

(statearr_108174[(20)] = inst_107535);

(statearr_108174[(8)] = inst_107533__$1);

return statearr_108174;
})();
var statearr_108175_110478 = state_108099__$1;
(statearr_108175_110478[(2)] = null);

(statearr_108175_110478[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (69))){
var inst_107938 = (state_108099[(2)]);
var inst_107939 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_107940 = new cljs.core.Keyword(null,"long-str","long-str",184146513).cljs$core$IFn$_invoke$arity$1(inst_107939);
var inst_107941 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_107940);
var inst_107942 = (inst_107941.cljs$core$IFn$_invoke$arity$0 ? inst_107941.cljs$core$IFn$_invoke$arity$0() : inst_107941.call(null));
var state_108099__$1 = (function (){var statearr_108178 = state_108099;
(statearr_108178[(21)] = inst_107938);

(statearr_108178[(22)] = inst_107942);

return statearr_108178;
})();
var statearr_108180_110479 = state_108099__$1;
(statearr_108180_110479[(2)] = null);

(statearr_108180_110479[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (101))){
var state_108099__$1 = state_108099;
var statearr_108181_110480 = state_108099__$1;
(statearr_108181_110480[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_108181_110480[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (24))){
var _ = (function (){var statearr_108182 = state_108099;
(statearr_108182[(4)] = cljs.core.cons((26),(state_108099[(4)])));

return statearr_108182;
})();
var ___$1 = (function (){var statearr_108185 = state_108099;
(statearr_108185[(4)] = cljs.core.cons((27),(state_108099[(4)])));

return statearr_108185;
})();
var inst_107705 = repl_tooling.editor_integration.configs_test.change_config_file("(defn p [args] :end)");
var inst_107706 = (self__.reg instanceof Promise);
var state_108099__$1 = (function (){var statearr_108187 = state_108099;
(statearr_108187[(23)] = inst_107705);

return statearr_108187;
})();
if(cljs.core.truth_(inst_107706)){
var statearr_108189_110481 = state_108099__$1;
(statearr_108189_110481[(1)] = (29));

} else {
var statearr_108190_110482 = state_108099__$1;
(statearr_108190_110482[(1)] = (30));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (102))){
var inst_108066 = (state_108099[(24)]);
var inst_108073 = (state_108099[(25)]);
var inst_108077 = (state_108099[(26)]);
var inst_108081 = (state_108099[(2)]);
var inst_108082 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_108073);
var inst_108083 = [inst_108081,inst_108066,inst_108082];
var inst_108084 = cljs.core.PersistentHashMap.fromArrays(inst_108077,inst_108083);
var inst_108085 = cljs.test.do_report(inst_108084);
var _ = (function (){var statearr_108192 = state_108099;
(statearr_108192[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108192;
})();
var state_108099__$1 = state_108099;
var statearr_108193_110483 = state_108099__$1;
(statearr_108193_110483[(2)] = inst_108085);

(statearr_108193_110483[(1)] = (93));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (55))){
var inst_107904 = (state_108099[(2)]);
var _ = (function (){var statearr_108198 = state_108099;
(statearr_108198[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108198;
})();
var state_108099__$1 = state_108099;
var statearr_108201_110484 = state_108099__$1;
(statearr_108201_110484[(2)] = inst_107904);

(statearr_108201_110484[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (85))){
var inst_107533 = (state_108099[(8)]);
var inst_108091 = (state_108099[(2)]);
var inst_108092 = cljs.core.deref(inst_107533);
var state_108099__$1 = (function (){var statearr_108203 = state_108099;
(statearr_108203[(27)] = inst_108091);

return statearr_108203;
})();
return cljs.core.async.impl.ioc_helpers.return_chan(state_108099__$1,inst_108092);
} else {
if((state_val_108105 === (39))){
var _ = (function (){var statearr_108205 = state_108099;
(statearr_108205[(4)] = cljs.core.cons((42),(state_108099[(4)])));

return statearr_108205;
})();
var inst_107783 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_107784 = [new cljs.core.Keyword(null,"p","p",151049309)];
var inst_107786 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_107788 = [cljs.core.fn_QMARK_];
var inst_107789 = cljs.core.PersistentHashMap.fromArrays(inst_107786,inst_107788);
var inst_107790 = [inst_107789];
var inst_107791 = cljs.core.PersistentHashMap.fromArrays(inst_107784,inst_107790);
var inst_107792 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_107793 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_107794 = matcher_combinators.core.match(inst_107791,inst_107783);
var inst_107795 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_107783], 0));
var inst_107796 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_107794);
var inst_107797 = matcher_combinators.printer.as_string(inst_107796);
var inst_107798 = [inst_107795,"\n\nMismatch:\n",inst_107797].join('');
var inst_107799 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_107794);
var inst_107800 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_107799);
var inst_107802 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_108099__$1 = (function (){var statearr_108209 = state_108099;
(statearr_108209[(28)] = inst_107798);

(statearr_108209[(29)] = inst_107792);

(statearr_108209[(30)] = inst_107802);

(statearr_108209[(31)] = inst_107793);

return statearr_108209;
})();
if(inst_107800){
var statearr_108210_110485 = state_108099__$1;
(statearr_108210_110485[(1)] = (43));

} else {
var statearr_108212_110486 = state_108099__$1;
(statearr_108212_110486[(1)] = (44));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (88))){
var inst_108029 = (state_108099[(2)]);
var inst_108030 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_108031 = new cljs.core.Keyword(null,"error","error",-978969032).cljs$core$IFn$_invoke$arity$1(inst_108030);
var inst_108032 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_108031);
var inst_108033 = (inst_108032.cljs$core$IFn$_invoke$arity$0 ? inst_108032.cljs$core$IFn$_invoke$arity$0() : inst_108032.call(null));
var state_108099__$1 = (function (){var statearr_108215 = state_108099;
(statearr_108215[(32)] = inst_108033);

(statearr_108215[(33)] = inst_108029);

return statearr_108215;
})();
var statearr_108216_110487 = state_108099__$1;
(statearr_108216_110487[(2)] = null);

(statearr_108216_110487[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (46))){
var _ = (function (){var statearr_108219 = state_108099;
(statearr_108219[(4)] = cljs.core.cons((48),(state_108099[(4)])));

return statearr_108219;
})();
var ___$1 = (function (){var statearr_108220 = state_108099;
(statearr_108220[(4)] = cljs.core.cons((49),(state_108099[(4)])));

return statearr_108220;
})();
var inst_107834 = repl_tooling.integration.fake_editor.type("(range 3)");
var inst_107835 = repl_tooling.editor_integration.configs_test.change_config_file("(defn e-block [] (p/let [data (editor/get-top-block)]\n          (editor/eval-and-render data)))");
var inst_107836 = (self__.reg instanceof Promise);
var state_108099__$1 = (function (){var statearr_108222 = state_108099;
(statearr_108222[(34)] = inst_107834);

(statearr_108222[(35)] = inst_107835);

return statearr_108222;
})();
if(cljs.core.truth_(inst_107836)){
var statearr_108224_110488 = state_108099__$1;
(statearr_108224_110488[(1)] = (51));

} else {
var statearr_108225_110489 = state_108099__$1;
(statearr_108225_110489[(1)] = (52));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (4))){
var _ = (function (){var statearr_108227 = state_108099;
(statearr_108227[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108227;
})();
var inst_107549 = (state_108099[(2)]);
var inst_107550 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107551 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107552 = (new cljs.core.PersistentVector(null,1,(5),inst_107550,inst_107551,null));
var inst_107553 = cljs.test.update_current_env_BANG_(inst_107552,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_108099[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_108099__$1 = (function (){var statearr_108231 = state_108099;
(statearr_108231[(36)] = inst_107553);

return statearr_108231;
})();
var statearr_108233_110490 = state_108099__$1;
(statearr_108233_110490[(2)] = inst_107549);

(statearr_108233_110490[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (77))){
var inst_107973 = (state_108099[(2)]);
var inst_107974 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-stdout","editor/change-stdout",294315011,null)));
var inst_107975 = /a-01234567891011.*/;
var inst_107976 = matcher_combinators.core.match(/a-01234567891011.*/,inst_107973);
var inst_107978 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_107973], 0));
var inst_107980 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_107976);
var inst_107981 = matcher_combinators.printer.as_string(inst_107980);
var inst_107982 = [inst_107978,"\n\nMismatch:\n",inst_107981].join('');
var inst_107983 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_107976);
var inst_107984 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_107983);
var inst_107985 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_108099__$1 = (function (){var statearr_108236 = state_108099;
(statearr_108236[(37)] = inst_107974);

(statearr_108236[(38)] = inst_107982);

(statearr_108236[(39)] = inst_107985);

(statearr_108236[(40)] = inst_107975);

return statearr_108236;
})();
if(inst_107984){
var statearr_108239_110491 = state_108099__$1;
(statearr_108239_110491[(1)] = (81));

} else {
var statearr_108240_110492 = state_108099__$1;
(statearr_108240_110492[(1)] = (82));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (95))){
var _ = (function (){var statearr_108243 = state_108099;
(statearr_108243[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108243;
})();
var state_108099__$1 = state_108099;
var ex108226 = (state_108099__$1[(2)]);
var statearr_108244_110493 = state_108099__$1;
(statearr_108244_110493[(5)] = ex108226);


var statearr_108246_110494 = state_108099__$1;
(statearr_108246_110494[(1)] = (94));

(statearr_108246_110494[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (54))){
var _ = (function (){var statearr_108247 = state_108099;
(statearr_108247[(4)] = cljs.core.cons((57),(state_108099[(4)])));

return statearr_108247;
})();
var inst_107868 = repl_tooling.integration.fake_editor.change_result();
var inst_107869 = (inst_107868 instanceof Promise);
var state_108099__$1 = state_108099;
if(cljs.core.truth_(inst_107869)){
var statearr_108249_110495 = state_108099__$1;
(statearr_108249_110495[(1)] = (59));

} else {
var statearr_108250_110496 = state_108099__$1;
(statearr_108250_110496[(1)] = (60));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (92))){
var _ = (function (){var statearr_108252 = state_108099;
(statearr_108252[(4)] = cljs.core.cons((95),(state_108099[(4)])));

return statearr_108252;
})();
var inst_108050 = repl_tooling.integration.fake_editor.change_result();
var inst_108051 = (inst_108050 instanceof Promise);
var state_108099__$1 = state_108099;
if(cljs.core.truth_(inst_108051)){
var statearr_108254_110497 = state_108099__$1;
(statearr_108254_110497[(1)] = (97));

} else {
var statearr_108255_110498 = state_108099__$1;
(statearr_108255_110498[(1)] = (98));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (15))){
var state_108099__$1 = state_108099;
var statearr_108257_110499 = state_108099__$1;
(statearr_108257_110499[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_108257_110499[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (48))){
var _ = (function (){var statearr_108260 = state_108099;
(statearr_108260[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108260;
})();
var inst_107822 = (state_108099[(2)]);
var inst_107823 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107824 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107825 = (new cljs.core.PersistentVector(null,1,(5),inst_107823,inst_107824,null));
var inst_107826 = cljs.test.update_current_env_BANG_(inst_107825,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_108099[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_108099__$1 = (function (){var statearr_108263 = state_108099;
(statearr_108263[(41)] = inst_107826);

return statearr_108263;
})();
var statearr_108265_110500 = state_108099__$1;
(statearr_108265_110500[(2)] = inst_107822);

(statearr_108265_110500[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (50))){
var inst_107846 = (state_108099[(2)]);
var inst_107847 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_107848 = new cljs.core.Keyword(null,"e-block","e-block",964370856).cljs$core$IFn$_invoke$arity$1(inst_107847);
var inst_107849 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_107848);
var inst_107850 = (inst_107849.cljs$core$IFn$_invoke$arity$0 ? inst_107849.cljs$core$IFn$_invoke$arity$0() : inst_107849.call(null));
var state_108099__$1 = (function (){var statearr_108268 = state_108099;
(statearr_108268[(42)] = inst_107846);

(statearr_108268[(43)] = inst_107850);

return statearr_108268;
})();
var statearr_108269_110501 = state_108099__$1;
(statearr_108269_110501[(2)] = null);

(statearr_108269_110501[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (75))){
var inst_107943 = (state_108099[(2)]);
var inst_107944 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_107945 = check.core.normalize_error(inst_107943);
var inst_107947 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-stdout","editor/change-stdout",294315011,null)));
var inst_107949 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_107950 = /a-01234567891011.*/;
var inst_107951 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107947)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107949)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107950)].join('');
var inst_107952 = [new cljs.core.Keyword(null,"error","error",-978969032),/a-01234567891011.*/,inst_107945,inst_107951];
var inst_107953 = cljs.core.PersistentHashMap.fromArrays(inst_107944,inst_107952);
var inst_107954 = cljs.test.do_report(inst_107953);
var state_108099__$1 = state_108099;
var statearr_108273_110502 = state_108099__$1;
(statearr_108273_110502[(2)] = inst_107954);

(statearr_108273_110502[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (99))){
var inst_108062 = (state_108099[(2)]);
var state_108099__$1 = state_108099;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_108099__$1,(96),inst_108062);
} else {
if((state_val_108105 === (21))){
var state_108099__$1 = state_108099;
var statearr_108274_110503 = state_108099__$1;
(statearr_108274_110503[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_108274_110503[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (31))){
var inst_107713 = (state_108099[(2)]);
var state_108099__$1 = state_108099;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_108099__$1,(28),inst_107713);
} else {
if((state_val_108105 === (32))){
var _ = (function (){var statearr_108277 = state_108099;
(statearr_108277[(4)] = cljs.core.cons((35),(state_108099[(4)])));

return statearr_108277;
})();
var inst_107734 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_107735 = new cljs.core.Keyword(null,"q","q",689001697).cljs$core$IFn$_invoke$arity$1(inst_107734);
var inst_107736 = cljs.core.list(new cljs.core.Keyword(null,"q","q",689001697),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)));
var inst_107737 = null;
var inst_107738 = matcher_combinators.core.match(null,inst_107735);
var inst_107740 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_107735], 0));
var inst_107741 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_107738);
var inst_107742 = matcher_combinators.printer.as_string(inst_107741);
var inst_107743 = [inst_107740,"\n\nMismatch:\n",inst_107742].join('');
var inst_107744 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_107738);
var inst_107745 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_107744);
var inst_107746 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_108099__$1 = (function (){var statearr_108280 = state_108099;
(statearr_108280[(44)] = inst_107743);

(statearr_108280[(45)] = inst_107746);

(statearr_108280[(46)] = inst_107736);

(statearr_108280[(47)] = inst_107737);

return statearr_108280;
})();
if(inst_107745){
var statearr_108283_110504 = state_108099__$1;
(statearr_108283_110504[(1)] = (36));

} else {
var statearr_108285_110505 = state_108099__$1;
(statearr_108285_110505[(1)] = (37));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (40))){
var inst_107813 = (state_108099[(2)]);
var _ = (function (){var statearr_108287 = state_108099;
(statearr_108287[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108287;
})();
var state_108099__$1 = state_108099;
var statearr_108289_110506 = state_108099__$1;
(statearr_108289_110506[(2)] = inst_107813);

(statearr_108289_110506[(1)] = (26));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (91))){
var inst_108027 = (state_108099[(2)]);
var state_108099__$1 = state_108099;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_108099__$1,(88),inst_108027);
} else {
if((state_val_108105 === (56))){
var inst_107851 = (state_108099[(2)]);
var inst_107852 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_107853 = check.core.normalize_error(inst_107851);
var inst_107855 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_107856 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_107857 = "(\n0\n \n1\n \n2\n)";
var inst_107858 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107855)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107856)," ",inst_107857].join('');
var inst_107859 = [new cljs.core.Keyword(null,"error","error",-978969032),"(\n0\n \n1\n \n2\n)",inst_107853,inst_107858];
var inst_107860 = cljs.core.PersistentHashMap.fromArrays(inst_107852,inst_107859);
var inst_107861 = cljs.test.do_report(inst_107860);
var state_108099__$1 = state_108099;
var statearr_108294_110507 = state_108099__$1;
(statearr_108294_110507[(2)] = inst_107861);

(statearr_108294_110507[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (33))){
var inst_107758 = (state_108099[(2)]);
var state_108099__$1 = (function (){var statearr_108297 = state_108099;
(statearr_108297[(48)] = inst_107758);

return statearr_108297;
})();
var statearr_108298_110508 = state_108099__$1;
(statearr_108298_110508[(2)] = null);

(statearr_108298_110508[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (13))){
var _ = (function (){var statearr_108299 = state_108099;
(statearr_108299[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108299;
})();
var state_108099__$1 = state_108099;
var ex108292 = (state_108099__$1[(2)]);
var statearr_108301_110509 = state_108099__$1;
(statearr_108301_110509[(5)] = ex108292);


var statearr_108302_110510 = state_108099__$1;
(statearr_108302_110510[(1)] = (12));

(statearr_108302_110510[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (22))){
var state_108099__$1 = state_108099;
var statearr_108304_110511 = state_108099__$1;
(statearr_108304_110511[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_108304_110511[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (90))){
var state_108099__$1 = state_108099;
var statearr_108306_110512 = state_108099__$1;
(statearr_108306_110512[(2)] = self__.reg);

(statearr_108306_110512[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (36))){
var state_108099__$1 = state_108099;
var statearr_108310_110513 = state_108099__$1;
(statearr_108310_110513[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_108310_110513[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (41))){
var inst_107759 = (state_108099[(2)]);
var inst_107760 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_107762 = [new cljs.core.Keyword(null,"p","p",151049309)];
var inst_107763 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_107764 = [cljs.core.fn_QMARK_];
var inst_107765 = cljs.core.PersistentHashMap.fromArrays(inst_107763,inst_107764);
var inst_107766 = [inst_107765];
var inst_107767 = cljs.core.PersistentHashMap.fromArrays(inst_107762,inst_107766);
var inst_107769 = check.core.normalize_error(inst_107759);
var inst_107771 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_107772 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_107773 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_107774 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107771)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107772)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107773)].join('');
var inst_107775 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_107767,inst_107769,inst_107774];
var inst_107776 = cljs.core.PersistentHashMap.fromArrays(inst_107760,inst_107775);
var inst_107777 = cljs.test.do_report(inst_107776);
var state_108099__$1 = state_108099;
var statearr_108313_110514 = state_108099__$1;
(statearr_108313_110514[(2)] = inst_107777);

(statearr_108313_110514[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (89))){
var inst_107533 = (state_108099[(8)]);
var inst_108021 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_108023 = (function (){var mark_as_done__53963__auto__ = inst_107533;
var chan__53977__auto__ = inst_108021;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_108024 = self__.reg.then(inst_108023);
var state_108099__$1 = (function (){var statearr_108315 = state_108099;
(statearr_108315[(49)] = inst_108024);

return statearr_108315;
})();
var statearr_108316_110515 = state_108099__$1;
(statearr_108316_110515[(2)] = inst_108021);

(statearr_108316_110515[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (100))){
var state_108099__$1 = state_108099;
var statearr_108318_110516 = state_108099__$1;
(statearr_108318_110516[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_108318_110516[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (43))){
var state_108099__$1 = state_108099;
var statearr_108320_110517 = state_108099__$1;
(statearr_108320_110517[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_108320_110517[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (61))){
var inst_107879 = (state_108099[(2)]);
var state_108099__$1 = state_108099;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_108099__$1,(58),inst_107879);
} else {
if((state_val_108105 === (29))){
var inst_107533 = (state_108099[(8)]);
var inst_107708 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107709 = (function (){var mark_as_done__53963__auto__ = inst_107533;
var chan__53977__auto__ = inst_107708;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107710 = self__.reg.then(inst_107709);
var state_108099__$1 = (function (){var statearr_108323 = state_108099;
(statearr_108323[(50)] = inst_107710);

return statearr_108323;
})();
var statearr_108324_110518 = state_108099__$1;
(statearr_108324_110518[(2)] = inst_107708);

(statearr_108324_110518[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (44))){
var state_108099__$1 = state_108099;
var statearr_108325_110519 = state_108099__$1;
(statearr_108325_110519[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_108325_110519[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (93))){
var inst_108088 = (state_108099[(2)]);
var _ = (function (){var statearr_108327 = state_108099;
(statearr_108327[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108327;
})();
var state_108099__$1 = state_108099;
var statearr_108328_110520 = state_108099__$1;
(statearr_108328_110520[(2)] = inst_108088);

(statearr_108328_110520[(1)] = (86));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (6))){
var inst_107577 = (state_108099[(2)]);
var state_108099__$1 = (function (){var statearr_108330 = state_108099;
(statearr_108330[(51)] = inst_107577);

return statearr_108330;
})();
var statearr_108331_110521 = state_108099__$1;
(statearr_108331_110521[(2)] = null);

(statearr_108331_110521[(1)] = (10));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (28))){
var inst_107715 = (state_108099[(2)]);
var state_108099__$1 = (function (){var statearr_108333 = state_108099;
(statearr_108333[(52)] = inst_107715);

return statearr_108333;
})();
var statearr_108335_110522 = state_108099__$1;
(statearr_108335_110522[(2)] = null);

(statearr_108335_110522[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (64))){
var inst_107893 = (state_108099[(14)]);
var inst_107890 = (state_108099[(15)]);
var inst_107883 = (state_108099[(16)]);
var inst_107897 = (state_108099[(2)]);
var inst_107898 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_107890);
var inst_107899 = [inst_107897,inst_107883,inst_107898];
var inst_107900 = cljs.core.PersistentHashMap.fromArrays(inst_107893,inst_107899);
var inst_107901 = cljs.test.do_report(inst_107900);
var _ = (function (){var statearr_108338 = state_108099;
(statearr_108338[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108338;
})();
var state_108099__$1 = state_108099;
var statearr_108340_110523 = state_108099__$1;
(statearr_108340_110523[(2)] = inst_107901);

(statearr_108340_110523[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (51))){
var inst_107533 = (state_108099[(8)]);
var inst_107839 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107840 = (function (){var mark_as_done__53963__auto__ = inst_107533;
var chan__53977__auto__ = inst_107839;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107841 = self__.reg.then(inst_107840);
var state_108099__$1 = (function (){var statearr_108344 = state_108099;
(statearr_108344[(53)] = inst_107841);

return statearr_108344;
})();
var statearr_108346_110524 = state_108099__$1;
(statearr_108346_110524[(2)] = inst_107839);

(statearr_108346_110524[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (25))){
var inst_107816 = (state_108099[(2)]);
var inst_107817 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107818 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107819 = (new cljs.core.PersistentVector(null,1,(5),inst_107817,inst_107818,null));
var inst_107820 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_107819,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["getting blocks"], 0));
var state_108099__$1 = (function (){var statearr_108348 = state_108099;
(statearr_108348[(54)] = inst_107820);

(statearr_108348[(55)] = inst_107816);

return statearr_108348;
})();
var statearr_108350_110525 = state_108099__$1;
(statearr_108350_110525[(2)] = null);

(statearr_108350_110525[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (34))){
var inst_107716 = (state_108099[(2)]);
var inst_107719 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_107720 = check.core.normalize_error(inst_107716);
var inst_107722 = cljs.core.list(new cljs.core.Keyword(null,"q","q",689001697),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)));
var inst_107723 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_107724 = null;
var inst_107725 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107722)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107723)," ",inst_107724].join('');
var inst_107726 = [new cljs.core.Keyword(null,"error","error",-978969032),null,inst_107720,inst_107725];
var inst_107727 = cljs.core.PersistentHashMap.fromArrays(inst_107719,inst_107726);
var inst_107728 = cljs.test.do_report(inst_107727);
var state_108099__$1 = state_108099;
var statearr_108352_110526 = state_108099__$1;
(statearr_108352_110526[(2)] = inst_107728);

(statearr_108352_110526[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (17))){
var _ = (function (){var statearr_108355 = state_108099;
(statearr_108355[(4)] = cljs.core.cons((20),(state_108099[(4)])));

return statearr_108355;
})();
var inst_107652 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_107653 = new cljs.core.Keyword(null,"q","q",689001697).cljs$core$IFn$_invoke$arity$1(inst_107652);
var inst_107654 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_107653);
var inst_107655 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_107656 = ["(+ 1 2)"];
var inst_107657 = cljs.core.PersistentHashMap.fromArrays(inst_107655,inst_107656);
var inst_107658 = (inst_107654.cljs$core$IFn$_invoke$arity$1 ? inst_107654.cljs$core$IFn$_invoke$arity$1(inst_107657) : inst_107654.call(null,inst_107657));
var inst_107659 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_107660 = ["'(+ 1 2)"];
var inst_107661 = cljs.core.PersistentHashMap.fromArrays(inst_107659,inst_107660);
var inst_107662 = cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)),new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.Keyword(null,"command","command",-894540724)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)"], null));
var inst_107663 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"'(+ 1 2)"], null);
var inst_107664 = matcher_combinators.core.match(inst_107661,inst_107658);
var inst_107666 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_107658], 0));
var inst_107667 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_107664);
var inst_107668 = matcher_combinators.printer.as_string(inst_107667);
var inst_107669 = [inst_107666,"\n\nMismatch:\n",inst_107668].join('');
var inst_107670 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_107664);
var inst_107671 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_107670);
var inst_107672 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_108099__$1 = (function (){var statearr_108357 = state_108099;
(statearr_108357[(56)] = inst_107663);

(statearr_108357[(57)] = inst_107672);

(statearr_108357[(58)] = inst_107662);

(statearr_108357[(59)] = inst_107669);

return statearr_108357;
})();
if(inst_107671){
var statearr_108358_110527 = state_108099__$1;
(statearr_108358_110527[(1)] = (21));

} else {
var statearr_108359_110528 = state_108099__$1;
(statearr_108359_110528[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (3))){
var inst_107686 = (state_108099[(2)]);
var inst_107687 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107688 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107689 = (new cljs.core.PersistentVector(null,1,(5),inst_107687,inst_107688,null));
var inst_107690 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_107689,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["when changing the file, new commands are registered"], 0));
var state_108099__$1 = (function (){var statearr_108360 = state_108099;
(statearr_108360[(60)] = inst_107686);

(statearr_108360[(61)] = inst_107690);

return statearr_108360;
})();
var statearr_108362_110529 = state_108099__$1;
(statearr_108362_110529[(2)] = null);

(statearr_108362_110529[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (12))){
var inst_107578 = (state_108099[(2)]);
var inst_107579 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_107580 = [new cljs.core.Keyword(null,"q","q",689001697)];
var inst_107581 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_107582 = [cljs.core.fn_QMARK_];
var inst_107583 = cljs.core.PersistentHashMap.fromArrays(inst_107581,inst_107582);
var inst_107584 = [inst_107583];
var inst_107585 = cljs.core.PersistentHashMap.fromArrays(inst_107580,inst_107584);
var inst_107586 = check.core.normalize_error(inst_107578);
var inst_107587 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_107589 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_107590 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_107591 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107587)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107589)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107590)].join('');
var inst_107592 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_107585,inst_107586,inst_107591];
var inst_107593 = cljs.core.PersistentHashMap.fromArrays(inst_107579,inst_107592);
var inst_107594 = cljs.test.do_report(inst_107593);
var state_108099__$1 = state_108099;
var statearr_108365_110530 = state_108099__$1;
(statearr_108365_110530[(2)] = inst_107594);

(statearr_108365_110530[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (2))){
var _ = (function (){var statearr_108368 = state_108099;
(statearr_108368[(4)] = cljs.core.cons((4),(state_108099[(4)])));

return statearr_108368;
})();
var ___$1 = (function (){var statearr_108369 = state_108099;
(statearr_108369[(4)] = cljs.core.cons((5),(state_108099[(4)])));

return statearr_108369;
})();
var inst_107567 = (self__.reg instanceof Promise);
var state_108099__$1 = state_108099;
if(cljs.core.truth_(inst_107567)){
var statearr_108370_110531 = state_108099__$1;
(statearr_108370_110531[(1)] = (7));

} else {
var statearr_108372_110532 = state_108099__$1;
(statearr_108372_110532[(1)] = (8));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (66))){
var inst_107999 = (state_108099[(2)]);
var inst_108000 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108001 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108002 = (new cljs.core.PersistentVector(null,1,(5),inst_108000,inst_108001,null));
var inst_108003 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_108002,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["checking for errors"], 0));
var state_108099__$1 = (function (){var statearr_108374 = state_108099;
(statearr_108374[(62)] = inst_108003);

(statearr_108374[(63)] = inst_107999);

return statearr_108374;
})();
var statearr_108377_110533 = state_108099__$1;
(statearr_108377_110533[(2)] = null);

(statearr_108377_110533[(1)] = (84));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (23))){
var inst_107663 = (state_108099[(56)]);
var inst_107672 = (state_108099[(57)]);
var inst_107669 = (state_108099[(59)]);
var inst_107676 = (state_108099[(2)]);
var inst_107677 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_107669);
var inst_107678 = [inst_107676,inst_107663,inst_107677];
var inst_107679 = cljs.core.PersistentHashMap.fromArrays(inst_107672,inst_107678);
var inst_107680 = cljs.test.do_report(inst_107679);
var _ = (function (){var statearr_108382 = state_108099;
(statearr_108382[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108382;
})();
var state_108099__$1 = state_108099;
var statearr_108383_110534 = state_108099__$1;
(statearr_108383_110534[(2)] = inst_107680);

(statearr_108383_110534[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (47))){
var inst_107907 = (state_108099[(2)]);
var inst_107908 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107909 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107910 = (new cljs.core.PersistentVector(null,1,(5),inst_107908,inst_107909,null));
var inst_107911 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_107910,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["UNREPL reader tags (IncompleteStr)"], 0));
var state_108099__$1 = (function (){var statearr_108385 = state_108099;
(statearr_108385[(64)] = inst_107911);

(statearr_108385[(65)] = inst_107907);

return statearr_108385;
})();
var statearr_108387_110535 = state_108099__$1;
(statearr_108387_110535[(2)] = null);

(statearr_108387_110535[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (35))){
var _ = (function (){var statearr_108390 = state_108099;
(statearr_108390[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108390;
})();
var state_108099__$1 = state_108099;
var ex108379 = (state_108099__$1[(2)]);
var statearr_108391_110536 = state_108099__$1;
(statearr_108391_110536[(5)] = ex108379);


var statearr_108392_110537 = state_108099__$1;
(statearr_108392_110537[(1)] = (34));

(statearr_108392_110537[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (82))){
var state_108099__$1 = state_108099;
var statearr_108395_110538 = state_108099__$1;
(statearr_108395_110538[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_108395_110538[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (76))){
var _ = (function (){var statearr_108398 = state_108099;
(statearr_108398[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108398;
})();
var state_108099__$1 = state_108099;
var ex108388 = (state_108099__$1[(2)]);
var statearr_108400_110539 = state_108099__$1;
(statearr_108400_110539[(5)] = ex108388);


var statearr_108401_110540 = state_108099__$1;
(statearr_108401_110540[(1)] = (75));

(statearr_108401_110540[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (97))){
var inst_107533 = (state_108099[(8)]);
var inst_108053 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_108054 = repl_tooling.integration.fake_editor.change_result();
var inst_108057 = (function (){var mark_as_done__53963__auto__ = inst_107533;
var chan__53977__auto__ = inst_108053;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_108058 = inst_108054.then(inst_108057);
var state_108099__$1 = (function (){var statearr_108406 = state_108099;
(statearr_108406[(66)] = inst_108058);

return statearr_108406;
})();
var statearr_108408_110541 = state_108099__$1;
(statearr_108408_110541[(2)] = inst_108053);

(statearr_108408_110541[(1)] = (99));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (19))){
var inst_107631 = (state_108099[(2)]);
var inst_107632 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_107634 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_107635 = ["'(+ 1 2)"];
var inst_107636 = cljs.core.PersistentHashMap.fromArrays(inst_107634,inst_107635);
var inst_107637 = check.core.normalize_error(inst_107631);
var inst_107638 = cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)),new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.Keyword(null,"command","command",-894540724)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)"], null));
var inst_107639 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_107640 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"'(+ 1 2)"], null);
var inst_107641 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107638)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107639)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_107640)].join('');
var inst_107642 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_107636,inst_107637,inst_107641];
var inst_107643 = cljs.core.PersistentHashMap.fromArrays(inst_107632,inst_107642);
var inst_107644 = cljs.test.do_report(inst_107643);
var state_108099__$1 = state_108099;
var statearr_108414_110542 = state_108099__$1;
(statearr_108414_110542[(2)] = inst_107644);

(statearr_108414_110542[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (57))){
var _ = (function (){var statearr_108415 = state_108099;
(statearr_108415[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108415;
})();
var state_108099__$1 = state_108099;
var ex108402 = (state_108099__$1[(2)]);
var statearr_108417_110543 = state_108099__$1;
(statearr_108417_110543[(5)] = ex108402);


var statearr_108418_110544 = state_108099__$1;
(statearr_108418_110544[(1)] = (56));

(statearr_108418_110544[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (68))){
var _ = (function (){var statearr_108420 = state_108099;
(statearr_108420[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108420;
})();
var state_108099__$1 = state_108099;
var ex108410 = (state_108099__$1[(2)]);
var statearr_108422_110545 = state_108099__$1;
(statearr_108422_110545[(5)] = ex108410);


throw ex108410;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (11))){
var inst_107630 = (state_108099[(2)]);
var state_108099__$1 = (function (){var statearr_108425 = state_108099;
(statearr_108425[(67)] = inst_107630);

return statearr_108425;
})();
var statearr_108426_110546 = state_108099__$1;
(statearr_108426_110546[(2)] = null);

(statearr_108426_110546[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (9))){
var inst_107575 = (state_108099[(2)]);
var state_108099__$1 = state_108099;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_108099__$1,(6),inst_107575);
} else {
if((state_val_108105 === (5))){
var _ = (function (){var statearr_108429 = state_108099;
(statearr_108429[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108429;
})();
var state_108099__$1 = state_108099;
var ex108423 = (state_108099__$1[(2)]);
var statearr_108432_110547 = state_108099__$1;
(statearr_108432_110547[(5)] = ex108423);


throw ex108423;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (83))){
var inst_107982 = (state_108099[(38)]);
var inst_107985 = (state_108099[(39)]);
var inst_107975 = (state_108099[(40)]);
var inst_107989 = (state_108099[(2)]);
var inst_107990 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_107982);
var inst_107991 = [inst_107989,inst_107975,inst_107990];
var inst_107992 = cljs.core.PersistentHashMap.fromArrays(inst_107985,inst_107991);
var inst_107993 = cljs.test.do_report(inst_107992);
var _ = (function (){var statearr_108435 = state_108099;
(statearr_108435[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108435;
})();
var state_108099__$1 = state_108099;
var statearr_108436_110548 = state_108099__$1;
(statearr_108436_110548[(2)] = inst_107993);

(statearr_108436_110548[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (14))){
var state_108099__$1 = state_108099;
var statearr_108438_110549 = state_108099__$1;
(statearr_108438_110549[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_108438_110549[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (45))){
var inst_107798 = (state_108099[(28)]);
var inst_107802 = (state_108099[(30)]);
var inst_107793 = (state_108099[(31)]);
var inst_107806 = (state_108099[(2)]);
var inst_107807 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_107798);
var inst_107808 = [inst_107806,inst_107793,inst_107807];
var inst_107809 = cljs.core.PersistentHashMap.fromArrays(inst_107802,inst_107808);
var inst_107810 = cljs.test.do_report(inst_107809);
var _ = (function (){var statearr_108442 = state_108099;
(statearr_108442[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108442;
})();
var state_108099__$1 = state_108099;
var statearr_108443_110550 = state_108099__$1;
(statearr_108443_110550[(2)] = inst_107810);

(statearr_108443_110550[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (53))){
var inst_107844 = (state_108099[(2)]);
var state_108099__$1 = state_108099;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_108099__$1,(50),inst_107844);
} else {
if((state_val_108105 === (78))){
var inst_107533 = (state_108099[(8)]);
var inst_107963 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_107964 = repl_tooling.integration.fake_editor.change_stdout();
var inst_107965 = (function (){var mark_as_done__53963__auto__ = inst_107533;
var chan__53977__auto__ = inst_107963;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_107966 = inst_107964.then(inst_107965);
var state_108099__$1 = (function (){var statearr_108450 = state_108099;
(statearr_108450[(68)] = inst_107966);

return statearr_108450;
})();
var statearr_108451_110551 = state_108099__$1;
(statearr_108451_110551[(2)] = inst_107963);

(statearr_108451_110551[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (26))){
var _ = (function (){var statearr_108453 = state_108099;
(statearr_108453[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108453;
})();
var inst_107693 = (state_108099[(2)]);
var inst_107694 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107695 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107696 = (new cljs.core.PersistentVector(null,1,(5),inst_107694,inst_107695,null));
var inst_107697 = cljs.test.update_current_env_BANG_(inst_107696,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_108099[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_108099__$1 = (function (){var statearr_108455 = state_108099;
(statearr_108455[(69)] = inst_107697);

return statearr_108455;
})();
var statearr_108456_110552 = state_108099__$1;
(statearr_108456_110552[(2)] = inst_107693);

(statearr_108456_110552[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (16))){
var inst_107609 = (state_108099[(70)]);
var inst_107615 = (state_108099[(71)]);
var inst_107619 = (state_108099[(72)]);
var inst_107623 = (state_108099[(2)]);
var inst_107624 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_107615);
var inst_107625 = [inst_107623,inst_107609,inst_107624];
var inst_107626 = cljs.core.PersistentHashMap.fromArrays(inst_107619,inst_107625);
var inst_107627 = cljs.test.do_report(inst_107626);
var _ = (function (){var statearr_108460 = state_108099;
(statearr_108460[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108460;
})();
var state_108099__$1 = state_108099;
var statearr_108463_110553 = state_108099__$1;
(statearr_108463_110553[(2)] = inst_107627);

(statearr_108463_110553[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (81))){
var state_108099__$1 = state_108099;
var statearr_108464_110554 = state_108099__$1;
(statearr_108464_110554[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_108464_110554[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (79))){
var inst_107969 = repl_tooling.integration.fake_editor.change_stdout();
var state_108099__$1 = state_108099;
var statearr_108466_110555 = state_108099__$1;
(statearr_108466_110555[(2)] = inst_107969);

(statearr_108466_110555[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (38))){
var inst_107743 = (state_108099[(44)]);
var inst_107746 = (state_108099[(45)]);
var inst_107737 = (state_108099[(47)]);
var inst_107750 = (state_108099[(2)]);
var inst_107751 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_107743);
var inst_107753 = [inst_107750,inst_107737,inst_107751];
var inst_107754 = cljs.core.PersistentHashMap.fromArrays(inst_107746,inst_107753);
var inst_107755 = cljs.test.do_report(inst_107754);
var _ = (function (){var statearr_108471 = state_108099;
(statearr_108471[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108471;
})();
var state_108099__$1 = state_108099;
var statearr_108473_110556 = state_108099__$1;
(statearr_108473_110556[(2)] = inst_107755);

(statearr_108473_110556[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (98))){
var inst_108060 = repl_tooling.integration.fake_editor.change_result();
var state_108099__$1 = state_108099;
var statearr_108474_110557 = state_108099__$1;
(statearr_108474_110557[(2)] = inst_108060);

(statearr_108474_110557[(1)] = (99));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (87))){
var _ = (function (){var statearr_108477 = state_108099;
(statearr_108477[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108477;
})();
var state_108099__$1 = state_108099;
var ex108469 = (state_108099__$1[(2)]);
var statearr_108479_110558 = state_108099__$1;
(statearr_108479_110558[(5)] = ex108469);


throw ex108469;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (30))){
var state_108099__$1 = state_108099;
var statearr_108480_110559 = state_108099__$1;
(statearr_108480_110559[(2)] = self__.reg);

(statearr_108480_110559[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (73))){
var _ = (function (){var statearr_108482 = state_108099;
(statearr_108482[(4)] = cljs.core.cons((76),(state_108099[(4)])));

return statearr_108482;
})();
var inst_107960 = repl_tooling.integration.fake_editor.change_stdout();
var inst_107961 = (inst_107960 instanceof Promise);
var state_108099__$1 = state_108099;
if(cljs.core.truth_(inst_107961)){
var statearr_108484_110560 = state_108099__$1;
(statearr_108484_110560[(1)] = (78));

} else {
var statearr_108485_110561 = state_108099__$1;
(statearr_108485_110561[(1)] = (79));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (96))){
var inst_108064 = (state_108099[(2)]);
var inst_108065 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_108066 = /Some-error/;
var inst_108067 = matcher_combinators.core.match(/Some-error/,inst_108064);
var inst_108070 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_108064], 0));
var inst_108071 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_108067);
var inst_108072 = matcher_combinators.printer.as_string(inst_108071);
var inst_108073 = [inst_108070,"\n\nMismatch:\n",inst_108072].join('');
var inst_108074 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_108067);
var inst_108075 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_108074);
var inst_108077 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_108099__$1 = (function (){var statearr_108491 = state_108099;
(statearr_108491[(73)] = inst_108065);

(statearr_108491[(24)] = inst_108066);

(statearr_108491[(25)] = inst_108073);

(statearr_108491[(26)] = inst_108077);

return statearr_108491;
})();
if(inst_108075){
var statearr_108492_110562 = state_108099__$1;
(statearr_108492_110562[(1)] = (100));

} else {
var statearr_108493_110563 = state_108099__$1;
(statearr_108493_110563[(1)] = (101));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (10))){
var _ = (function (){var statearr_108495 = state_108099;
(statearr_108495[(4)] = cljs.core.cons((13),(state_108099[(4)])));

return statearr_108495;
})();
var inst_107601 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_107602 = [new cljs.core.Keyword(null,"q","q",689001697)];
var inst_107603 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_107604 = [cljs.core.fn_QMARK_];
var inst_107605 = cljs.core.PersistentHashMap.fromArrays(inst_107603,inst_107604);
var inst_107606 = [inst_107605];
var inst_107607 = cljs.core.PersistentHashMap.fromArrays(inst_107602,inst_107606);
var inst_107608 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_107609 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_107610 = matcher_combinators.core.match(inst_107607,inst_107601);
var inst_107612 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_107601], 0));
var inst_107613 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_107610);
var inst_107614 = matcher_combinators.printer.as_string(inst_107613);
var inst_107615 = [inst_107612,"\n\nMismatch:\n",inst_107614].join('');
var inst_107616 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_107610);
var inst_107617 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_107616);
var inst_107619 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_108099__$1 = (function (){var statearr_108499 = state_108099;
(statearr_108499[(74)] = inst_107608);

(statearr_108499[(70)] = inst_107609);

(statearr_108499[(71)] = inst_107615);

(statearr_108499[(72)] = inst_107619);

return statearr_108499;
})();
if(inst_107617){
var statearr_108501_110564 = state_108099__$1;
(statearr_108501_110564[(1)] = (14));

} else {
var statearr_108502_110565 = state_108099__$1;
(statearr_108502_110565[(1)] = (15));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (18))){
var inst_107683 = (state_108099[(2)]);
var _ = (function (){var statearr_108504 = state_108099;
(statearr_108504[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108504;
})();
var state_108099__$1 = state_108099;
var statearr_108506_110566 = state_108099__$1;
(statearr_108506_110566[(2)] = inst_107683);

(statearr_108506_110566[(1)] = (4));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (52))){
var state_108099__$1 = state_108099;
var statearr_108507_110567 = state_108099__$1;
(statearr_108507_110567[(2)] = self__.reg);

(statearr_108507_110567[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (67))){
var _ = (function (){var statearr_108510 = state_108099;
(statearr_108510[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108510;
})();
var inst_107914 = (state_108099[(2)]);
var inst_107915 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_107916 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_107917 = (new cljs.core.PersistentVector(null,1,(5),inst_107915,inst_107916,null));
var inst_107918 = cljs.test.update_current_env_BANG_(inst_107917,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_108099[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_108099__$1 = (function (){var statearr_108512 = state_108099;
(statearr_108512[(75)] = inst_107918);

return statearr_108512;
})();
var statearr_108514_110568 = state_108099__$1;
(statearr_108514_110568[(2)] = inst_107914);

(statearr_108514_110568[(1)] = (66));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (71))){
var state_108099__$1 = state_108099;
var statearr_108516_110569 = state_108099__$1;
(statearr_108516_110569[(2)] = self__.reg);

(statearr_108516_110569[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (42))){
var _ = (function (){var statearr_108519 = state_108099;
(statearr_108519[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108519;
})();
var state_108099__$1 = state_108099;
var ex108509 = (state_108099__$1[(2)]);
var statearr_108520_110570 = state_108099__$1;
(statearr_108520_110570[(5)] = ex108509);


var statearr_108522_110571 = state_108099__$1;
(statearr_108522_110571[(1)] = (41));

(statearr_108522_110571[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (80))){
var inst_107971 = (state_108099[(2)]);
var state_108099__$1 = state_108099;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_108099__$1,(77),inst_107971);
} else {
if((state_val_108105 === (37))){
var state_108099__$1 = state_108099;
var statearr_108524_110572 = state_108099__$1;
(statearr_108524_110572[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_108524_110572[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (63))){
var state_108099__$1 = state_108099;
var statearr_108525_110573 = state_108099__$1;
(statearr_108525_110573[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_108525_110573[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (94))){
var inst_108034 = (state_108099[(2)]);
var inst_108035 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_108036 = check.core.normalize_error(inst_108034);
var inst_108037 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_108038 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_108039 = /Some-error/;
var inst_108040 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108037)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108038)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108039)].join('');
var inst_108041 = [new cljs.core.Keyword(null,"error","error",-978969032),/Some-error/,inst_108036,inst_108040];
var inst_108042 = cljs.core.PersistentHashMap.fromArrays(inst_108035,inst_108041);
var inst_108044 = cljs.test.do_report(inst_108042);
var state_108099__$1 = state_108099;
var statearr_108529_110574 = state_108099__$1;
(statearr_108529_110574[(2)] = inst_108044);

(statearr_108529_110574[(1)] = (93));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (8))){
var state_108099__$1 = state_108099;
var statearr_108530_110575 = state_108099__$1;
(statearr_108530_110575[(2)] = self__.reg);

(statearr_108530_110575[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (49))){
var _ = (function (){var statearr_108532 = state_108099;
(statearr_108532[(4)] = cljs.core.rest((state_108099[(4)])));

return statearr_108532;
})();
var state_108099__$1 = state_108099;
var ex108527 = (state_108099__$1[(2)]);
var statearr_108533_110576 = state_108099__$1;
(statearr_108533_110576[(5)] = ex108527);


throw ex108527;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_108105 === (84))){
var _ = (function (){var statearr_108535 = state_108099;
(statearr_108535[(4)] = cljs.core.cons((86),(state_108099[(4)])));

return statearr_108535;
})();
var ___$1 = (function (){var statearr_108537 = state_108099;
(statearr_108537[(4)] = cljs.core.cons((87),(state_108099[(4)])));

return statearr_108537;
})();
var inst_108017 = repl_tooling.integration.fake_editor.type("(range 4)");
var inst_108018 = repl_tooling.editor_integration.configs_test.change_config_file("(defn error [] (throw (ex-info \"Some-error\" {})))");
var inst_108019 = (self__.reg instanceof Promise);
var state_108099__$1 = (function (){var statearr_108538 = state_108099;
(statearr_108538[(76)] = inst_108018);

(statearr_108538[(77)] = inst_108017);

return statearr_108538;
})();
if(cljs.core.truth_(inst_108019)){
var statearr_108539_110577 = state_108099__$1;
(statearr_108539_110577[(1)] = (89));

} else {
var statearr_108540_110578 = state_108099__$1;
(statearr_108540_110578[(1)] = (90));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});
return (function() {
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = null;
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0 = (function (){
var statearr_108545 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_108545[(0)] = repl_tooling$editor_integration$configs_test$state_machine__34940__auto__);

(statearr_108545[(1)] = (1));

return statearr_108545;
});
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1 = (function (state_108099){
while(true){
var ret_value__34941__auto__ = (function (){try{while(true){
var result__34942__auto__ = switch__34939__auto__(state_108099);
if(cljs.core.keyword_identical_QMARK_(result__34942__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
continue;
} else {
return result__34942__auto__;
}
break;
}
}catch (e108548){var ex__34943__auto__ = e108548;
var statearr_108549_110579 = state_108099;
(statearr_108549_110579[(2)] = ex__34943__auto__);


if(cljs.core.seq((state_108099[(4)]))){
var statearr_108550_110580 = state_108099;
(statearr_108550_110580[(1)] = cljs.core.first((state_108099[(4)])));

} else {
throw ex__34943__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
}})();
if(cljs.core.keyword_identical_QMARK_(ret_value__34941__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
var G__110581 = state_108099;
state_108099 = G__110581;
continue;
} else {
return ret_value__34941__auto__;
}
break;
}
});
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = function(state_108099){
switch(arguments.length){
case 0:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0.call(this);
case 1:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1.call(this,state_108099);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$0 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0;
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$1 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1;
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto__;
})()
})();
var state__35943__auto__ = (function (){var statearr_108554 = f__35942__auto__();
(statearr_108554[(6)] = c__35941__auto__);

return statearr_108554;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__35943__auto__);
}));

return c__35941__auto__;
}finally {cljs.test.update_current_env_BANG_(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.rest);
}}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.getBasis = (function (){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"reg","reg",-1018219425,null),new cljs.core.Symbol(null,"meta106662","meta106662",2009439754,null)], null);
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.cljs$lang$type = true);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.cljs$lang$ctorStr = "repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test106661");

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661.cljs$lang$ctorPrWriter = (function (this__4461__auto__,writer__4462__auto__,opt__4463__auto__){
return cljs.core._write(writer__4462__auto__,"repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test106661");
}));

/**
 * Positional factory function for repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test106661.
 */
repl_tooling.editor_integration.configs_test.__GT_t_repl_tooling$editor_integration$configs_test106661 = (function repl_tooling$editor_integration$configs_test$__GT_t_repl_tooling$editor_integration$configs_test106661(reg__$1,meta106662){
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661(reg__$1,meta106662));
});

}

return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test106661(reg,null));
})], 0)),new cljs.core.Keyword(null,"initial-data","initial-data",-1315709804),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"options","options",99638489),cljs.core.PersistentArrayMap.EMPTY], null));
})], null));

repl_tooling.editor_integration.configs_test.custom_config = (function repl_tooling$editor_integration$configs_test$custom_config(){
return cljs.test.test_var(repl_tooling.editor_integration.configs_test.custom_config.cljs$lang$var);
});
repl_tooling.editor_integration.configs_test.custom_config.cljs$lang$test = (function (){
var reg = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$0();
if((typeof repl_tooling !== 'undefined') && (typeof repl_tooling.editor_integration !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test !== 'undefined') && (typeof repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IFn}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IWithMeta}
*/
repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560 = (function (reg,meta108561){
this.reg = reg;
this.meta108561 = meta108561;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_108562,meta108561__$1){
var self__ = this;
var _108562__$1 = this;
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560(self__.reg,meta108561__$1));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_108562){
var self__ = this;
var _108562__$1 = this;
return self__.meta108561;
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.prototype.call = (function (self__,done__53962__auto__){
var self__ = this;
var self____$1 = this;
var ___9200__auto__ = self____$1;
cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["automatically registering custom commands"], 0));

try{var c__35941__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));
cljs.core.async.impl.dispatch.run((function (){
var f__35942__auto__ = (function (){var switch__34939__auto__ = (function (state_109128){
var state_val_109129 = (state_109128[(1)]);
if((state_val_109129 === (65))){
var _ = (function (){var statearr_109132 = state_109128;
(statearr_109132[(4)] = cljs.core.cons((67),(state_109128[(4)])));

return statearr_109132;
})();
var ___$1 = (function (){var statearr_109134 = state_109128;
(statearr_109134[(4)] = cljs.core.cons((68),(state_109128[(4)])));

return statearr_109134;
})();
var inst_108956 = repl_tooling.editor_integration.configs_test.change_config_file("(defn long-str []\n                              (p/let [res (editor/eval {:text (pr-str (apply str (range 2000)))})]\n                               (prn (str \"a-\" (:result res)))))");
var inst_108957 = (self__.reg instanceof Promise);
var state_109128__$1 = (function (){var statearr_109136 = state_109128;
(statearr_109136[(7)] = inst_108956);

return statearr_109136;
})();
if(cljs.core.truth_(inst_108957)){
var statearr_109137_110582 = state_109128__$1;
(statearr_109137_110582[(1)] = (70));

} else {
var statearr_109139_110583 = state_109128__$1;
(statearr_109139_110583[(1)] = (71));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (70))){
var inst_108569 = (state_109128[(8)]);
var inst_108959 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_108960 = (function (){var mark_as_done__53963__auto__ = inst_108569;
var chan__53977__auto__ = inst_108959;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_108962 = self__.reg.then(inst_108960);
var state_109128__$1 = (function (){var statearr_109142 = state_109128;
(statearr_109142[(9)] = inst_108962);

return statearr_109142;
})();
var statearr_109143_110584 = state_109128__$1;
(statearr_109143_110584[(2)] = inst_108959);

(statearr_109143_110584[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (62))){
var state_109128__$1 = state_109128;
var statearr_109146_110585 = state_109128__$1;
(statearr_109146_110585[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_109146_110585[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (74))){
var inst_109024 = (state_109128[(2)]);
var _ = (function (){var statearr_109148 = state_109128;
(statearr_109148[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109148;
})();
var state_109128__$1 = state_109128;
var statearr_109150_110586 = state_109128__$1;
(statearr_109150_110586[(2)] = inst_109024);

(statearr_109150_110586[(1)] = (67));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (7))){
var inst_108569 = (state_109128[(8)]);
var inst_108601 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_108602 = (function (){var mark_as_done__53963__auto__ = inst_108569;
var chan__53977__auto__ = inst_108601;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_108603 = self__.reg.then(inst_108602);
var state_109128__$1 = (function (){var statearr_109154 = state_109128;
(statearr_109154[(10)] = inst_108603);

return statearr_109154;
})();
var statearr_109155_110587 = state_109128__$1;
(statearr_109155_110587[(2)] = inst_108601);

(statearr_109155_110587[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (59))){
var inst_108569 = (state_109128[(8)]);
var inst_108902 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_108903 = repl_tooling.integration.fake_editor.change_result();
var inst_108904 = (function (){var mark_as_done__53963__auto__ = inst_108569;
var chan__53977__auto__ = inst_108902;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_108906 = inst_108903.then(inst_108904);
var state_109128__$1 = (function (){var statearr_109158 = state_109128;
(statearr_109158[(11)] = inst_108906);

return statearr_109158;
})();
var statearr_109159_110588 = state_109128__$1;
(statearr_109159_110588[(2)] = inst_108902);

(statearr_109159_110588[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (86))){
var _ = (function (){var statearr_109161 = state_109128;
(statearr_109161[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109161;
})();
var inst_109033 = (state_109128[(2)]);
var inst_109034 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109035 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109036 = (new cljs.core.PersistentVector(null,1,(5),inst_109034,inst_109035,null));
var inst_109037 = cljs.test.update_current_env_BANG_(inst_109036,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109128[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109128__$1 = (function (){var statearr_109164 = state_109128;
(statearr_109164[(12)] = inst_109037);

return statearr_109164;
})();
var statearr_109165_110589 = state_109128__$1;
(statearr_109165_110589[(2)] = inst_109033);

(statearr_109165_110589[(1)] = (85));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (20))){
var _ = (function (){var statearr_109169 = state_109128;
(statearr_109169[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109169;
})();
var state_109128__$1 = state_109128;
var ex109156 = (state_109128__$1[(2)]);
var statearr_109170_110590 = state_109128__$1;
(statearr_109170_110590[(5)] = ex109156);


var statearr_109172_110591 = state_109128__$1;
(statearr_109172_110591[(1)] = (19));

(statearr_109172_110591[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (72))){
var inst_108965 = (state_109128[(2)]);
var state_109128__$1 = state_109128;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109128__$1,(69),inst_108965);
} else {
if((state_val_109129 === (58))){
var inst_108912 = (state_109128[(2)]);
var inst_108913 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_108914 = "(\n0\n \n1\n \n2\n)";
var inst_108915 = matcher_combinators.core.match("(\n0\n \n1\n \n2\n)",inst_108912);
var inst_108916 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_108912], 0));
var inst_108917 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_108915);
var inst_108918 = matcher_combinators.printer.as_string(inst_108917);
var inst_108919 = [inst_108916,"\n\nMismatch:\n",inst_108918].join('');
var inst_108920 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_108915);
var inst_108921 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_108920);
var inst_108922 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109128__$1 = (function (){var statearr_109178 = state_109128;
(statearr_109178[(13)] = inst_108913);

(statearr_109178[(14)] = inst_108922);

(statearr_109178[(15)] = inst_108914);

(statearr_109178[(16)] = inst_108919);

return statearr_109178;
})();
if(inst_108921){
var statearr_109179_110592 = state_109128__$1;
(statearr_109179_110592[(1)] = (62));

} else {
var statearr_109181_110593 = state_109128__$1;
(statearr_109181_110593[(1)] = (63));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (60))){
var inst_108908 = repl_tooling.integration.fake_editor.change_result();
var state_109128__$1 = state_109128;
var statearr_109183_110594 = state_109128__$1;
(statearr_109183_110594[(2)] = inst_108908);

(statearr_109183_110594[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (27))){
var _ = (function (){var statearr_109185 = state_109128;
(statearr_109185[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109185;
})();
var state_109128__$1 = state_109128;
var ex109174 = (state_109128__$1[(2)]);
var statearr_109187_110595 = state_109128__$1;
(statearr_109187_110595[(5)] = ex109174);


throw ex109174;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (1))){
var inst_108569 = (state_109128[(8)]);
var inst_108568 = (function (){return (function (){
cljs.core.async.close_BANG_(self__.reg);

repl_tooling.integration.fake_editor.disconnect_BANG_();

return (done__53962__auto__.cljs$core$IFn$_invoke$arity$0 ? done__53962__auto__.cljs$core$IFn$_invoke$arity$0() : done__53962__auto__.call(null));
});
})();
var inst_108569__$1 = (new cljs.core.Delay(inst_108568,null));
var inst_108570 = (function (){var mark_as_done__53963__auto__ = inst_108569__$1;
return (function (){
if(cljs.core.realized_QMARK_(mark_as_done__53963__auto__)){
return null;
} else {
try{var value__9156__auto___110596 = (function(){throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)})();
if(cljs.core.truth_(value__9156__auto___110596)){
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"pass","pass",1574159993),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110596,null]));
} else {
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"fail","fail",1706214930),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110596,null]));
}

}catch (e109193){var t__9189__auto___110597 = e109193;
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"error","error",-978969032),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,t__9189__auto___110597,null]));
}
return cljs.core.deref(mark_as_done__53963__auto__);
}
});
})();
var inst_108571 = setTimeout(inst_108570,(8000));
var inst_108572 = repl_tooling.editor_integration.configs_test.change_config_file("(defn- qt [txt] (str \"'\" txt))\n                         (defn q [] (update {:code \"(+ 1 2)\"} :code qt))");
var inst_108574 = [new cljs.core.Keyword(null,"config-file-path","config-file-path",-862460128),new cljs.core.Keyword(null,"register-commands","register-commands",-552391338)];
var inst_108576 = (function (){var mark_as_done__53963__auto__ = inst_108569__$1;
return (function (cmds){
cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(self__.reg,cljs.core.set(cljs.core.keys(cmds)));

return cljs.core.reset_BANG_(repl_tooling.editor_integration.configs_test.custom_commands,cmds);
});
})();
var inst_108577 = [repl_tooling.editor_integration.configs_test.config_file,inst_108576];
var inst_108578 = cljs.core.PersistentHashMap.fromArrays(inst_108574,inst_108577);
var inst_108579 = repl_tooling.integration.fake_editor.connect_BANG_.cljs$core$IFn$_invoke$arity$1(inst_108578);
var inst_108580 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108581 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108582 = (new cljs.core.PersistentVector(null,1,(5),inst_108580,inst_108581,null));
var inst_108583 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_108582,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["when connected, new commands are registered"], 0));
var state_109128__$1 = (function (){var statearr_109197 = state_109128;
(statearr_109197[(17)] = inst_108583);

(statearr_109197[(18)] = inst_108579);

(statearr_109197[(19)] = inst_108572);

(statearr_109197[(8)] = inst_108569__$1);

(statearr_109197[(20)] = inst_108571);

return statearr_109197;
})();
var statearr_109198_110598 = state_109128__$1;
(statearr_109198_110598[(2)] = null);

(statearr_109198_110598[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (69))){
var inst_108967 = (state_109128[(2)]);
var inst_108968 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_108969 = new cljs.core.Keyword(null,"long-str","long-str",184146513).cljs$core$IFn$_invoke$arity$1(inst_108968);
var inst_108970 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_108969);
var inst_108971 = (inst_108970.cljs$core$IFn$_invoke$arity$0 ? inst_108970.cljs$core$IFn$_invoke$arity$0() : inst_108970.call(null));
var state_109128__$1 = (function (){var statearr_109200 = state_109128;
(statearr_109200[(21)] = inst_108967);

(statearr_109200[(22)] = inst_108971);

return statearr_109200;
})();
var statearr_109202_110599 = state_109128__$1;
(statearr_109202_110599[(2)] = null);

(statearr_109202_110599[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (101))){
var state_109128__$1 = state_109128;
var statearr_109204_110600 = state_109128__$1;
(statearr_109204_110600[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_109204_110600[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (24))){
var _ = (function (){var statearr_109205 = state_109128;
(statearr_109205[(4)] = cljs.core.cons((26),(state_109128[(4)])));

return statearr_109205;
})();
var ___$1 = (function (){var statearr_109206 = state_109128;
(statearr_109206[(4)] = cljs.core.cons((27),(state_109128[(4)])));

return statearr_109206;
})();
var inst_108736 = repl_tooling.editor_integration.configs_test.change_config_file("(defn p [args] :end)");
var inst_108737 = (self__.reg instanceof Promise);
var state_109128__$1 = (function (){var statearr_109208 = state_109128;
(statearr_109208[(23)] = inst_108736);

return statearr_109208;
})();
if(cljs.core.truth_(inst_108737)){
var statearr_109209_110601 = state_109128__$1;
(statearr_109209_110601[(1)] = (29));

} else {
var statearr_109210_110602 = state_109128__$1;
(statearr_109210_110602[(1)] = (30));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (102))){
var inst_109104 = (state_109128[(24)]);
var inst_109100 = (state_109128[(25)]);
var inst_109095 = (state_109128[(26)]);
var inst_109108 = (state_109128[(2)]);
var inst_109109 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_109100);
var inst_109110 = [inst_109108,inst_109095,inst_109109];
var inst_109111 = cljs.core.PersistentHashMap.fromArrays(inst_109104,inst_109110);
var inst_109112 = cljs.test.do_report(inst_109111);
var _ = (function (){var statearr_109212 = state_109128;
(statearr_109212[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109212;
})();
var state_109128__$1 = state_109128;
var statearr_109215_110603 = state_109128__$1;
(statearr_109215_110603[(2)] = inst_109112);

(statearr_109215_110603[(1)] = (93));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (55))){
var inst_108933 = (state_109128[(2)]);
var _ = (function (){var statearr_109218 = state_109128;
(statearr_109218[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109218;
})();
var state_109128__$1 = state_109128;
var statearr_109219_110604 = state_109128__$1;
(statearr_109219_110604[(2)] = inst_108933);

(statearr_109219_110604[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (85))){
var inst_108569 = (state_109128[(8)]);
var inst_109118 = (state_109128[(2)]);
var inst_109119 = cljs.core.deref(inst_108569);
var state_109128__$1 = (function (){var statearr_109222 = state_109128;
(statearr_109222[(27)] = inst_109118);

return statearr_109222;
})();
return cljs.core.async.impl.ioc_helpers.return_chan(state_109128__$1,inst_109119);
} else {
if((state_val_109129 === (39))){
var _ = (function (){var statearr_109225 = state_109128;
(statearr_109225[(4)] = cljs.core.cons((42),(state_109128[(4)])));

return statearr_109225;
})();
var inst_108812 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_108813 = [new cljs.core.Keyword(null,"p","p",151049309)];
var inst_108814 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_108815 = [cljs.core.fn_QMARK_];
var inst_108816 = cljs.core.PersistentHashMap.fromArrays(inst_108814,inst_108815);
var inst_108817 = [inst_108816];
var inst_108818 = cljs.core.PersistentHashMap.fromArrays(inst_108813,inst_108817);
var inst_108819 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_108820 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_108821 = matcher_combinators.core.match(inst_108818,inst_108812);
var inst_108822 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_108812], 0));
var inst_108823 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_108821);
var inst_108825 = matcher_combinators.printer.as_string(inst_108823);
var inst_108826 = [inst_108822,"\n\nMismatch:\n",inst_108825].join('');
var inst_108827 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_108821);
var inst_108828 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_108827);
var inst_108830 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109128__$1 = (function (){var statearr_109228 = state_109128;
(statearr_109228[(28)] = inst_108820);

(statearr_109228[(29)] = inst_108826);

(statearr_109228[(30)] = inst_108830);

(statearr_109228[(31)] = inst_108819);

return statearr_109228;
})();
if(inst_108828){
var statearr_109229_110605 = state_109128__$1;
(statearr_109229_110605[(1)] = (43));

} else {
var statearr_109231_110606 = state_109128__$1;
(statearr_109231_110606[(1)] = (44));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (88))){
var inst_109057 = (state_109128[(2)]);
var inst_109059 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_109060 = new cljs.core.Keyword(null,"error","error",-978969032).cljs$core$IFn$_invoke$arity$1(inst_109059);
var inst_109061 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_109060);
var inst_109062 = (inst_109061.cljs$core$IFn$_invoke$arity$0 ? inst_109061.cljs$core$IFn$_invoke$arity$0() : inst_109061.call(null));
var state_109128__$1 = (function (){var statearr_109233 = state_109128;
(statearr_109233[(32)] = inst_109062);

(statearr_109233[(33)] = inst_109057);

return statearr_109233;
})();
var statearr_109234_110607 = state_109128__$1;
(statearr_109234_110607[(2)] = null);

(statearr_109234_110607[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (46))){
var _ = (function (){var statearr_109235 = state_109128;
(statearr_109235[(4)] = cljs.core.cons((48),(state_109128[(4)])));

return statearr_109235;
})();
var ___$1 = (function (){var statearr_109236 = state_109128;
(statearr_109236[(4)] = cljs.core.cons((49),(state_109128[(4)])));

return statearr_109236;
})();
var inst_108864 = repl_tooling.integration.fake_editor.type("(range 3)");
var inst_108865 = repl_tooling.editor_integration.configs_test.change_config_file("(defn e-block [] (p/let [data (editor/get-top-block)]\n          (editor/eval-and-render data)))");
var inst_108867 = (self__.reg instanceof Promise);
var state_109128__$1 = (function (){var statearr_109240 = state_109128;
(statearr_109240[(34)] = inst_108864);

(statearr_109240[(35)] = inst_108865);

return statearr_109240;
})();
if(cljs.core.truth_(inst_108867)){
var statearr_109241_110608 = state_109128__$1;
(statearr_109241_110608[(1)] = (51));

} else {
var statearr_109242_110609 = state_109128__$1;
(statearr_109242_110609[(1)] = (52));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (4))){
var _ = (function (){var statearr_109244 = state_109128;
(statearr_109244[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109244;
})();
var inst_108585 = (state_109128[(2)]);
var inst_108586 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108587 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108588 = (new cljs.core.PersistentVector(null,1,(5),inst_108586,inst_108587,null));
var inst_108589 = cljs.test.update_current_env_BANG_(inst_108588,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109128[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109128__$1 = (function (){var statearr_109245 = state_109128;
(statearr_109245[(36)] = inst_108589);

return statearr_109245;
})();
var statearr_109246_110610 = state_109128__$1;
(statearr_109246_110610[(2)] = inst_108585);

(statearr_109246_110610[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (77))){
var inst_109002 = (state_109128[(2)]);
var inst_109003 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-stdout","editor/change-stdout",294315011,null)));
var inst_109004 = /a-01234567891011.*/;
var inst_109005 = matcher_combinators.core.match(/a-01234567891011.*/,inst_109002);
var inst_109007 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_109002], 0));
var inst_109008 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_109005);
var inst_109009 = matcher_combinators.printer.as_string(inst_109008);
var inst_109010 = [inst_109007,"\n\nMismatch:\n",inst_109009].join('');
var inst_109011 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_109005);
var inst_109012 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_109011);
var inst_109013 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109128__$1 = (function (){var statearr_109247 = state_109128;
(statearr_109247[(37)] = inst_109003);

(statearr_109247[(38)] = inst_109004);

(statearr_109247[(39)] = inst_109010);

(statearr_109247[(40)] = inst_109013);

return statearr_109247;
})();
if(inst_109012){
var statearr_109248_110611 = state_109128__$1;
(statearr_109248_110611[(1)] = (81));

} else {
var statearr_109249_110612 = state_109128__$1;
(statearr_109249_110612[(1)] = (82));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (95))){
var _ = (function (){var statearr_109250 = state_109128;
(statearr_109250[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109250;
})();
var state_109128__$1 = state_109128;
var ex109243 = (state_109128__$1[(2)]);
var statearr_109251_110613 = state_109128__$1;
(statearr_109251_110613[(5)] = ex109243);


var statearr_109252_110614 = state_109128__$1;
(statearr_109252_110614[(1)] = (94));

(statearr_109252_110614[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (54))){
var _ = (function (){var statearr_109253 = state_109128;
(statearr_109253[(4)] = cljs.core.cons((57),(state_109128[(4)])));

return statearr_109253;
})();
var inst_108899 = repl_tooling.integration.fake_editor.change_result();
var inst_108900 = (inst_108899 instanceof Promise);
var state_109128__$1 = state_109128;
if(cljs.core.truth_(inst_108900)){
var statearr_109254_110615 = state_109128__$1;
(statearr_109254_110615[(1)] = (59));

} else {
var statearr_109255_110616 = state_109128__$1;
(statearr_109255_110616[(1)] = (60));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (92))){
var _ = (function (){var statearr_109256 = state_109128;
(statearr_109256[(4)] = cljs.core.cons((95),(state_109128[(4)])));

return statearr_109256;
})();
var inst_109078 = repl_tooling.integration.fake_editor.change_result();
var inst_109079 = (inst_109078 instanceof Promise);
var state_109128__$1 = state_109128;
if(cljs.core.truth_(inst_109079)){
var statearr_109257_110617 = state_109128__$1;
(statearr_109257_110617[(1)] = (97));

} else {
var statearr_109258_110618 = state_109128__$1;
(statearr_109258_110618[(1)] = (98));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (15))){
var state_109128__$1 = state_109128;
var statearr_109259_110619 = state_109128__$1;
(statearr_109259_110619[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_109259_110619[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (48))){
var _ = (function (){var statearr_109260 = state_109128;
(statearr_109260[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109260;
})();
var inst_108852 = (state_109128[(2)]);
var inst_108853 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108854 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108855 = (new cljs.core.PersistentVector(null,1,(5),inst_108853,inst_108854,null));
var inst_108856 = cljs.test.update_current_env_BANG_(inst_108855,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109128[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109128__$1 = (function (){var statearr_109261 = state_109128;
(statearr_109261[(41)] = inst_108856);

return statearr_109261;
})();
var statearr_109262_110620 = state_109128__$1;
(statearr_109262_110620[(2)] = inst_108852);

(statearr_109262_110620[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (50))){
var inst_108878 = (state_109128[(2)]);
var inst_108879 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_108880 = new cljs.core.Keyword(null,"e-block","e-block",964370856).cljs$core$IFn$_invoke$arity$1(inst_108879);
var inst_108881 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_108880);
var inst_108882 = (inst_108881.cljs$core$IFn$_invoke$arity$0 ? inst_108881.cljs$core$IFn$_invoke$arity$0() : inst_108881.call(null));
var state_109128__$1 = (function (){var statearr_109263 = state_109128;
(statearr_109263[(42)] = inst_108878);

(statearr_109263[(43)] = inst_108882);

return statearr_109263;
})();
var statearr_109264_110621 = state_109128__$1;
(statearr_109264_110621[(2)] = null);

(statearr_109264_110621[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (75))){
var inst_108972 = (state_109128[(2)]);
var inst_108974 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_108975 = check.core.normalize_error(inst_108972);
var inst_108976 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-stdout","editor/change-stdout",294315011,null)));
var inst_108977 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_108978 = /a-01234567891011.*/;
var inst_108979 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108976)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108977)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108978)].join('');
var inst_108980 = [new cljs.core.Keyword(null,"error","error",-978969032),/a-01234567891011.*/,inst_108975,inst_108979];
var inst_108981 = cljs.core.PersistentHashMap.fromArrays(inst_108974,inst_108980);
var inst_108982 = cljs.test.do_report(inst_108981);
var state_109128__$1 = state_109128;
var statearr_109265_110622 = state_109128__$1;
(statearr_109265_110622[(2)] = inst_108982);

(statearr_109265_110622[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (99))){
var inst_109091 = (state_109128[(2)]);
var state_109128__$1 = state_109128;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109128__$1,(96),inst_109091);
} else {
if((state_val_109129 === (21))){
var state_109128__$1 = state_109128;
var statearr_109266_110623 = state_109128__$1;
(statearr_109266_110623[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_109266_110623[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (31))){
var inst_108745 = (state_109128[(2)]);
var state_109128__$1 = state_109128;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109128__$1,(28),inst_108745);
} else {
if((state_val_109129 === (32))){
var _ = (function (){var statearr_109267 = state_109128;
(statearr_109267[(4)] = cljs.core.cons((35),(state_109128[(4)])));

return statearr_109267;
})();
var inst_108763 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_108764 = new cljs.core.Keyword(null,"q","q",689001697).cljs$core$IFn$_invoke$arity$1(inst_108763);
var inst_108765 = cljs.core.list(new cljs.core.Keyword(null,"q","q",689001697),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)));
var inst_108766 = null;
var inst_108767 = matcher_combinators.core.match(null,inst_108764);
var inst_108770 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_108764], 0));
var inst_108771 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_108767);
var inst_108772 = matcher_combinators.printer.as_string(inst_108771);
var inst_108773 = [inst_108770,"\n\nMismatch:\n",inst_108772].join('');
var inst_108774 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_108767);
var inst_108775 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_108774);
var inst_108777 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109128__$1 = (function (){var statearr_109268 = state_109128;
(statearr_109268[(44)] = inst_108765);

(statearr_109268[(45)] = inst_108777);

(statearr_109268[(46)] = inst_108773);

(statearr_109268[(47)] = inst_108766);

return statearr_109268;
})();
if(inst_108775){
var statearr_109269_110624 = state_109128__$1;
(statearr_109269_110624[(1)] = (36));

} else {
var statearr_109270_110625 = state_109128__$1;
(statearr_109270_110625[(1)] = (37));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (40))){
var inst_108841 = (state_109128[(2)]);
var _ = (function (){var statearr_109271 = state_109128;
(statearr_109271[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109271;
})();
var state_109128__$1 = state_109128;
var statearr_109272_110626 = state_109128__$1;
(statearr_109272_110626[(2)] = inst_108841);

(statearr_109272_110626[(1)] = (26));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (91))){
var inst_109055 = (state_109128[(2)]);
var state_109128__$1 = state_109128;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109128__$1,(88),inst_109055);
} else {
if((state_val_109129 === (56))){
var inst_108883 = (state_109128[(2)]);
var inst_108884 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_108885 = check.core.normalize_error(inst_108883);
var inst_108886 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_108887 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_108888 = "(\n0\n \n1\n \n2\n)";
var inst_108889 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108886)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108887)," ",inst_108888].join('');
var inst_108890 = [new cljs.core.Keyword(null,"error","error",-978969032),"(\n0\n \n1\n \n2\n)",inst_108885,inst_108889];
var inst_108891 = cljs.core.PersistentHashMap.fromArrays(inst_108884,inst_108890);
var inst_108892 = cljs.test.do_report(inst_108891);
var state_109128__$1 = state_109128;
var statearr_109274_110627 = state_109128__$1;
(statearr_109274_110627[(2)] = inst_108892);

(statearr_109274_110627[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (33))){
var inst_108789 = (state_109128[(2)]);
var state_109128__$1 = (function (){var statearr_109275 = state_109128;
(statearr_109275[(48)] = inst_108789);

return statearr_109275;
})();
var statearr_109276_110628 = state_109128__$1;
(statearr_109276_110628[(2)] = null);

(statearr_109276_110628[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (13))){
var _ = (function (){var statearr_109277 = state_109128;
(statearr_109277[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109277;
})();
var state_109128__$1 = state_109128;
var ex109273 = (state_109128__$1[(2)]);
var statearr_109278_110629 = state_109128__$1;
(statearr_109278_110629[(5)] = ex109273);


var statearr_109279_110630 = state_109128__$1;
(statearr_109279_110630[(1)] = (12));

(statearr_109279_110630[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (22))){
var state_109128__$1 = state_109128;
var statearr_109280_110631 = state_109128__$1;
(statearr_109280_110631[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_109280_110631[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (90))){
var state_109128__$1 = state_109128;
var statearr_109281_110632 = state_109128__$1;
(statearr_109281_110632[(2)] = self__.reg);

(statearr_109281_110632[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (36))){
var state_109128__$1 = state_109128;
var statearr_109282_110633 = state_109128__$1;
(statearr_109282_110633[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_109282_110633[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (41))){
var inst_108790 = (state_109128[(2)]);
var inst_108791 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_108792 = [new cljs.core.Keyword(null,"p","p",151049309)];
var inst_108793 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_108794 = [cljs.core.fn_QMARK_];
var inst_108795 = cljs.core.PersistentHashMap.fromArrays(inst_108793,inst_108794);
var inst_108796 = [inst_108795];
var inst_108797 = cljs.core.PersistentHashMap.fromArrays(inst_108792,inst_108796);
var inst_108798 = check.core.normalize_error(inst_108790);
var inst_108800 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_108801 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_108802 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_108803 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108800)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108801)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108802)].join('');
var inst_108804 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_108797,inst_108798,inst_108803];
var inst_108805 = cljs.core.PersistentHashMap.fromArrays(inst_108791,inst_108804);
var inst_108806 = cljs.test.do_report(inst_108805);
var state_109128__$1 = state_109128;
var statearr_109283_110634 = state_109128__$1;
(statearr_109283_110634[(2)] = inst_108806);

(statearr_109283_110634[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (89))){
var inst_108569 = (state_109128[(8)]);
var inst_109050 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109051 = (function (){var mark_as_done__53963__auto__ = inst_108569;
var chan__53977__auto__ = inst_109050;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109052 = self__.reg.then(inst_109051);
var state_109128__$1 = (function (){var statearr_109284 = state_109128;
(statearr_109284[(49)] = inst_109052);

return statearr_109284;
})();
var statearr_109285_110635 = state_109128__$1;
(statearr_109285_110635[(2)] = inst_109050);

(statearr_109285_110635[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (100))){
var state_109128__$1 = state_109128;
var statearr_109286_110636 = state_109128__$1;
(statearr_109286_110636[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_109286_110636[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (43))){
var state_109128__$1 = state_109128;
var statearr_109287_110637 = state_109128__$1;
(statearr_109287_110637[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_109287_110637[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (61))){
var inst_108910 = (state_109128[(2)]);
var state_109128__$1 = state_109128;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109128__$1,(58),inst_108910);
} else {
if((state_val_109129 === (29))){
var inst_108569 = (state_109128[(8)]);
var inst_108740 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_108741 = (function (){var mark_as_done__53963__auto__ = inst_108569;
var chan__53977__auto__ = inst_108740;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_108742 = self__.reg.then(inst_108741);
var state_109128__$1 = (function (){var statearr_109288 = state_109128;
(statearr_109288[(50)] = inst_108742);

return statearr_109288;
})();
var statearr_109289_110638 = state_109128__$1;
(statearr_109289_110638[(2)] = inst_108740);

(statearr_109289_110638[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (44))){
var state_109128__$1 = state_109128;
var statearr_109290_110639 = state_109128__$1;
(statearr_109290_110639[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_109290_110639[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (93))){
var inst_109115 = (state_109128[(2)]);
var _ = (function (){var statearr_109291 = state_109128;
(statearr_109291[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109291;
})();
var state_109128__$1 = state_109128;
var statearr_109292_110640 = state_109128__$1;
(statearr_109292_110640[(2)] = inst_109115);

(statearr_109292_110640[(1)] = (86));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (6))){
var inst_108608 = (state_109128[(2)]);
var state_109128__$1 = (function (){var statearr_109293 = state_109128;
(statearr_109293[(51)] = inst_108608);

return statearr_109293;
})();
var statearr_109294_110641 = state_109128__$1;
(statearr_109294_110641[(2)] = null);

(statearr_109294_110641[(1)] = (10));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (28))){
var inst_108747 = (state_109128[(2)]);
var state_109128__$1 = (function (){var statearr_109295 = state_109128;
(statearr_109295[(52)] = inst_108747);

return statearr_109295;
})();
var statearr_109296_110642 = state_109128__$1;
(statearr_109296_110642[(2)] = null);

(statearr_109296_110642[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (64))){
var inst_108922 = (state_109128[(14)]);
var inst_108914 = (state_109128[(15)]);
var inst_108919 = (state_109128[(16)]);
var inst_108926 = (state_109128[(2)]);
var inst_108927 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_108919);
var inst_108928 = [inst_108926,inst_108914,inst_108927];
var inst_108929 = cljs.core.PersistentHashMap.fromArrays(inst_108922,inst_108928);
var inst_108930 = cljs.test.do_report(inst_108929);
var _ = (function (){var statearr_109297 = state_109128;
(statearr_109297[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109297;
})();
var state_109128__$1 = state_109128;
var statearr_109298_110643 = state_109128__$1;
(statearr_109298_110643[(2)] = inst_108930);

(statearr_109298_110643[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (51))){
var inst_108569 = (state_109128[(8)]);
var inst_108870 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_108872 = (function (){var mark_as_done__53963__auto__ = inst_108569;
var chan__53977__auto__ = inst_108870;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_108873 = self__.reg.then(inst_108872);
var state_109128__$1 = (function (){var statearr_109299 = state_109128;
(statearr_109299[(53)] = inst_108873);

return statearr_109299;
})();
var statearr_109300_110644 = state_109128__$1;
(statearr_109300_110644[(2)] = inst_108870);

(statearr_109300_110644[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (25))){
var inst_108844 = (state_109128[(2)]);
var inst_108846 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108848 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108849 = (new cljs.core.PersistentVector(null,1,(5),inst_108846,inst_108848,null));
var inst_108850 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_108849,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["getting blocks"], 0));
var state_109128__$1 = (function (){var statearr_109301 = state_109128;
(statearr_109301[(54)] = inst_108850);

(statearr_109301[(55)] = inst_108844);

return statearr_109301;
})();
var statearr_109302_110645 = state_109128__$1;
(statearr_109302_110645[(2)] = null);

(statearr_109302_110645[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (34))){
var inst_108748 = (state_109128[(2)]);
var inst_108749 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_108750 = check.core.normalize_error(inst_108748);
var inst_108751 = cljs.core.list(new cljs.core.Keyword(null,"q","q",689001697),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)));
var inst_108752 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_108753 = null;
var inst_108754 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108751)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108752)," ",inst_108753].join('');
var inst_108755 = [new cljs.core.Keyword(null,"error","error",-978969032),null,inst_108750,inst_108754];
var inst_108756 = cljs.core.PersistentHashMap.fromArrays(inst_108749,inst_108755);
var inst_108757 = cljs.test.do_report(inst_108756);
var state_109128__$1 = state_109128;
var statearr_109303_110646 = state_109128__$1;
(statearr_109303_110646[(2)] = inst_108757);

(statearr_109303_110646[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (17))){
var _ = (function (){var statearr_109304 = state_109128;
(statearr_109304[(4)] = cljs.core.cons((20),(state_109128[(4)])));

return statearr_109304;
})();
var inst_108683 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_108684 = new cljs.core.Keyword(null,"q","q",689001697).cljs$core$IFn$_invoke$arity$1(inst_108683);
var inst_108685 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_108684);
var inst_108686 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_108687 = ["(+ 1 2)"];
var inst_108688 = cljs.core.PersistentHashMap.fromArrays(inst_108686,inst_108687);
var inst_108689 = (inst_108685.cljs$core$IFn$_invoke$arity$1 ? inst_108685.cljs$core$IFn$_invoke$arity$1(inst_108688) : inst_108685.call(null,inst_108688));
var inst_108690 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_108691 = ["'(+ 1 2)"];
var inst_108692 = cljs.core.PersistentHashMap.fromArrays(inst_108690,inst_108691);
var inst_108693 = cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)),new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.Keyword(null,"command","command",-894540724)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)"], null));
var inst_108694 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"'(+ 1 2)"], null);
var inst_108696 = matcher_combinators.core.match(inst_108692,inst_108689);
var inst_108697 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_108689], 0));
var inst_108698 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_108696);
var inst_108699 = matcher_combinators.printer.as_string(inst_108698);
var inst_108700 = [inst_108697,"\n\nMismatch:\n",inst_108699].join('');
var inst_108701 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_108696);
var inst_108702 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_108701);
var inst_108703 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109128__$1 = (function (){var statearr_109305 = state_109128;
(statearr_109305[(56)] = inst_108694);

(statearr_109305[(57)] = inst_108700);

(statearr_109305[(58)] = inst_108693);

(statearr_109305[(59)] = inst_108703);

return statearr_109305;
})();
if(inst_108702){
var statearr_109306_110647 = state_109128__$1;
(statearr_109306_110647[(1)] = (21));

} else {
var statearr_109307_110648 = state_109128__$1;
(statearr_109307_110648[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (3))){
var inst_108717 = (state_109128[(2)]);
var inst_108719 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108720 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108721 = (new cljs.core.PersistentVector(null,1,(5),inst_108719,inst_108720,null));
var inst_108722 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_108721,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["when changing the file, new commands are registered"], 0));
var state_109128__$1 = (function (){var statearr_109308 = state_109128;
(statearr_109308[(60)] = inst_108722);

(statearr_109308[(61)] = inst_108717);

return statearr_109308;
})();
var statearr_109309_110649 = state_109128__$1;
(statearr_109309_110649[(2)] = null);

(statearr_109309_110649[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (12))){
var inst_108609 = (state_109128[(2)]);
var inst_108610 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_108611 = [new cljs.core.Keyword(null,"q","q",689001697)];
var inst_108613 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_108614 = [cljs.core.fn_QMARK_];
var inst_108615 = cljs.core.PersistentHashMap.fromArrays(inst_108613,inst_108614);
var inst_108616 = [inst_108615];
var inst_108617 = cljs.core.PersistentHashMap.fromArrays(inst_108611,inst_108616);
var inst_108618 = check.core.normalize_error(inst_108609);
var inst_108620 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_108621 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_108622 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_108623 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108620)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108621)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108622)].join('');
var inst_108624 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_108617,inst_108618,inst_108623];
var inst_108625 = cljs.core.PersistentHashMap.fromArrays(inst_108610,inst_108624);
var inst_108626 = cljs.test.do_report(inst_108625);
var state_109128__$1 = state_109128;
var statearr_109310_110650 = state_109128__$1;
(statearr_109310_110650[(2)] = inst_108626);

(statearr_109310_110650[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (2))){
var _ = (function (){var statearr_109311 = state_109128;
(statearr_109311[(4)] = cljs.core.cons((4),(state_109128[(4)])));

return statearr_109311;
})();
var ___$1 = (function (){var statearr_109312 = state_109128;
(statearr_109312[(4)] = cljs.core.cons((5),(state_109128[(4)])));

return statearr_109312;
})();
var inst_108598 = (self__.reg instanceof Promise);
var state_109128__$1 = state_109128;
if(cljs.core.truth_(inst_108598)){
var statearr_109313_110651 = state_109128__$1;
(statearr_109313_110651[(1)] = (7));

} else {
var statearr_109314_110652 = state_109128__$1;
(statearr_109314_110652[(1)] = (8));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (66))){
var inst_109027 = (state_109128[(2)]);
var inst_109028 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109029 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109030 = (new cljs.core.PersistentVector(null,1,(5),inst_109028,inst_109029,null));
var inst_109031 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_109030,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["checking for errors"], 0));
var state_109128__$1 = (function (){var statearr_109315 = state_109128;
(statearr_109315[(62)] = inst_109027);

(statearr_109315[(63)] = inst_109031);

return statearr_109315;
})();
var statearr_109316_110653 = state_109128__$1;
(statearr_109316_110653[(2)] = null);

(statearr_109316_110653[(1)] = (84));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (23))){
var inst_108694 = (state_109128[(56)]);
var inst_108700 = (state_109128[(57)]);
var inst_108703 = (state_109128[(59)]);
var inst_108707 = (state_109128[(2)]);
var inst_108708 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_108700);
var inst_108709 = [inst_108707,inst_108694,inst_108708];
var inst_108710 = cljs.core.PersistentHashMap.fromArrays(inst_108703,inst_108709);
var inst_108711 = cljs.test.do_report(inst_108710);
var _ = (function (){var statearr_109318 = state_109128;
(statearr_109318[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109318;
})();
var state_109128__$1 = state_109128;
var statearr_109319_110654 = state_109128__$1;
(statearr_109319_110654[(2)] = inst_108711);

(statearr_109319_110654[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (47))){
var inst_108936 = (state_109128[(2)]);
var inst_108938 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108939 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108940 = (new cljs.core.PersistentVector(null,1,(5),inst_108938,inst_108939,null));
var inst_108941 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_108940,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["UNREPL reader tags (IncompleteStr)"], 0));
var state_109128__$1 = (function (){var statearr_109320 = state_109128;
(statearr_109320[(64)] = inst_108941);

(statearr_109320[(65)] = inst_108936);

return statearr_109320;
})();
var statearr_109321_110655 = state_109128__$1;
(statearr_109321_110655[(2)] = null);

(statearr_109321_110655[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (35))){
var _ = (function (){var statearr_109323 = state_109128;
(statearr_109323[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109323;
})();
var state_109128__$1 = state_109128;
var ex109317 = (state_109128__$1[(2)]);
var statearr_109324_110656 = state_109128__$1;
(statearr_109324_110656[(5)] = ex109317);


var statearr_109325_110657 = state_109128__$1;
(statearr_109325_110657[(1)] = (34));

(statearr_109325_110657[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (82))){
var state_109128__$1 = state_109128;
var statearr_109326_110658 = state_109128__$1;
(statearr_109326_110658[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_109326_110658[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (76))){
var _ = (function (){var statearr_109327 = state_109128;
(statearr_109327[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109327;
})();
var state_109128__$1 = state_109128;
var ex109322 = (state_109128__$1[(2)]);
var statearr_109328_110659 = state_109128__$1;
(statearr_109328_110659[(5)] = ex109322);


var statearr_109329_110660 = state_109128__$1;
(statearr_109329_110660[(1)] = (75));

(statearr_109329_110660[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (97))){
var inst_108569 = (state_109128[(8)]);
var inst_109083 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109084 = repl_tooling.integration.fake_editor.change_result();
var inst_109086 = (function (){var mark_as_done__53963__auto__ = inst_108569;
var chan__53977__auto__ = inst_109083;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109087 = inst_109084.then(inst_109086);
var state_109128__$1 = (function (){var statearr_109331 = state_109128;
(statearr_109331[(66)] = inst_109087);

return statearr_109331;
})();
var statearr_109332_110661 = state_109128__$1;
(statearr_109332_110661[(2)] = inst_109083);

(statearr_109332_110661[(1)] = (99));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (19))){
var inst_108663 = (state_109128[(2)]);
var inst_108665 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_108666 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_108667 = ["'(+ 1 2)"];
var inst_108668 = cljs.core.PersistentHashMap.fromArrays(inst_108666,inst_108667);
var inst_108669 = check.core.normalize_error(inst_108663);
var inst_108671 = cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)),new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.Keyword(null,"command","command",-894540724)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)"], null));
var inst_108672 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_108673 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"'(+ 1 2)"], null);
var inst_108674 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108671)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108672)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_108673)].join('');
var inst_108675 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_108668,inst_108669,inst_108674];
var inst_108676 = cljs.core.PersistentHashMap.fromArrays(inst_108665,inst_108675);
var inst_108677 = cljs.test.do_report(inst_108676);
var state_109128__$1 = state_109128;
var statearr_109334_110662 = state_109128__$1;
(statearr_109334_110662[(2)] = inst_108677);

(statearr_109334_110662[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (57))){
var _ = (function (){var statearr_109335 = state_109128;
(statearr_109335[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109335;
})();
var state_109128__$1 = state_109128;
var ex109330 = (state_109128__$1[(2)]);
var statearr_109336_110663 = state_109128__$1;
(statearr_109336_110663[(5)] = ex109330);


var statearr_109337_110664 = state_109128__$1;
(statearr_109337_110664[(1)] = (56));

(statearr_109337_110664[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (68))){
var _ = (function (){var statearr_109338 = state_109128;
(statearr_109338[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109338;
})();
var state_109128__$1 = state_109128;
var ex109333 = (state_109128__$1[(2)]);
var statearr_109339_110665 = state_109128__$1;
(statearr_109339_110665[(5)] = ex109333);


throw ex109333;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (11))){
var inst_108662 = (state_109128[(2)]);
var state_109128__$1 = (function (){var statearr_109341 = state_109128;
(statearr_109341[(67)] = inst_108662);

return statearr_109341;
})();
var statearr_109342_110666 = state_109128__$1;
(statearr_109342_110666[(2)] = null);

(statearr_109342_110666[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (9))){
var inst_108606 = (state_109128[(2)]);
var state_109128__$1 = state_109128;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109128__$1,(6),inst_108606);
} else {
if((state_val_109129 === (5))){
var _ = (function (){var statearr_109343 = state_109128;
(statearr_109343[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109343;
})();
var state_109128__$1 = state_109128;
var ex109340 = (state_109128__$1[(2)]);
var statearr_109344_110667 = state_109128__$1;
(statearr_109344_110667[(5)] = ex109340);


throw ex109340;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (83))){
var inst_109004 = (state_109128[(38)]);
var inst_109010 = (state_109128[(39)]);
var inst_109013 = (state_109128[(40)]);
var inst_109017 = (state_109128[(2)]);
var inst_109018 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_109010);
var inst_109019 = [inst_109017,inst_109004,inst_109018];
var inst_109020 = cljs.core.PersistentHashMap.fromArrays(inst_109013,inst_109019);
var inst_109021 = cljs.test.do_report(inst_109020);
var _ = (function (){var statearr_109345 = state_109128;
(statearr_109345[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109345;
})();
var state_109128__$1 = state_109128;
var statearr_109346_110668 = state_109128__$1;
(statearr_109346_110668[(2)] = inst_109021);

(statearr_109346_110668[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (14))){
var state_109128__$1 = state_109128;
var statearr_109347_110669 = state_109128__$1;
(statearr_109347_110669[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_109347_110669[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (45))){
var inst_108820 = (state_109128[(28)]);
var inst_108826 = (state_109128[(29)]);
var inst_108830 = (state_109128[(30)]);
var inst_108834 = (state_109128[(2)]);
var inst_108835 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_108826);
var inst_108836 = [inst_108834,inst_108820,inst_108835];
var inst_108837 = cljs.core.PersistentHashMap.fromArrays(inst_108830,inst_108836);
var inst_108838 = cljs.test.do_report(inst_108837);
var _ = (function (){var statearr_109348 = state_109128;
(statearr_109348[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109348;
})();
var state_109128__$1 = state_109128;
var statearr_109349_110670 = state_109128__$1;
(statearr_109349_110670[(2)] = inst_108838);

(statearr_109349_110670[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (53))){
var inst_108876 = (state_109128[(2)]);
var state_109128__$1 = state_109128;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109128__$1,(50),inst_108876);
} else {
if((state_val_109129 === (78))){
var inst_108569 = (state_109128[(8)]);
var inst_108992 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_108993 = repl_tooling.integration.fake_editor.change_stdout();
var inst_108995 = (function (){var mark_as_done__53963__auto__ = inst_108569;
var chan__53977__auto__ = inst_108992;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_108996 = inst_108993.then(inst_108995);
var state_109128__$1 = (function (){var statearr_109350 = state_109128;
(statearr_109350[(68)] = inst_108996);

return statearr_109350;
})();
var statearr_109351_110671 = state_109128__$1;
(statearr_109351_110671[(2)] = inst_108992);

(statearr_109351_110671[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (26))){
var _ = (function (){var statearr_109352 = state_109128;
(statearr_109352[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109352;
})();
var inst_108724 = (state_109128[(2)]);
var inst_108725 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108726 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108727 = (new cljs.core.PersistentVector(null,1,(5),inst_108725,inst_108726,null));
var inst_108728 = cljs.test.update_current_env_BANG_(inst_108727,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109128[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109128__$1 = (function (){var statearr_109353 = state_109128;
(statearr_109353[(69)] = inst_108728);

return statearr_109353;
})();
var statearr_109354_110672 = state_109128__$1;
(statearr_109354_110672[(2)] = inst_108724);

(statearr_109354_110672[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (16))){
var inst_108647 = (state_109128[(70)]);
var inst_108650 = (state_109128[(71)]);
var inst_108640 = (state_109128[(72)]);
var inst_108655 = (state_109128[(2)]);
var inst_108656 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_108647);
var inst_108657 = [inst_108655,inst_108640,inst_108656];
var inst_108658 = cljs.core.PersistentHashMap.fromArrays(inst_108650,inst_108657);
var inst_108659 = cljs.test.do_report(inst_108658);
var _ = (function (){var statearr_109355 = state_109128;
(statearr_109355[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109355;
})();
var state_109128__$1 = state_109128;
var statearr_109356_110673 = state_109128__$1;
(statearr_109356_110673[(2)] = inst_108659);

(statearr_109356_110673[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (81))){
var state_109128__$1 = state_109128;
var statearr_109357_110674 = state_109128__$1;
(statearr_109357_110674[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_109357_110674[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (79))){
var inst_108998 = repl_tooling.integration.fake_editor.change_stdout();
var state_109128__$1 = state_109128;
var statearr_109358_110675 = state_109128__$1;
(statearr_109358_110675[(2)] = inst_108998);

(statearr_109358_110675[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (38))){
var inst_108777 = (state_109128[(45)]);
var inst_108773 = (state_109128[(46)]);
var inst_108766 = (state_109128[(47)]);
var inst_108782 = (state_109128[(2)]);
var inst_108783 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_108773);
var inst_108784 = [inst_108782,inst_108766,inst_108783];
var inst_108785 = cljs.core.PersistentHashMap.fromArrays(inst_108777,inst_108784);
var inst_108786 = cljs.test.do_report(inst_108785);
var _ = (function (){var statearr_109360 = state_109128;
(statearr_109360[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109360;
})();
var state_109128__$1 = state_109128;
var statearr_109361_110676 = state_109128__$1;
(statearr_109361_110676[(2)] = inst_108786);

(statearr_109361_110676[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (98))){
var inst_109089 = repl_tooling.integration.fake_editor.change_result();
var state_109128__$1 = state_109128;
var statearr_109362_110677 = state_109128__$1;
(statearr_109362_110677[(2)] = inst_109089);

(statearr_109362_110677[(1)] = (99));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (87))){
var _ = (function (){var statearr_109363 = state_109128;
(statearr_109363[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109363;
})();
var state_109128__$1 = state_109128;
var ex109359 = (state_109128__$1[(2)]);
var statearr_109364_110678 = state_109128__$1;
(statearr_109364_110678[(5)] = ex109359);


throw ex109359;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (30))){
var state_109128__$1 = state_109128;
var statearr_109365_110679 = state_109128__$1;
(statearr_109365_110679[(2)] = self__.reg);

(statearr_109365_110679[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (73))){
var _ = (function (){var statearr_109366 = state_109128;
(statearr_109366[(4)] = cljs.core.cons((76),(state_109128[(4)])));

return statearr_109366;
})();
var inst_108989 = repl_tooling.integration.fake_editor.change_stdout();
var inst_108990 = (inst_108989 instanceof Promise);
var state_109128__$1 = state_109128;
if(cljs.core.truth_(inst_108990)){
var statearr_109367_110680 = state_109128__$1;
(statearr_109367_110680[(1)] = (78));

} else {
var statearr_109368_110681 = state_109128__$1;
(statearr_109368_110681[(1)] = (79));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (96))){
var inst_109093 = (state_109128[(2)]);
var inst_109094 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_109095 = /Some-error/;
var inst_109096 = matcher_combinators.core.match(/Some-error/,inst_109093);
var inst_109097 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_109093], 0));
var inst_109098 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_109096);
var inst_109099 = matcher_combinators.printer.as_string(inst_109098);
var inst_109100 = [inst_109097,"\n\nMismatch:\n",inst_109099].join('');
var inst_109102 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_109096);
var inst_109103 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_109102);
var inst_109104 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109128__$1 = (function (){var statearr_109369 = state_109128;
(statearr_109369[(73)] = inst_109094);

(statearr_109369[(24)] = inst_109104);

(statearr_109369[(25)] = inst_109100);

(statearr_109369[(26)] = inst_109095);

return statearr_109369;
})();
if(inst_109103){
var statearr_109370_110682 = state_109128__$1;
(statearr_109370_110682[(1)] = (100));

} else {
var statearr_109371_110683 = state_109128__$1;
(statearr_109371_110683[(1)] = (101));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (10))){
var _ = (function (){var statearr_109372 = state_109128;
(statearr_109372[(4)] = cljs.core.cons((13),(state_109128[(4)])));

return statearr_109372;
})();
var inst_108632 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_108633 = [new cljs.core.Keyword(null,"q","q",689001697)];
var inst_108634 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_108635 = [cljs.core.fn_QMARK_];
var inst_108636 = cljs.core.PersistentHashMap.fromArrays(inst_108634,inst_108635);
var inst_108637 = [inst_108636];
var inst_108638 = cljs.core.PersistentHashMap.fromArrays(inst_108633,inst_108637);
var inst_108639 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_108640 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_108641 = matcher_combinators.core.match(inst_108638,inst_108632);
var inst_108643 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_108632], 0));
var inst_108645 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_108641);
var inst_108646 = matcher_combinators.printer.as_string(inst_108645);
var inst_108647 = [inst_108643,"\n\nMismatch:\n",inst_108646].join('');
var inst_108648 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_108641);
var inst_108649 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_108648);
var inst_108650 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109128__$1 = (function (){var statearr_109373 = state_109128;
(statearr_109373[(74)] = inst_108639);

(statearr_109373[(70)] = inst_108647);

(statearr_109373[(71)] = inst_108650);

(statearr_109373[(72)] = inst_108640);

return statearr_109373;
})();
if(inst_108649){
var statearr_109374_110684 = state_109128__$1;
(statearr_109374_110684[(1)] = (14));

} else {
var statearr_109375_110685 = state_109128__$1;
(statearr_109375_110685[(1)] = (15));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (18))){
var inst_108714 = (state_109128[(2)]);
var _ = (function (){var statearr_109376 = state_109128;
(statearr_109376[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109376;
})();
var state_109128__$1 = state_109128;
var statearr_109377_110686 = state_109128__$1;
(statearr_109377_110686[(2)] = inst_108714);

(statearr_109377_110686[(1)] = (4));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (52))){
var state_109128__$1 = state_109128;
var statearr_109378_110687 = state_109128__$1;
(statearr_109378_110687[(2)] = self__.reg);

(statearr_109378_110687[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (67))){
var _ = (function (){var statearr_109380 = state_109128;
(statearr_109380[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109380;
})();
var inst_108944 = (state_109128[(2)]);
var inst_108945 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_108946 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_108947 = (new cljs.core.PersistentVector(null,1,(5),inst_108945,inst_108946,null));
var inst_108948 = cljs.test.update_current_env_BANG_(inst_108947,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109128[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109128__$1 = (function (){var statearr_109381 = state_109128;
(statearr_109381[(75)] = inst_108948);

return statearr_109381;
})();
var statearr_109382_110688 = state_109128__$1;
(statearr_109382_110688[(2)] = inst_108944);

(statearr_109382_110688[(1)] = (66));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (71))){
var state_109128__$1 = state_109128;
var statearr_109383_110689 = state_109128__$1;
(statearr_109383_110689[(2)] = self__.reg);

(statearr_109383_110689[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (42))){
var _ = (function (){var statearr_109384 = state_109128;
(statearr_109384[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109384;
})();
var state_109128__$1 = state_109128;
var ex109379 = (state_109128__$1[(2)]);
var statearr_109385_110690 = state_109128__$1;
(statearr_109385_110690[(5)] = ex109379);


var statearr_109386_110691 = state_109128__$1;
(statearr_109386_110691[(1)] = (41));

(statearr_109386_110691[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (80))){
var inst_109000 = (state_109128[(2)]);
var state_109128__$1 = state_109128;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109128__$1,(77),inst_109000);
} else {
if((state_val_109129 === (37))){
var state_109128__$1 = state_109128;
var statearr_109387_110692 = state_109128__$1;
(statearr_109387_110692[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_109387_110692[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (63))){
var state_109128__$1 = state_109128;
var statearr_109388_110693 = state_109128__$1;
(statearr_109388_110693[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_109388_110693[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (94))){
var inst_109063 = (state_109128[(2)]);
var inst_109064 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_109065 = check.core.normalize_error(inst_109063);
var inst_109066 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_109067 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_109068 = /Some-error/;
var inst_109069 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109066)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109067)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109068)].join('');
var inst_109070 = [new cljs.core.Keyword(null,"error","error",-978969032),/Some-error/,inst_109065,inst_109069];
var inst_109071 = cljs.core.PersistentHashMap.fromArrays(inst_109064,inst_109070);
var inst_109072 = cljs.test.do_report(inst_109071);
var state_109128__$1 = state_109128;
var statearr_109390_110694 = state_109128__$1;
(statearr_109390_110694[(2)] = inst_109072);

(statearr_109390_110694[(1)] = (93));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (8))){
var state_109128__$1 = state_109128;
var statearr_109391_110695 = state_109128__$1;
(statearr_109391_110695[(2)] = self__.reg);

(statearr_109391_110695[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (49))){
var _ = (function (){var statearr_109392 = state_109128;
(statearr_109392[(4)] = cljs.core.rest((state_109128[(4)])));

return statearr_109392;
})();
var state_109128__$1 = state_109128;
var ex109389 = (state_109128__$1[(2)]);
var statearr_109393_110696 = state_109128__$1;
(statearr_109393_110696[(5)] = ex109389);


throw ex109389;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109129 === (84))){
var _ = (function (){var statearr_109394 = state_109128;
(statearr_109394[(4)] = cljs.core.cons((86),(state_109128[(4)])));

return statearr_109394;
})();
var ___$1 = (function (){var statearr_109395 = state_109128;
(statearr_109395[(4)] = cljs.core.cons((87),(state_109128[(4)])));

return statearr_109395;
})();
var inst_109046 = repl_tooling.integration.fake_editor.type("(range 4)");
var inst_109047 = repl_tooling.editor_integration.configs_test.change_config_file("(defn error [] (throw (ex-info \"Some-error\" {})))");
var inst_109048 = (self__.reg instanceof Promise);
var state_109128__$1 = (function (){var statearr_109396 = state_109128;
(statearr_109396[(76)] = inst_109046);

(statearr_109396[(77)] = inst_109047);

return statearr_109396;
})();
if(cljs.core.truth_(inst_109048)){
var statearr_109397_110697 = state_109128__$1;
(statearr_109397_110697[(1)] = (89));

} else {
var statearr_109398_110698 = state_109128__$1;
(statearr_109398_110698[(1)] = (90));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});
return (function() {
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = null;
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0 = (function (){
var statearr_109399 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_109399[(0)] = repl_tooling$editor_integration$configs_test$state_machine__34940__auto__);

(statearr_109399[(1)] = (1));

return statearr_109399;
});
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1 = (function (state_109128){
while(true){
var ret_value__34941__auto__ = (function (){try{while(true){
var result__34942__auto__ = switch__34939__auto__(state_109128);
if(cljs.core.keyword_identical_QMARK_(result__34942__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
continue;
} else {
return result__34942__auto__;
}
break;
}
}catch (e109400){var ex__34943__auto__ = e109400;
var statearr_109401_110699 = state_109128;
(statearr_109401_110699[(2)] = ex__34943__auto__);


if(cljs.core.seq((state_109128[(4)]))){
var statearr_109402_110700 = state_109128;
(statearr_109402_110700[(1)] = cljs.core.first((state_109128[(4)])));

} else {
throw ex__34943__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
}})();
if(cljs.core.keyword_identical_QMARK_(ret_value__34941__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
var G__110701 = state_109128;
state_109128 = G__110701;
continue;
} else {
return ret_value__34941__auto__;
}
break;
}
});
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = function(state_109128){
switch(arguments.length){
case 0:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0.call(this);
case 1:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1.call(this,state_109128);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$0 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0;
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$1 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1;
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto__;
})()
})();
var state__35943__auto__ = (function (){var statearr_109403 = f__35942__auto__();
(statearr_109403[(6)] = c__35941__auto__);

return statearr_109403;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__35943__auto__);
}));

return c__35941__auto__;
}finally {cljs.test.update_current_env_BANG_(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.rest);
}}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.prototype.apply = (function (self__,args108563){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone(args108563)));
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done__53962__auto__){
var self__ = this;
var ___9200__auto__ = this;
cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["automatically registering custom commands"], 0));

try{var c__35941__auto__ = cljs.core.async.chan.cljs$core$IFn$_invoke$arity$1((1));
cljs.core.async.impl.dispatch.run((function (){
var f__35942__auto__ = (function (){var switch__34939__auto__ = (function (state_109916){
var state_val_109917 = (state_109916[(1)]);
if((state_val_109917 === (65))){
var _ = (function (){var statearr_109918 = state_109916;
(statearr_109918[(4)] = cljs.core.cons((67),(state_109916[(4)])));

return statearr_109918;
})();
var ___$1 = (function (){var statearr_109919 = state_109916;
(statearr_109919[(4)] = cljs.core.cons((68),(state_109916[(4)])));

return statearr_109919;
})();
var inst_109762 = repl_tooling.editor_integration.configs_test.change_config_file("(defn long-str []\n                              (p/let [res (editor/eval {:text (pr-str (apply str (range 2000)))})]\n                               (prn (str \"a-\" (:result res)))))");
var inst_109763 = (self__.reg instanceof Promise);
var state_109916__$1 = (function (){var statearr_109920 = state_109916;
(statearr_109920[(7)] = inst_109762);

return statearr_109920;
})();
if(cljs.core.truth_(inst_109763)){
var statearr_109921_110702 = state_109916__$1;
(statearr_109921_110702[(1)] = (70));

} else {
var statearr_109922_110703 = state_109916__$1;
(statearr_109922_110703[(1)] = (71));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (70))){
var inst_109405 = (state_109916[(8)]);
var inst_109765 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109766 = (function (){var mark_as_done__53963__auto__ = inst_109405;
var chan__53977__auto__ = inst_109765;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109767 = self__.reg.then(inst_109766);
var state_109916__$1 = (function (){var statearr_109923 = state_109916;
(statearr_109923[(9)] = inst_109767);

return statearr_109923;
})();
var statearr_109924_110704 = state_109916__$1;
(statearr_109924_110704[(2)] = inst_109765);

(statearr_109924_110704[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (62))){
var state_109916__$1 = state_109916;
var statearr_109925_110705 = state_109916__$1;
(statearr_109925_110705[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_109925_110705[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (74))){
var inst_109825 = (state_109916[(2)]);
var _ = (function (){var statearr_109926 = state_109916;
(statearr_109926[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_109926;
})();
var state_109916__$1 = state_109916;
var statearr_109927_110706 = state_109916__$1;
(statearr_109927_110706[(2)] = inst_109825);

(statearr_109927_110706[(1)] = (67));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (7))){
var inst_109405 = (state_109916[(8)]);
var inst_109433 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109434 = (function (){var mark_as_done__53963__auto__ = inst_109405;
var chan__53977__auto__ = inst_109433;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109435 = self__.reg.then(inst_109434);
var state_109916__$1 = (function (){var statearr_109928 = state_109916;
(statearr_109928[(10)] = inst_109435);

return statearr_109928;
})();
var statearr_109929_110707 = state_109916__$1;
(statearr_109929_110707[(2)] = inst_109433);

(statearr_109929_110707[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (59))){
var inst_109405 = (state_109916[(8)]);
var inst_109711 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109712 = repl_tooling.integration.fake_editor.change_result();
var inst_109713 = (function (){var mark_as_done__53963__auto__ = inst_109405;
var chan__53977__auto__ = inst_109711;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109714 = inst_109712.then(inst_109713);
var state_109916__$1 = (function (){var statearr_109931 = state_109916;
(statearr_109931[(11)] = inst_109714);

return statearr_109931;
})();
var statearr_109932_110708 = state_109916__$1;
(statearr_109932_110708[(2)] = inst_109711);

(statearr_109932_110708[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (86))){
var _ = (function (){var statearr_109933 = state_109916;
(statearr_109933[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_109933;
})();
var inst_109834 = (state_109916[(2)]);
var inst_109835 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109836 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109837 = (new cljs.core.PersistentVector(null,1,(5),inst_109835,inst_109836,null));
var inst_109838 = cljs.test.update_current_env_BANG_(inst_109837,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109916[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109916__$1 = (function (){var statearr_109934 = state_109916;
(statearr_109934[(12)] = inst_109838);

return statearr_109934;
})();
var statearr_109935_110709 = state_109916__$1;
(statearr_109935_110709[(2)] = inst_109834);

(statearr_109935_110709[(1)] = (85));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (20))){
var _ = (function (){var statearr_109936 = state_109916;
(statearr_109936[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_109936;
})();
var state_109916__$1 = state_109916;
var ex109930 = (state_109916__$1[(2)]);
var statearr_109937_110710 = state_109916__$1;
(statearr_109937_110710[(5)] = ex109930);


var statearr_109938_110711 = state_109916__$1;
(statearr_109938_110711[(1)] = (19));

(statearr_109938_110711[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (72))){
var inst_109770 = (state_109916[(2)]);
var state_109916__$1 = state_109916;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109916__$1,(69),inst_109770);
} else {
if((state_val_109917 === (58))){
var inst_109720 = (state_109916[(2)]);
var inst_109721 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_109722 = "(\n0\n \n1\n \n2\n)";
var inst_109723 = matcher_combinators.core.match("(\n0\n \n1\n \n2\n)",inst_109720);
var inst_109724 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_109720], 0));
var inst_109725 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_109723);
var inst_109726 = matcher_combinators.printer.as_string(inst_109725);
var inst_109727 = [inst_109724,"\n\nMismatch:\n",inst_109726].join('');
var inst_109728 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_109723);
var inst_109729 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_109728);
var inst_109730 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109916__$1 = (function (){var statearr_109940 = state_109916;
(statearr_109940[(13)] = inst_109722);

(statearr_109940[(14)] = inst_109721);

(statearr_109940[(15)] = inst_109730);

(statearr_109940[(16)] = inst_109727);

return statearr_109940;
})();
if(inst_109729){
var statearr_109941_110712 = state_109916__$1;
(statearr_109941_110712[(1)] = (62));

} else {
var statearr_109942_110713 = state_109916__$1;
(statearr_109942_110713[(1)] = (63));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (60))){
var inst_109716 = repl_tooling.integration.fake_editor.change_result();
var state_109916__$1 = state_109916;
var statearr_109943_110714 = state_109916__$1;
(statearr_109943_110714[(2)] = inst_109716);

(statearr_109943_110714[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (27))){
var _ = (function (){var statearr_109944 = state_109916;
(statearr_109944[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_109944;
})();
var state_109916__$1 = state_109916;
var ex109939 = (state_109916__$1[(2)]);
var statearr_109945_110715 = state_109916__$1;
(statearr_109945_110715[(5)] = ex109939);


throw ex109939;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (1))){
var inst_109405 = (state_109916[(8)]);
var inst_109404 = (function (){return (function (){
cljs.core.async.close_BANG_(self__.reg);

repl_tooling.integration.fake_editor.disconnect_BANG_();

return (done__53962__auto__.cljs$core$IFn$_invoke$arity$0 ? done__53962__auto__.cljs$core$IFn$_invoke$arity$0() : done__53962__auto__.call(null));
});
})();
var inst_109405__$1 = (new cljs.core.Delay(inst_109404,null));
var inst_109406 = (function (){var mark_as_done__53963__auto__ = inst_109405__$1;
return (function (){
if(cljs.core.realized_QMARK_(mark_as_done__53963__auto__)){
return null;
} else {
try{var value__9156__auto___110716 = (function(){throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)})();
if(cljs.core.truth_(value__9156__auto___110716)){
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"pass","pass",1574159993),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110716,null]));
} else {
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"fail","fail",1706214930),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,value__9156__auto___110716,null]));
}

}catch (e109946){var t__9189__auto___110717 = e109946;
cljs.test.report.call(null,cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)],[null,null,new cljs.core.Keyword(null,"error","error",-978969032),null,null,cljs.core.list(new cljs.core.Symbol(null,"throw","throw",595905694,null),cljs.core.list(new cljs.core.Symbol("clojure.core","ex-info","clojure.core/ex-info",-504237117,null),"Async test error - not finalized",cljs.core.PersistentArrayMap.EMPTY)),null,t__9189__auto___110717,null]));
}
return cljs.core.deref(mark_as_done__53963__auto__);
}
});
})();
var inst_109407 = setTimeout(inst_109406,(8000));
var inst_109408 = repl_tooling.editor_integration.configs_test.change_config_file("(defn- qt [txt] (str \"'\" txt))\n                         (defn q [] (update {:code \"(+ 1 2)\"} :code qt))");
var inst_109409 = [new cljs.core.Keyword(null,"config-file-path","config-file-path",-862460128),new cljs.core.Keyword(null,"register-commands","register-commands",-552391338)];
var inst_109410 = (function (){var mark_as_done__53963__auto__ = inst_109405__$1;
return (function (cmds){
cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(self__.reg,cljs.core.set(cljs.core.keys(cmds)));

return cljs.core.reset_BANG_(repl_tooling.editor_integration.configs_test.custom_commands,cmds);
});
})();
var inst_109411 = [repl_tooling.editor_integration.configs_test.config_file,inst_109410];
var inst_109412 = cljs.core.PersistentHashMap.fromArrays(inst_109409,inst_109411);
var inst_109413 = repl_tooling.integration.fake_editor.connect_BANG_.cljs$core$IFn$_invoke$arity$1(inst_109412);
var inst_109414 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109415 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109416 = (new cljs.core.PersistentVector(null,1,(5),inst_109414,inst_109415,null));
var inst_109417 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_109416,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["when connected, new commands are registered"], 0));
var state_109916__$1 = (function (){var statearr_109947 = state_109916;
(statearr_109947[(8)] = inst_109405__$1);

(statearr_109947[(17)] = inst_109408);

(statearr_109947[(18)] = inst_109417);

(statearr_109947[(19)] = inst_109413);

(statearr_109947[(20)] = inst_109407);

return statearr_109947;
})();
var statearr_109948_110718 = state_109916__$1;
(statearr_109948_110718[(2)] = null);

(statearr_109948_110718[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (69))){
var inst_109772 = (state_109916[(2)]);
var inst_109773 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_109774 = new cljs.core.Keyword(null,"long-str","long-str",184146513).cljs$core$IFn$_invoke$arity$1(inst_109773);
var inst_109775 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_109774);
var inst_109776 = (inst_109775.cljs$core$IFn$_invoke$arity$0 ? inst_109775.cljs$core$IFn$_invoke$arity$0() : inst_109775.call(null));
var state_109916__$1 = (function (){var statearr_109949 = state_109916;
(statearr_109949[(21)] = inst_109776);

(statearr_109949[(22)] = inst_109772);

return statearr_109949;
})();
var statearr_109950_110719 = state_109916__$1;
(statearr_109950_110719[(2)] = null);

(statearr_109950_110719[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (101))){
var state_109916__$1 = state_109916;
var statearr_109951_110720 = state_109916__$1;
(statearr_109951_110720[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_109951_110720[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (24))){
var _ = (function (){var statearr_109952 = state_109916;
(statearr_109952[(4)] = cljs.core.cons((26),(state_109916[(4)])));

return statearr_109952;
})();
var ___$1 = (function (){var statearr_109953 = state_109916;
(statearr_109953[(4)] = cljs.core.cons((27),(state_109916[(4)])));

return statearr_109953;
})();
var inst_109559 = repl_tooling.editor_integration.configs_test.change_config_file("(defn p [args] :end)");
var inst_109560 = (self__.reg instanceof Promise);
var state_109916__$1 = (function (){var statearr_109954 = state_109916;
(statearr_109954[(23)] = inst_109559);

return statearr_109954;
})();
if(cljs.core.truth_(inst_109560)){
var statearr_109955_110721 = state_109916__$1;
(statearr_109955_110721[(1)] = (29));

} else {
var statearr_109956_110722 = state_109916__$1;
(statearr_109956_110722[(1)] = (30));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (102))){
var inst_109891 = (state_109916[(24)]);
var inst_109899 = (state_109916[(25)]);
var inst_109896 = (state_109916[(26)]);
var inst_109903 = (state_109916[(2)]);
var inst_109904 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_109896);
var inst_109905 = [inst_109903,inst_109891,inst_109904];
var inst_109906 = cljs.core.PersistentHashMap.fromArrays(inst_109899,inst_109905);
var inst_109907 = cljs.test.do_report(inst_109906);
var _ = (function (){var statearr_109957 = state_109916;
(statearr_109957[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_109957;
})();
var state_109916__$1 = state_109916;
var statearr_109958_110723 = state_109916__$1;
(statearr_109958_110723[(2)] = inst_109907);

(statearr_109958_110723[(1)] = (93));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (55))){
var inst_109741 = (state_109916[(2)]);
var _ = (function (){var statearr_109959 = state_109916;
(statearr_109959[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_109959;
})();
var state_109916__$1 = state_109916;
var statearr_109960_110724 = state_109916__$1;
(statearr_109960_110724[(2)] = inst_109741);

(statearr_109960_110724[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (85))){
var inst_109405 = (state_109916[(8)]);
var inst_109913 = (state_109916[(2)]);
var inst_109914 = cljs.core.deref(inst_109405);
var state_109916__$1 = (function (){var statearr_109961 = state_109916;
(statearr_109961[(27)] = inst_109913);

return statearr_109961;
})();
return cljs.core.async.impl.ioc_helpers.return_chan(state_109916__$1,inst_109914);
} else {
if((state_val_109917 === (39))){
var _ = (function (){var statearr_109962 = state_109916;
(statearr_109962[(4)] = cljs.core.cons((42),(state_109916[(4)])));

return statearr_109962;
})();
var inst_109629 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_109630 = [new cljs.core.Keyword(null,"p","p",151049309)];
var inst_109631 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_109632 = [cljs.core.fn_QMARK_];
var inst_109633 = cljs.core.PersistentHashMap.fromArrays(inst_109631,inst_109632);
var inst_109634 = [inst_109633];
var inst_109635 = cljs.core.PersistentHashMap.fromArrays(inst_109630,inst_109634);
var inst_109636 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_109637 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_109638 = matcher_combinators.core.match(inst_109635,inst_109629);
var inst_109639 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_109629], 0));
var inst_109640 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_109638);
var inst_109641 = matcher_combinators.printer.as_string(inst_109640);
var inst_109642 = [inst_109639,"\n\nMismatch:\n",inst_109641].join('');
var inst_109643 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_109638);
var inst_109644 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_109643);
var inst_109645 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109916__$1 = (function (){var statearr_109963 = state_109916;
(statearr_109963[(28)] = inst_109636);

(statearr_109963[(29)] = inst_109642);

(statearr_109963[(30)] = inst_109645);

(statearr_109963[(31)] = inst_109637);

return statearr_109963;
})();
if(inst_109644){
var statearr_109964_110725 = state_109916__$1;
(statearr_109964_110725[(1)] = (43));

} else {
var statearr_109965_110726 = state_109916__$1;
(statearr_109965_110726[(1)] = (44));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (88))){
var inst_109857 = (state_109916[(2)]);
var inst_109858 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_109859 = new cljs.core.Keyword(null,"error","error",-978969032).cljs$core$IFn$_invoke$arity$1(inst_109858);
var inst_109860 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_109859);
var inst_109861 = (inst_109860.cljs$core$IFn$_invoke$arity$0 ? inst_109860.cljs$core$IFn$_invoke$arity$0() : inst_109860.call(null));
var state_109916__$1 = (function (){var statearr_109966 = state_109916;
(statearr_109966[(32)] = inst_109861);

(statearr_109966[(33)] = inst_109857);

return statearr_109966;
})();
var statearr_109967_110727 = state_109916__$1;
(statearr_109967_110727[(2)] = null);

(statearr_109967_110727[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (46))){
var _ = (function (){var statearr_109968 = state_109916;
(statearr_109968[(4)] = cljs.core.cons((48),(state_109916[(4)])));

return statearr_109968;
})();
var ___$1 = (function (){var statearr_109969 = state_109916;
(statearr_109969[(4)] = cljs.core.cons((49),(state_109916[(4)])));

return statearr_109969;
})();
var inst_109677 = repl_tooling.integration.fake_editor.type("(range 3)");
var inst_109678 = repl_tooling.editor_integration.configs_test.change_config_file("(defn e-block [] (p/let [data (editor/get-top-block)]\n          (editor/eval-and-render data)))");
var inst_109679 = (self__.reg instanceof Promise);
var state_109916__$1 = (function (){var statearr_109970 = state_109916;
(statearr_109970[(34)] = inst_109678);

(statearr_109970[(35)] = inst_109677);

return statearr_109970;
})();
if(cljs.core.truth_(inst_109679)){
var statearr_109971_110728 = state_109916__$1;
(statearr_109971_110728[(1)] = (51));

} else {
var statearr_109972_110729 = state_109916__$1;
(statearr_109972_110729[(1)] = (52));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (4))){
var _ = (function (){var statearr_109974 = state_109916;
(statearr_109974[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_109974;
})();
var inst_109419 = (state_109916[(2)]);
var inst_109420 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109421 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109422 = (new cljs.core.PersistentVector(null,1,(5),inst_109420,inst_109421,null));
var inst_109423 = cljs.test.update_current_env_BANG_(inst_109422,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109916[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109916__$1 = (function (){var statearr_109975 = state_109916;
(statearr_109975[(36)] = inst_109423);

return statearr_109975;
})();
var statearr_109976_110730 = state_109916__$1;
(statearr_109976_110730[(2)] = inst_109419);

(statearr_109976_110730[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (77))){
var inst_109804 = (state_109916[(2)]);
var inst_109805 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-stdout","editor/change-stdout",294315011,null)));
var inst_109806 = /a-01234567891011.*/;
var inst_109807 = matcher_combinators.core.match(/a-01234567891011.*/,inst_109804);
var inst_109808 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_109804], 0));
var inst_109809 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_109807);
var inst_109810 = matcher_combinators.printer.as_string(inst_109809);
var inst_109811 = [inst_109808,"\n\nMismatch:\n",inst_109810].join('');
var inst_109812 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_109807);
var inst_109813 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_109812);
var inst_109814 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109916__$1 = (function (){var statearr_109977 = state_109916;
(statearr_109977[(37)] = inst_109814);

(statearr_109977[(38)] = inst_109806);

(statearr_109977[(39)] = inst_109805);

(statearr_109977[(40)] = inst_109811);

return statearr_109977;
})();
if(inst_109813){
var statearr_109978_110731 = state_109916__$1;
(statearr_109978_110731[(1)] = (81));

} else {
var statearr_109979_110732 = state_109916__$1;
(statearr_109979_110732[(1)] = (82));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (95))){
var _ = (function (){var statearr_109980 = state_109916;
(statearr_109980[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_109980;
})();
var state_109916__$1 = state_109916;
var ex109973 = (state_109916__$1[(2)]);
var statearr_109981_110733 = state_109916__$1;
(statearr_109981_110733[(5)] = ex109973);


var statearr_109982_110734 = state_109916__$1;
(statearr_109982_110734[(1)] = (94));

(statearr_109982_110734[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (54))){
var _ = (function (){var statearr_109983 = state_109916;
(statearr_109983[(4)] = cljs.core.cons((57),(state_109916[(4)])));

return statearr_109983;
})();
var inst_109708 = repl_tooling.integration.fake_editor.change_result();
var inst_109709 = (inst_109708 instanceof Promise);
var state_109916__$1 = state_109916;
if(cljs.core.truth_(inst_109709)){
var statearr_109984_110735 = state_109916__$1;
(statearr_109984_110735[(1)] = (59));

} else {
var statearr_109985_110736 = state_109916__$1;
(statearr_109985_110736[(1)] = (60));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (92))){
var _ = (function (){var statearr_109986 = state_109916;
(statearr_109986[(4)] = cljs.core.cons((95),(state_109916[(4)])));

return statearr_109986;
})();
var inst_109877 = repl_tooling.integration.fake_editor.change_result();
var inst_109878 = (inst_109877 instanceof Promise);
var state_109916__$1 = state_109916;
if(cljs.core.truth_(inst_109878)){
var statearr_109987_110737 = state_109916__$1;
(statearr_109987_110737[(1)] = (97));

} else {
var statearr_109988_110738 = state_109916__$1;
(statearr_109988_110738[(1)] = (98));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (15))){
var state_109916__$1 = state_109916;
var statearr_109989_110739 = state_109916__$1;
(statearr_109989_110739[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_109989_110739[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (48))){
var _ = (function (){var statearr_109990 = state_109916;
(statearr_109990[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_109990;
})();
var inst_109665 = (state_109916[(2)]);
var inst_109666 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109667 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109668 = (new cljs.core.PersistentVector(null,1,(5),inst_109666,inst_109667,null));
var inst_109669 = cljs.test.update_current_env_BANG_(inst_109668,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109916[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109916__$1 = (function (){var statearr_109991 = state_109916;
(statearr_109991[(41)] = inst_109669);

return statearr_109991;
})();
var statearr_109992_110740 = state_109916__$1;
(statearr_109992_110740[(2)] = inst_109665);

(statearr_109992_110740[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (50))){
var inst_109688 = (state_109916[(2)]);
var inst_109689 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_109690 = new cljs.core.Keyword(null,"e-block","e-block",964370856).cljs$core$IFn$_invoke$arity$1(inst_109689);
var inst_109691 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_109690);
var inst_109692 = (inst_109691.cljs$core$IFn$_invoke$arity$0 ? inst_109691.cljs$core$IFn$_invoke$arity$0() : inst_109691.call(null));
var state_109916__$1 = (function (){var statearr_109993 = state_109916;
(statearr_109993[(42)] = inst_109692);

(statearr_109993[(43)] = inst_109688);

return statearr_109993;
})();
var statearr_109994_110741 = state_109916__$1;
(statearr_109994_110741[(2)] = null);

(statearr_109994_110741[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (75))){
var inst_109777 = (state_109916[(2)]);
var inst_109778 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_109779 = check.core.normalize_error(inst_109777);
var inst_109780 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-stdout","editor/change-stdout",294315011,null)));
var inst_109781 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_109782 = /a-01234567891011.*/;
var inst_109783 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109780)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109781)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109782)].join('');
var inst_109784 = [new cljs.core.Keyword(null,"error","error",-978969032),/a-01234567891011.*/,inst_109779,inst_109783];
var inst_109785 = cljs.core.PersistentHashMap.fromArrays(inst_109778,inst_109784);
var inst_109786 = cljs.test.do_report(inst_109785);
var state_109916__$1 = state_109916;
var statearr_109995_110742 = state_109916__$1;
(statearr_109995_110742[(2)] = inst_109786);

(statearr_109995_110742[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (99))){
var inst_109887 = (state_109916[(2)]);
var state_109916__$1 = state_109916;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109916__$1,(96),inst_109887);
} else {
if((state_val_109917 === (21))){
var state_109916__$1 = state_109916;
var statearr_109996_110743 = state_109916__$1;
(statearr_109996_110743[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_109996_110743[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (31))){
var inst_109567 = (state_109916[(2)]);
var state_109916__$1 = state_109916;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109916__$1,(28),inst_109567);
} else {
if((state_val_109917 === (32))){
var _ = (function (){var statearr_109997 = state_109916;
(statearr_109997[(4)] = cljs.core.cons((35),(state_109916[(4)])));

return statearr_109997;
})();
var inst_109585 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_109586 = new cljs.core.Keyword(null,"q","q",689001697).cljs$core$IFn$_invoke$arity$1(inst_109585);
var inst_109587 = cljs.core.list(new cljs.core.Keyword(null,"q","q",689001697),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)));
var inst_109588 = null;
var inst_109589 = matcher_combinators.core.match(null,inst_109586);
var inst_109590 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_109586], 0));
var inst_109591 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_109589);
var inst_109592 = matcher_combinators.printer.as_string(inst_109591);
var inst_109593 = [inst_109590,"\n\nMismatch:\n",inst_109592].join('');
var inst_109594 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_109589);
var inst_109595 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_109594);
var inst_109596 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109916__$1 = (function (){var statearr_109998 = state_109916;
(statearr_109998[(44)] = inst_109593);

(statearr_109998[(45)] = inst_109588);

(statearr_109998[(46)] = inst_109587);

(statearr_109998[(47)] = inst_109596);

return statearr_109998;
})();
if(inst_109595){
var statearr_109999_110744 = state_109916__$1;
(statearr_109999_110744[(1)] = (36));

} else {
var statearr_110000_110745 = state_109916__$1;
(statearr_110000_110745[(1)] = (37));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (40))){
var inst_109656 = (state_109916[(2)]);
var _ = (function (){var statearr_110001 = state_109916;
(statearr_110001[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110001;
})();
var state_109916__$1 = state_109916;
var statearr_110002_110746 = state_109916__$1;
(statearr_110002_110746[(2)] = inst_109656);

(statearr_110002_110746[(1)] = (26));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (91))){
var inst_109855 = (state_109916[(2)]);
var state_109916__$1 = state_109916;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109916__$1,(88),inst_109855);
} else {
if((state_val_109917 === (56))){
var inst_109693 = (state_109916[(2)]);
var inst_109694 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_109695 = check.core.normalize_error(inst_109693);
var inst_109696 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_109697 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_109698 = "(\n0\n \n1\n \n2\n)";
var inst_109699 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109696)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109697)," ",inst_109698].join('');
var inst_109700 = [new cljs.core.Keyword(null,"error","error",-978969032),"(\n0\n \n1\n \n2\n)",inst_109695,inst_109699];
var inst_109701 = cljs.core.PersistentHashMap.fromArrays(inst_109694,inst_109700);
var inst_109702 = cljs.test.do_report(inst_109701);
var state_109916__$1 = state_109916;
var statearr_110004_110747 = state_109916__$1;
(statearr_110004_110747[(2)] = inst_109702);

(statearr_110004_110747[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (33))){
var inst_109607 = (state_109916[(2)]);
var state_109916__$1 = (function (){var statearr_110005 = state_109916;
(statearr_110005[(48)] = inst_109607);

return statearr_110005;
})();
var statearr_110006_110748 = state_109916__$1;
(statearr_110006_110748[(2)] = null);

(statearr_110006_110748[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (13))){
var _ = (function (){var statearr_110007 = state_109916;
(statearr_110007[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110007;
})();
var state_109916__$1 = state_109916;
var ex110003 = (state_109916__$1[(2)]);
var statearr_110008_110749 = state_109916__$1;
(statearr_110008_110749[(5)] = ex110003);


var statearr_110009_110750 = state_109916__$1;
(statearr_110009_110750[(1)] = (12));

(statearr_110009_110750[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (22))){
var state_109916__$1 = state_109916;
var statearr_110010_110751 = state_109916__$1;
(statearr_110010_110751[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_110010_110751[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (90))){
var state_109916__$1 = state_109916;
var statearr_110011_110752 = state_109916__$1;
(statearr_110011_110752[(2)] = self__.reg);

(statearr_110011_110752[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (36))){
var state_109916__$1 = state_109916;
var statearr_110012_110753 = state_109916__$1;
(statearr_110012_110753[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_110012_110753[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (41))){
var inst_109608 = (state_109916[(2)]);
var inst_109609 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_109610 = [new cljs.core.Keyword(null,"p","p",151049309)];
var inst_109611 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_109612 = [cljs.core.fn_QMARK_];
var inst_109613 = cljs.core.PersistentHashMap.fromArrays(inst_109611,inst_109612);
var inst_109614 = [inst_109613];
var inst_109615 = cljs.core.PersistentHashMap.fromArrays(inst_109610,inst_109614);
var inst_109616 = check.core.normalize_error(inst_109608);
var inst_109617 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_109618 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_109619 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_109620 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109617)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109618)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109619)].join('');
var inst_109621 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_109615,inst_109616,inst_109620];
var inst_109622 = cljs.core.PersistentHashMap.fromArrays(inst_109609,inst_109621);
var inst_109623 = cljs.test.do_report(inst_109622);
var state_109916__$1 = state_109916;
var statearr_110013_110754 = state_109916__$1;
(statearr_110013_110754[(2)] = inst_109623);

(statearr_110013_110754[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (89))){
var inst_109405 = (state_109916[(8)]);
var inst_109850 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109851 = (function (){var mark_as_done__53963__auto__ = inst_109405;
var chan__53977__auto__ = inst_109850;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109852 = self__.reg.then(inst_109851);
var state_109916__$1 = (function (){var statearr_110014 = state_109916;
(statearr_110014[(49)] = inst_109852);

return statearr_110014;
})();
var statearr_110015_110755 = state_109916__$1;
(statearr_110015_110755[(2)] = inst_109850);

(statearr_110015_110755[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (100))){
var state_109916__$1 = state_109916;
var statearr_110016_110756 = state_109916__$1;
(statearr_110016_110756[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_110016_110756[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (43))){
var state_109916__$1 = state_109916;
var statearr_110017_110757 = state_109916__$1;
(statearr_110017_110757[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_110017_110757[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (61))){
var inst_109718 = (state_109916[(2)]);
var state_109916__$1 = state_109916;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109916__$1,(58),inst_109718);
} else {
if((state_val_109917 === (29))){
var inst_109405 = (state_109916[(8)]);
var inst_109562 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109563 = (function (){var mark_as_done__53963__auto__ = inst_109405;
var chan__53977__auto__ = inst_109562;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109564 = self__.reg.then(inst_109563);
var state_109916__$1 = (function (){var statearr_110018 = state_109916;
(statearr_110018[(50)] = inst_109564);

return statearr_110018;
})();
var statearr_110019_110758 = state_109916__$1;
(statearr_110019_110758[(2)] = inst_109562);

(statearr_110019_110758[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (44))){
var state_109916__$1 = state_109916;
var statearr_110020_110759 = state_109916__$1;
(statearr_110020_110759[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_110020_110759[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (93))){
var inst_109910 = (state_109916[(2)]);
var _ = (function (){var statearr_110021 = state_109916;
(statearr_110021[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110021;
})();
var state_109916__$1 = state_109916;
var statearr_110022_110760 = state_109916__$1;
(statearr_110022_110760[(2)] = inst_109910);

(statearr_110022_110760[(1)] = (86));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (6))){
var inst_109440 = (state_109916[(2)]);
var state_109916__$1 = (function (){var statearr_110023 = state_109916;
(statearr_110023[(51)] = inst_109440);

return statearr_110023;
})();
var statearr_110024_110761 = state_109916__$1;
(statearr_110024_110761[(2)] = null);

(statearr_110024_110761[(1)] = (10));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (28))){
var inst_109569 = (state_109916[(2)]);
var state_109916__$1 = (function (){var statearr_110025 = state_109916;
(statearr_110025[(52)] = inst_109569);

return statearr_110025;
})();
var statearr_110026_110762 = state_109916__$1;
(statearr_110026_110762[(2)] = null);

(statearr_110026_110762[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (64))){
var inst_109722 = (state_109916[(13)]);
var inst_109730 = (state_109916[(15)]);
var inst_109727 = (state_109916[(16)]);
var inst_109734 = (state_109916[(2)]);
var inst_109735 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_109727);
var inst_109736 = [inst_109734,inst_109722,inst_109735];
var inst_109737 = cljs.core.PersistentHashMap.fromArrays(inst_109730,inst_109736);
var inst_109738 = cljs.test.do_report(inst_109737);
var _ = (function (){var statearr_110027 = state_109916;
(statearr_110027[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110027;
})();
var state_109916__$1 = state_109916;
var statearr_110028_110763 = state_109916__$1;
(statearr_110028_110763[(2)] = inst_109738);

(statearr_110028_110763[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (51))){
var inst_109405 = (state_109916[(8)]);
var inst_109681 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109682 = (function (){var mark_as_done__53963__auto__ = inst_109405;
var chan__53977__auto__ = inst_109681;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109683 = self__.reg.then(inst_109682);
var state_109916__$1 = (function (){var statearr_110029 = state_109916;
(statearr_110029[(53)] = inst_109683);

return statearr_110029;
})();
var statearr_110030_110764 = state_109916__$1;
(statearr_110030_110764[(2)] = inst_109681);

(statearr_110030_110764[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (25))){
var inst_109659 = (state_109916[(2)]);
var inst_109660 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109661 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109662 = (new cljs.core.PersistentVector(null,1,(5),inst_109660,inst_109661,null));
var inst_109663 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_109662,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["getting blocks"], 0));
var state_109916__$1 = (function (){var statearr_110031 = state_109916;
(statearr_110031[(54)] = inst_109663);

(statearr_110031[(55)] = inst_109659);

return statearr_110031;
})();
var statearr_110032_110765 = state_109916__$1;
(statearr_110032_110765[(2)] = null);

(statearr_110032_110765[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (34))){
var inst_109570 = (state_109916[(2)]);
var inst_109571 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_109572 = check.core.normalize_error(inst_109570);
var inst_109573 = cljs.core.list(new cljs.core.Keyword(null,"q","q",689001697),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)));
var inst_109574 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_109575 = null;
var inst_109576 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109573)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109574)," ",inst_109575].join('');
var inst_109577 = [new cljs.core.Keyword(null,"error","error",-978969032),null,inst_109572,inst_109576];
var inst_109578 = cljs.core.PersistentHashMap.fromArrays(inst_109571,inst_109577);
var inst_109579 = cljs.test.do_report(inst_109578);
var state_109916__$1 = state_109916;
var statearr_110033_110766 = state_109916__$1;
(statearr_110033_110766[(2)] = inst_109579);

(statearr_110033_110766[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (17))){
var _ = (function (){var statearr_110034 = state_109916;
(statearr_110034[(4)] = cljs.core.cons((20),(state_109916[(4)])));

return statearr_110034;
})();
var inst_109508 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_109509 = new cljs.core.Keyword(null,"q","q",689001697).cljs$core$IFn$_invoke$arity$1(inst_109508);
var inst_109510 = new cljs.core.Keyword(null,"command","command",-894540724).cljs$core$IFn$_invoke$arity$1(inst_109509);
var inst_109511 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_109512 = ["(+ 1 2)"];
var inst_109513 = cljs.core.PersistentHashMap.fromArrays(inst_109511,inst_109512);
var inst_109514 = (inst_109510.cljs$core$IFn$_invoke$arity$1 ? inst_109510.cljs$core$IFn$_invoke$arity$1(inst_109513) : inst_109510.call(null,inst_109513));
var inst_109515 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_109516 = ["'(+ 1 2)"];
var inst_109517 = cljs.core.PersistentHashMap.fromArrays(inst_109515,inst_109516);
var inst_109518 = cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)),new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.Keyword(null,"command","command",-894540724)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)"], null));
var inst_109519 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"'(+ 1 2)"], null);
var inst_109520 = matcher_combinators.core.match(inst_109517,inst_109514);
var inst_109521 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_109514], 0));
var inst_109522 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_109520);
var inst_109523 = matcher_combinators.printer.as_string(inst_109522);
var inst_109524 = [inst_109521,"\n\nMismatch:\n",inst_109523].join('');
var inst_109525 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_109520);
var inst_109526 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_109525);
var inst_109527 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109916__$1 = (function (){var statearr_110035 = state_109916;
(statearr_110035[(56)] = inst_109519);

(statearr_110035[(57)] = inst_109527);

(statearr_110035[(58)] = inst_109524);

(statearr_110035[(59)] = inst_109518);

return statearr_110035;
})();
if(inst_109526){
var statearr_110036_110767 = state_109916__$1;
(statearr_110036_110767[(1)] = (21));

} else {
var statearr_110037_110768 = state_109916__$1;
(statearr_110037_110768[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (3))){
var inst_109541 = (state_109916[(2)]);
var inst_109542 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109543 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109544 = (new cljs.core.PersistentVector(null,1,(5),inst_109542,inst_109543,null));
var inst_109545 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_109544,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["when changing the file, new commands are registered"], 0));
var state_109916__$1 = (function (){var statearr_110038 = state_109916;
(statearr_110038[(60)] = inst_109545);

(statearr_110038[(61)] = inst_109541);

return statearr_110038;
})();
var statearr_110039_110769 = state_109916__$1;
(statearr_110039_110769[(2)] = null);

(statearr_110039_110769[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (12))){
var inst_109441 = (state_109916[(2)]);
var inst_109442 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_109443 = [new cljs.core.Keyword(null,"q","q",689001697)];
var inst_109444 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_109445 = [cljs.core.fn_QMARK_];
var inst_109446 = cljs.core.PersistentHashMap.fromArrays(inst_109444,inst_109445);
var inst_109447 = [inst_109446];
var inst_109448 = cljs.core.PersistentHashMap.fromArrays(inst_109443,inst_109447);
var inst_109449 = check.core.normalize_error(inst_109441);
var inst_109450 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_109451 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_109452 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_109453 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109450)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109451)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109452)].join('');
var inst_109454 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_109448,inst_109449,inst_109453];
var inst_109455 = cljs.core.PersistentHashMap.fromArrays(inst_109442,inst_109454);
var inst_109456 = cljs.test.do_report(inst_109455);
var state_109916__$1 = state_109916;
var statearr_110040_110770 = state_109916__$1;
(statearr_110040_110770[(2)] = inst_109456);

(statearr_110040_110770[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (2))){
var _ = (function (){var statearr_110041 = state_109916;
(statearr_110041[(4)] = cljs.core.cons((4),(state_109916[(4)])));

return statearr_110041;
})();
var ___$1 = (function (){var statearr_110042 = state_109916;
(statearr_110042[(4)] = cljs.core.cons((5),(state_109916[(4)])));

return statearr_110042;
})();
var inst_109431 = (self__.reg instanceof Promise);
var state_109916__$1 = state_109916;
if(cljs.core.truth_(inst_109431)){
var statearr_110043_110771 = state_109916__$1;
(statearr_110043_110771[(1)] = (7));

} else {
var statearr_110044_110772 = state_109916__$1;
(statearr_110044_110772[(1)] = (8));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (66))){
var inst_109828 = (state_109916[(2)]);
var inst_109829 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109830 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109831 = (new cljs.core.PersistentVector(null,1,(5),inst_109829,inst_109830,null));
var inst_109832 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_109831,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["checking for errors"], 0));
var state_109916__$1 = (function (){var statearr_110045 = state_109916;
(statearr_110045[(62)] = inst_109828);

(statearr_110045[(63)] = inst_109832);

return statearr_110045;
})();
var statearr_110046_110773 = state_109916__$1;
(statearr_110046_110773[(2)] = null);

(statearr_110046_110773[(1)] = (84));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (23))){
var inst_109519 = (state_109916[(56)]);
var inst_109527 = (state_109916[(57)]);
var inst_109524 = (state_109916[(58)]);
var inst_109531 = (state_109916[(2)]);
var inst_109532 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_109524);
var inst_109533 = [inst_109531,inst_109519,inst_109532];
var inst_109534 = cljs.core.PersistentHashMap.fromArrays(inst_109527,inst_109533);
var inst_109535 = cljs.test.do_report(inst_109534);
var _ = (function (){var statearr_110048 = state_109916;
(statearr_110048[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110048;
})();
var state_109916__$1 = state_109916;
var statearr_110049_110774 = state_109916__$1;
(statearr_110049_110774[(2)] = inst_109535);

(statearr_110049_110774[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (47))){
var inst_109744 = (state_109916[(2)]);
var inst_109745 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109746 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109747 = (new cljs.core.PersistentVector(null,1,(5),inst_109745,inst_109746,null));
var inst_109748 = cljs.test.update_current_env_BANG_.cljs$core$IFn$_invoke$arity$variadic(inst_109747,cljs.core.conj,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2(["UNREPL reader tags (IncompleteStr)"], 0));
var state_109916__$1 = (function (){var statearr_110050 = state_109916;
(statearr_110050[(64)] = inst_109744);

(statearr_110050[(65)] = inst_109748);

return statearr_110050;
})();
var statearr_110051_110775 = state_109916__$1;
(statearr_110051_110775[(2)] = null);

(statearr_110051_110775[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (35))){
var _ = (function (){var statearr_110053 = state_109916;
(statearr_110053[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110053;
})();
var state_109916__$1 = state_109916;
var ex110047 = (state_109916__$1[(2)]);
var statearr_110054_110776 = state_109916__$1;
(statearr_110054_110776[(5)] = ex110047);


var statearr_110055_110777 = state_109916__$1;
(statearr_110055_110777[(1)] = (34));

(statearr_110055_110777[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (82))){
var state_109916__$1 = state_109916;
var statearr_110056_110778 = state_109916__$1;
(statearr_110056_110778[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_110056_110778[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (76))){
var _ = (function (){var statearr_110057 = state_109916;
(statearr_110057[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110057;
})();
var state_109916__$1 = state_109916;
var ex110052 = (state_109916__$1[(2)]);
var statearr_110058_110779 = state_109916__$1;
(statearr_110058_110779[(5)] = ex110052);


var statearr_110059_110780 = state_109916__$1;
(statearr_110059_110780[(1)] = (75));

(statearr_110059_110780[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (97))){
var inst_109405 = (state_109916[(8)]);
var inst_109880 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109881 = repl_tooling.integration.fake_editor.change_result();
var inst_109882 = (function (){var mark_as_done__53963__auto__ = inst_109405;
var chan__53977__auto__ = inst_109880;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109883 = inst_109881.then(inst_109882);
var state_109916__$1 = (function (){var statearr_110061 = state_109916;
(statearr_110061[(66)] = inst_109883);

return statearr_110061;
})();
var statearr_110062_110781 = state_109916__$1;
(statearr_110062_110781[(2)] = inst_109880);

(statearr_110062_110781[(1)] = (99));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (19))){
var inst_109490 = (state_109916[(2)]);
var inst_109491 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_109492 = [new cljs.core.Keyword(null,"code","code",1586293142)];
var inst_109493 = ["'(+ 1 2)"];
var inst_109494 = cljs.core.PersistentHashMap.fromArrays(inst_109492,inst_109493);
var inst_109495 = check.core.normalize_error(inst_109490);
var inst_109496 = cljs.core.list(cljs.core.list(new cljs.core.Symbol(null,"->","->",-2139605430,null),cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null)),new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.Keyword(null,"command","command",-894540724)),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"(+ 1 2)"], null));
var inst_109497 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_109498 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"code","code",1586293142),"'(+ 1 2)"], null);
var inst_109499 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109496)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109497)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109498)].join('');
var inst_109500 = [new cljs.core.Keyword(null,"error","error",-978969032),inst_109494,inst_109495,inst_109499];
var inst_109501 = cljs.core.PersistentHashMap.fromArrays(inst_109491,inst_109500);
var inst_109502 = cljs.test.do_report(inst_109501);
var state_109916__$1 = state_109916;
var statearr_110064_110782 = state_109916__$1;
(statearr_110064_110782[(2)] = inst_109502);

(statearr_110064_110782[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (57))){
var _ = (function (){var statearr_110065 = state_109916;
(statearr_110065[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110065;
})();
var state_109916__$1 = state_109916;
var ex110060 = (state_109916__$1[(2)]);
var statearr_110066_110783 = state_109916__$1;
(statearr_110066_110783[(5)] = ex110060);


var statearr_110067_110784 = state_109916__$1;
(statearr_110067_110784[(1)] = (56));

(statearr_110067_110784[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (68))){
var _ = (function (){var statearr_110068 = state_109916;
(statearr_110068[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110068;
})();
var state_109916__$1 = state_109916;
var ex110063 = (state_109916__$1[(2)]);
var statearr_110069_110785 = state_109916__$1;
(statearr_110069_110785[(5)] = ex110063);


throw ex110063;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (11))){
var inst_109489 = (state_109916[(2)]);
var state_109916__$1 = (function (){var statearr_110071 = state_109916;
(statearr_110071[(67)] = inst_109489);

return statearr_110071;
})();
var statearr_110072_110786 = state_109916__$1;
(statearr_110072_110786[(2)] = null);

(statearr_110072_110786[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (9))){
var inst_109438 = (state_109916[(2)]);
var state_109916__$1 = state_109916;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109916__$1,(6),inst_109438);
} else {
if((state_val_109917 === (5))){
var _ = (function (){var statearr_110073 = state_109916;
(statearr_110073[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110073;
})();
var state_109916__$1 = state_109916;
var ex110070 = (state_109916__$1[(2)]);
var statearr_110074_110787 = state_109916__$1;
(statearr_110074_110787[(5)] = ex110070);


throw ex110070;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (83))){
var inst_109814 = (state_109916[(37)]);
var inst_109806 = (state_109916[(38)]);
var inst_109811 = (state_109916[(40)]);
var inst_109818 = (state_109916[(2)]);
var inst_109819 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_109811);
var inst_109820 = [inst_109818,inst_109806,inst_109819];
var inst_109821 = cljs.core.PersistentHashMap.fromArrays(inst_109814,inst_109820);
var inst_109822 = cljs.test.do_report(inst_109821);
var _ = (function (){var statearr_110075 = state_109916;
(statearr_110075[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110075;
})();
var state_109916__$1 = state_109916;
var statearr_110076_110788 = state_109916__$1;
(statearr_110076_110788[(2)] = inst_109822);

(statearr_110076_110788[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (14))){
var state_109916__$1 = state_109916;
var statearr_110077_110789 = state_109916__$1;
(statearr_110077_110789[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_110077_110789[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (45))){
var inst_109642 = (state_109916[(29)]);
var inst_109645 = (state_109916[(30)]);
var inst_109637 = (state_109916[(31)]);
var inst_109649 = (state_109916[(2)]);
var inst_109650 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_109642);
var inst_109651 = [inst_109649,inst_109637,inst_109650];
var inst_109652 = cljs.core.PersistentHashMap.fromArrays(inst_109645,inst_109651);
var inst_109653 = cljs.test.do_report(inst_109652);
var _ = (function (){var statearr_110078 = state_109916;
(statearr_110078[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110078;
})();
var state_109916__$1 = state_109916;
var statearr_110079_110790 = state_109916__$1;
(statearr_110079_110790[(2)] = inst_109653);

(statearr_110079_110790[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (53))){
var inst_109686 = (state_109916[(2)]);
var state_109916__$1 = state_109916;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109916__$1,(50),inst_109686);
} else {
if((state_val_109917 === (78))){
var inst_109405 = (state_109916[(8)]);
var inst_109795 = cljs.core.async.promise_chan.cljs$core$IFn$_invoke$arity$0();
var inst_109796 = repl_tooling.integration.fake_editor.change_stdout();
var inst_109797 = (function (){var mark_as_done__53963__auto__ = inst_109405;
var chan__53977__auto__ = inst_109795;
return (function (result__53978__auto__){
return cljs.core.async.put_BANG_.cljs$core$IFn$_invoke$arity$2(chan__53977__auto__,result__53978__auto__);
});
})();
var inst_109798 = inst_109796.then(inst_109797);
var state_109916__$1 = (function (){var statearr_110080 = state_109916;
(statearr_110080[(68)] = inst_109798);

return statearr_110080;
})();
var statearr_110081_110791 = state_109916__$1;
(statearr_110081_110791[(2)] = inst_109795);

(statearr_110081_110791[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (26))){
var _ = (function (){var statearr_110082 = state_109916;
(statearr_110082[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110082;
})();
var inst_109547 = (state_109916[(2)]);
var inst_109548 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109549 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109550 = (new cljs.core.PersistentVector(null,1,(5),inst_109548,inst_109549,null));
var inst_109551 = cljs.test.update_current_env_BANG_(inst_109550,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109916[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109916__$1 = (function (){var statearr_110083 = state_109916;
(statearr_110083[(69)] = inst_109551);

return statearr_110083;
})();
var statearr_110084_110792 = state_109916__$1;
(statearr_110084_110792[(2)] = inst_109547);

(statearr_110084_110792[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (16))){
var inst_109470 = (state_109916[(70)]);
var inst_109475 = (state_109916[(71)]);
var inst_109478 = (state_109916[(72)]);
var inst_109482 = (state_109916[(2)]);
var inst_109483 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_109475);
var inst_109484 = [inst_109482,inst_109470,inst_109483];
var inst_109485 = cljs.core.PersistentHashMap.fromArrays(inst_109478,inst_109484);
var inst_109486 = cljs.test.do_report(inst_109485);
var _ = (function (){var statearr_110085 = state_109916;
(statearr_110085[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110085;
})();
var state_109916__$1 = state_109916;
var statearr_110086_110793 = state_109916__$1;
(statearr_110086_110793[(2)] = inst_109486);

(statearr_110086_110793[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (81))){
var state_109916__$1 = state_109916;
var statearr_110087_110794 = state_109916__$1;
(statearr_110087_110794[(2)] = new cljs.core.Keyword(null,"pass","pass",1574159993));

(statearr_110087_110794[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (79))){
var inst_109800 = repl_tooling.integration.fake_editor.change_stdout();
var state_109916__$1 = state_109916;
var statearr_110088_110795 = state_109916__$1;
(statearr_110088_110795[(2)] = inst_109800);

(statearr_110088_110795[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (38))){
var inst_109593 = (state_109916[(44)]);
var inst_109588 = (state_109916[(45)]);
var inst_109596 = (state_109916[(47)]);
var inst_109600 = (state_109916[(2)]);
var inst_109601 = cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(inst_109593);
var inst_109602 = [inst_109600,inst_109588,inst_109601];
var inst_109603 = cljs.core.PersistentHashMap.fromArrays(inst_109596,inst_109602);
var inst_109604 = cljs.test.do_report(inst_109603);
var _ = (function (){var statearr_110090 = state_109916;
(statearr_110090[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110090;
})();
var state_109916__$1 = state_109916;
var statearr_110091_110796 = state_109916__$1;
(statearr_110091_110796[(2)] = inst_109604);

(statearr_110091_110796[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (98))){
var inst_109885 = repl_tooling.integration.fake_editor.change_result();
var state_109916__$1 = state_109916;
var statearr_110092_110797 = state_109916__$1;
(statearr_110092_110797[(2)] = inst_109885);

(statearr_110092_110797[(1)] = (99));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (87))){
var _ = (function (){var statearr_110093 = state_109916;
(statearr_110093[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110093;
})();
var state_109916__$1 = state_109916;
var ex110089 = (state_109916__$1[(2)]);
var statearr_110094_110798 = state_109916__$1;
(statearr_110094_110798[(5)] = ex110089);


throw ex110089;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (30))){
var state_109916__$1 = state_109916;
var statearr_110095_110799 = state_109916__$1;
(statearr_110095_110799[(2)] = self__.reg);

(statearr_110095_110799[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (73))){
var _ = (function (){var statearr_110096 = state_109916;
(statearr_110096[(4)] = cljs.core.cons((76),(state_109916[(4)])));

return statearr_110096;
})();
var inst_109792 = repl_tooling.integration.fake_editor.change_stdout();
var inst_109793 = (inst_109792 instanceof Promise);
var state_109916__$1 = state_109916;
if(cljs.core.truth_(inst_109793)){
var statearr_110097_110800 = state_109916__$1;
(statearr_110097_110800[(1)] = (78));

} else {
var statearr_110098_110801 = state_109916__$1;
(statearr_110098_110801[(1)] = (79));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (96))){
var inst_109889 = (state_109916[(2)]);
var inst_109890 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_109891 = /Some-error/;
var inst_109892 = matcher_combinators.core.match(/Some-error/,inst_109889);
var inst_109893 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_109889], 0));
var inst_109894 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_109892);
var inst_109895 = matcher_combinators.printer.as_string(inst_109894);
var inst_109896 = [inst_109893,"\n\nMismatch:\n",inst_109895].join('');
var inst_109897 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_109892);
var inst_109898 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_109897);
var inst_109899 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109916__$1 = (function (){var statearr_110099 = state_109916;
(statearr_110099[(24)] = inst_109891);

(statearr_110099[(25)] = inst_109899);

(statearr_110099[(26)] = inst_109896);

(statearr_110099[(73)] = inst_109890);

return statearr_110099;
})();
if(inst_109898){
var statearr_110100_110802 = state_109916__$1;
(statearr_110100_110802[(1)] = (100));

} else {
var statearr_110101_110803 = state_109916__$1;
(statearr_110101_110803[(1)] = (101));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (10))){
var _ = (function (){var statearr_110102 = state_109916;
(statearr_110102[(4)] = cljs.core.cons((13),(state_109916[(4)])));

return statearr_110102;
})();
var inst_109462 = cljs.core.deref(repl_tooling.editor_integration.configs_test.custom_commands);
var inst_109463 = [new cljs.core.Keyword(null,"q","q",689001697)];
var inst_109464 = [new cljs.core.Keyword(null,"command","command",-894540724)];
var inst_109465 = [cljs.core.fn_QMARK_];
var inst_109466 = cljs.core.PersistentHashMap.fromArrays(inst_109464,inst_109465);
var inst_109467 = [inst_109466];
var inst_109468 = cljs.core.PersistentHashMap.fromArrays(inst_109463,inst_109467);
var inst_109469 = cljs.core.list(new cljs.core.Symbol("clojure.core","deref","clojure.core/deref",188719157,null),new cljs.core.Symbol(null,"custom-commands","custom-commands",-713520410,null));
var inst_109470 = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"q","q",689001697),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"command","command",-894540724),new cljs.core.Symbol(null,"fn?","fn?",1820990818,null)], null)], null);
var inst_109471 = matcher_combinators.core.match(inst_109468,inst_109462);
var inst_109472 = cljs.core.pr_str.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([inst_109462], 0));
var inst_109473 = new cljs.core.Keyword("matcher-combinators.result","value","matcher-combinators.result/value",-1708331494).cljs$core$IFn$_invoke$arity$1(inst_109471);
var inst_109474 = matcher_combinators.printer.as_string(inst_109473);
var inst_109475 = [inst_109472,"\n\nMismatch:\n",inst_109474].join('');
var inst_109476 = new cljs.core.Keyword("matcher-combinators.result","type","matcher-combinators.result/type",-630343109).cljs$core$IFn$_invoke$arity$1(inst_109471);
var inst_109477 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"match","match",1220059550),inst_109476);
var inst_109478 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363)];
var state_109916__$1 = (function (){var statearr_110103 = state_109916;
(statearr_110103[(70)] = inst_109470);

(statearr_110103[(71)] = inst_109475);

(statearr_110103[(72)] = inst_109478);

(statearr_110103[(74)] = inst_109469);

return statearr_110103;
})();
if(inst_109477){
var statearr_110104_110804 = state_109916__$1;
(statearr_110104_110804[(1)] = (14));

} else {
var statearr_110105_110805 = state_109916__$1;
(statearr_110105_110805[(1)] = (15));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (18))){
var inst_109538 = (state_109916[(2)]);
var _ = (function (){var statearr_110106 = state_109916;
(statearr_110106[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110106;
})();
var state_109916__$1 = state_109916;
var statearr_110107_110806 = state_109916__$1;
(statearr_110107_110806[(2)] = inst_109538);

(statearr_110107_110806[(1)] = (4));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (52))){
var state_109916__$1 = state_109916;
var statearr_110108_110807 = state_109916__$1;
(statearr_110108_110807[(2)] = self__.reg);

(statearr_110108_110807[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (67))){
var _ = (function (){var statearr_110110 = state_109916;
(statearr_110110[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110110;
})();
var inst_109750 = (state_109916[(2)]);
var inst_109751 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_109752 = [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)];
var inst_109753 = (new cljs.core.PersistentVector(null,1,(5),inst_109751,inst_109752,null));
var inst_109754 = cljs.test.update_current_env_BANG_(inst_109753,cljs.core.rest);
var ___$1 = (function (){var temp__5753__auto__ = (state_109916[(5)]);
if(cljs.core.truth_(temp__5753__auto__)){
var e__34184__auto__ = temp__5753__auto__;
throw e__34184__auto__;
} else {
return null;
}
})();
var state_109916__$1 = (function (){var statearr_110111 = state_109916;
(statearr_110111[(75)] = inst_109754);

return statearr_110111;
})();
var statearr_110112_110808 = state_109916__$1;
(statearr_110112_110808[(2)] = inst_109750);

(statearr_110112_110808[(1)] = (66));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (71))){
var state_109916__$1 = state_109916;
var statearr_110113_110809 = state_109916__$1;
(statearr_110113_110809[(2)] = self__.reg);

(statearr_110113_110809[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (42))){
var _ = (function (){var statearr_110114 = state_109916;
(statearr_110114[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110114;
})();
var state_109916__$1 = state_109916;
var ex110109 = (state_109916__$1[(2)]);
var statearr_110115_110810 = state_109916__$1;
(statearr_110115_110810[(5)] = ex110109);


var statearr_110116_110811 = state_109916__$1;
(statearr_110116_110811[(1)] = (41));

(statearr_110116_110811[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (80))){
var inst_109802 = (state_109916[(2)]);
var state_109916__$1 = state_109916;
return cljs.core.async.impl.ioc_helpers.take_BANG_(state_109916__$1,(77),inst_109802);
} else {
if((state_val_109917 === (37))){
var state_109916__$1 = state_109916;
var statearr_110117_110812 = state_109916__$1;
(statearr_110117_110812[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_110117_110812[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (63))){
var state_109916__$1 = state_109916;
var statearr_110118_110813 = state_109916__$1;
(statearr_110118_110813[(2)] = new cljs.core.Keyword(null,"fail","fail",1706214930));

(statearr_110118_110813[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (94))){
var inst_109862 = (state_109916[(2)]);
var inst_109863 = [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword(null,"expected","expected",1583670997),new cljs.core.Keyword(null,"actual","actual",107306363),new cljs.core.Keyword(null,"message","message",-406056002)];
var inst_109864 = check.core.normalize_error(inst_109862);
var inst_109865 = cljs.core.list(new cljs.core.Symbol(null,"await!","await!",-473046777,null),cljs.core.list(new cljs.core.Symbol("editor","change-result","editor/change-result",-914297300,null)));
var inst_109866 = new cljs.core.Symbol(null,"=>","=>",-813269641,null);
var inst_109867 = /Some-error/;
var inst_109868 = ["Expected ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109865)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109866)," ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_109867)].join('');
var inst_109869 = [new cljs.core.Keyword(null,"error","error",-978969032),/Some-error/,inst_109864,inst_109868];
var inst_109870 = cljs.core.PersistentHashMap.fromArrays(inst_109863,inst_109869);
var inst_109871 = cljs.test.do_report(inst_109870);
var state_109916__$1 = state_109916;
var statearr_110120_110814 = state_109916__$1;
(statearr_110120_110814[(2)] = inst_109871);

(statearr_110120_110814[(1)] = (93));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (8))){
var state_109916__$1 = state_109916;
var statearr_110121_110815 = state_109916__$1;
(statearr_110121_110815[(2)] = self__.reg);

(statearr_110121_110815[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (49))){
var _ = (function (){var statearr_110122 = state_109916;
(statearr_110122[(4)] = cljs.core.rest((state_109916[(4)])));

return statearr_110122;
})();
var state_109916__$1 = state_109916;
var ex110119 = (state_109916__$1[(2)]);
var statearr_110123_110816 = state_109916__$1;
(statearr_110123_110816[(5)] = ex110119);


throw ex110119;


return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
if((state_val_109917 === (84))){
var _ = (function (){var statearr_110124 = state_109916;
(statearr_110124[(4)] = cljs.core.cons((86),(state_109916[(4)])));

return statearr_110124;
})();
var ___$1 = (function (){var statearr_110125 = state_109916;
(statearr_110125[(4)] = cljs.core.cons((87),(state_109916[(4)])));

return statearr_110125;
})();
var inst_109846 = repl_tooling.integration.fake_editor.type("(range 4)");
var inst_109847 = repl_tooling.editor_integration.configs_test.change_config_file("(defn error [] (throw (ex-info \"Some-error\" {})))");
var inst_109848 = (self__.reg instanceof Promise);
var state_109916__$1 = (function (){var statearr_110126 = state_109916;
(statearr_110126[(76)] = inst_109847);

(statearr_110126[(77)] = inst_109846);

return statearr_110126;
})();
if(cljs.core.truth_(inst_109848)){
var statearr_110127_110817 = state_109916__$1;
(statearr_110127_110817[(1)] = (89));

} else {
var statearr_110128_110818 = state_109916__$1;
(statearr_110128_110818[(1)] = (90));

}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});
return (function() {
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = null;
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0 = (function (){
var statearr_110129 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_110129[(0)] = repl_tooling$editor_integration$configs_test$state_machine__34940__auto__);

(statearr_110129[(1)] = (1));

return statearr_110129;
});
var repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1 = (function (state_109916){
while(true){
var ret_value__34941__auto__ = (function (){try{while(true){
var result__34942__auto__ = switch__34939__auto__(state_109916);
if(cljs.core.keyword_identical_QMARK_(result__34942__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
continue;
} else {
return result__34942__auto__;
}
break;
}
}catch (e110130){var ex__34943__auto__ = e110130;
var statearr_110131_110819 = state_109916;
(statearr_110131_110819[(2)] = ex__34943__auto__);


if(cljs.core.seq((state_109916[(4)]))){
var statearr_110132_110820 = state_109916;
(statearr_110132_110820[(1)] = cljs.core.first((state_109916[(4)])));

} else {
throw ex__34943__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",-437573268);
}})();
if(cljs.core.keyword_identical_QMARK_(ret_value__34941__auto__,new cljs.core.Keyword(null,"recur","recur",-437573268))){
var G__110821 = state_109916;
state_109916 = G__110821;
continue;
} else {
return ret_value__34941__auto__;
}
break;
}
});
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__ = function(state_109916){
switch(arguments.length){
case 0:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0.call(this);
case 1:
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1.call(this,state_109916);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$0 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____0;
repl_tooling$editor_integration$configs_test$state_machine__34940__auto__.cljs$core$IFn$_invoke$arity$1 = repl_tooling$editor_integration$configs_test$state_machine__34940__auto____1;
return repl_tooling$editor_integration$configs_test$state_machine__34940__auto__;
})()
})();
var state__35943__auto__ = (function (){var statearr_110133 = f__35942__auto__();
(statearr_110133[(6)] = c__35941__auto__);

return statearr_110133;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped(state__35943__auto__);
}));

return c__35941__auto__;
}finally {cljs.test.update_current_env_BANG_(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"testing-contexts","testing-contexts",-1485646523)], null),cljs.core.rest);
}}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.getBasis = (function (){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"reg","reg",-1018219425,null),new cljs.core.Symbol(null,"meta108561","meta108561",-413035568,null)], null);
}));

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.cljs$lang$type = true);

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.cljs$lang$ctorStr = "repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test108560");

(repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560.cljs$lang$ctorPrWriter = (function (this__4461__auto__,writer__4462__auto__,opt__4463__auto__){
return cljs.core._write(writer__4462__auto__,"repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test108560");
}));

/**
 * Positional factory function for repl-tooling.editor-integration.configs-test/t_repl_tooling$editor_integration$configs_test108560.
 */
repl_tooling.editor_integration.configs_test.__GT_t_repl_tooling$editor_integration$configs_test108560 = (function repl_tooling$editor_integration$configs_test$__GT_t_repl_tooling$editor_integration$configs_test108560(reg__$1,meta108561){
return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560(reg__$1,meta108561));
});

}

return (new repl_tooling.editor_integration.configs_test.t_repl_tooling$editor_integration$configs_test108560(reg,null));
});

(repl_tooling.editor_integration.configs_test.custom_config.cljs$lang$var = new cljs.core.Var(function(){return repl_tooling.editor_integration.configs_test.custom_config;},new cljs.core.Symbol("repl-tooling.editor-integration.configs-test","custom-config","repl-tooling.editor-integration.configs-test/custom-config",-2130163493,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"repl-tooling.editor-integration.configs-test","repl-tooling.editor-integration.configs-test",-1562769389,null),new cljs.core.Symbol(null,"custom-config","custom-config",565084785,null),"repl_tooling/editor_integration/configs_test.cljs",29,1,39,39,cljs.core.List.EMPTY,null,(cljs.core.truth_(repl_tooling.editor_integration.configs_test.custom_config)?repl_tooling.editor_integration.configs_test.custom_config.cljs$lang$test:null)])));

//# sourceMappingURL=repl_tooling.editor_integration.configs_test.js.map
